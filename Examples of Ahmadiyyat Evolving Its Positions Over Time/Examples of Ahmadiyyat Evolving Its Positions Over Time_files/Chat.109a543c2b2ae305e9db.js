webpackJsonp(["Chat"],{"./node_modules/agentkeepalive/browser.js":function(e,n){function t(){}e.exports=t,e.exports.HttpsAgent=t},"./node_modules/form-data/lib/browser.js":function(e,n){e.exports="object"==typeof self?self.FormData:window.FormData},"./node_modules/lodash/_arrayIncludesWith.js":function(e,n){function t(e,n,t){for(var r=-1,o=null==e?0:e.length;++r<o;)if(t(n,e[r]))return!0;return!1}e.exports=t},"./node_modules/lodash/_baseUniq.js":function(e,n,t){function r(e,n,t){var r=-1,d=a,f=e.length,h=!0,p=[],m=p;if(t)h=!1,d=i;else if(f>=l){var g=n?null:c(e);if(g)return u(g);h=!1,d=s,m=new o}else m=n?[]:p;e:for(;++r<f;){var v=e[r],b=n?n(v):v;if(v=t||0!==v?v:0,h&&b===b){for(var _=m.length;_--;)if(m[_]===b)continue e;n&&m.push(b),p.push(v)}else d(m,b,t)||(m!==p&&m.push(b),p.push(v))}return p}var o=t("./node_modules/lodash/_SetCache.js"),a=t("./node_modules/lodash/_arrayIncludes.js"),i=t("./node_modules/lodash/_arrayIncludesWith.js"),s=t("./node_modules/lodash/_cacheHas.js"),c=t("./node_modules/lodash/_createSet.js"),u=t("./node_modules/lodash/_setToArray.js"),l=200;e.exports=r},"./node_modules/lodash/_createSet.js":function(e,n,t){var r=t("./node_modules/lodash/_Set.js"),o=t("./node_modules/lodash/noop.js"),a=t("./node_modules/lodash/_setToArray.js"),i=r&&1/a(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=i},"./node_modules/lodash/difference.js":function(e,n,t){var r=t("./node_modules/lodash/_baseDifference.js"),o=t("./node_modules/lodash/_baseFlatten.js"),a=t("./node_modules/lodash/_baseRest.js"),i=t("./node_modules/lodash/isArrayLikeObject.js"),s=a(function(e,n){return i(e)?r(e,o(n,1,i,!0)):[]});e.exports=s},"./node_modules/lodash/first.js":function(e,n,t){e.exports=t("./node_modules/lodash/head.js")},"./node_modules/lodash/head.js":function(e,n){function t(e){return e&&e.length?e[0]:void 0}e.exports=t},"./node_modules/lodash/uniq.js":function(e,n,t){function r(e){return e&&e.length?o(e):[]}var o=t("./node_modules/lodash/_baseUniq.js");e.exports=r},"./node_modules/lodash/uniqBy.js":function(e,n,t){function r(e,n){return e&&e.length?a(e,o(n,2)):[]}var o=t("./node_modules/lodash/_baseIteratee.js"),a=t("./node_modules/lodash/_baseUniq.js");e.exports=r},"./node_modules/sendbird/SendBird.min.js":function(n,t,r){!function(e,t){n.exports=t()}(0,function(){function n(){this.oldIE=!0,this.boundary="--------FormData"+Math.random(),this._fields=[]}var t,o=!1,a="wss://ws.sendbird.com",i="https://api.sendbird.com";try{t=window.console||{log:function(){}}}catch(e){t={log:function(){}}}var s="undefined";try{s=navigator.userAgent.replace(/,/g,".")}catch(e){s="undefined"}var c,u="JS,"+s+",3.0.48,",l=function(){try{if(document&&9==document.documentMode)return!0}catch(e){return!1}return!1}(),d=function(){try{if(document&&document.documentMode<=8)return!0}catch(e){return!1}return!1}();if(l||d)"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"function"!=typeof Array.prototype.forEach&&(Array.prototype.forEach=function(e){for(var n=0;n<this.length;n++)e.apply(this,[this[n],n,this])}),n.prototype.append=function(e,n){this._fields.push([e,n])},n.prototype.toString=function(){var e=this.boundary,n="";return this._fields.forEach(function(t){if(n+="--"+e+"\r\n",t[1].name){var r=t[1];n+="Content-Disposition: form-data; name='"+t[0]+"'; filename='"+r.name+"'\r\n",n+="Content-Transfer-Encoding: base64\r\n",n+="Content-Type: "+r.type+"\r\n\r\n",n+=r.base64+"\r\n"}else n+="Content-Disposition: form-data; name='"+t[0]+"';\r\n\r\n",n+=t[1]+"\r\n"}),n+="--"+e+"--"},c=n;else if("undefined"==typeof window&&"undefined"==typeof FormData)try{c=r("./node_modules/form-data/lib/browser.js")}catch(e){}var f=function(e,n,t){if(t&&"function"==typeof t)if(e){var r=null;try{r=JSON.parse(e.response)}catch(e){}var o=r?r.message:null,a=r?r.code:null;t(n,new g(o,a))}else t(n,null)},h=function(e){for(var n in e)if(e.hasOwnProperty(n))return!1;return Array.isArray(e)?JSON.stringify(e)===JSON.stringify([]):JSON.stringify(e)===JSON.stringify({})},p=function(e){try{if("number"==typeof e)return!0;if("string"==typeof e)return/^\d+$/.test(e)}catch(e){return o&&t.error(e),!1}},m=function(){var e=function(){};return function(n,t){e.prototype=new n,t.prototype=new e,t.super=n.prototype,t.prototype.constructor=t}}(),g=function(e,n){return this.name="SendBirdException",this.code=n||0,this.message=e,this};m(Error,g);var v={MessageTypeFilter:{ALL:0,USER:1,FILE:2,ADMIN:3}},b=function(e){return Object.keys(e).forEach(function(n){null!==e[n]&&void 0!==e[n]&&"object"==typeof e[n]&&(e[n]=b(e[n]))}),Object.freeze(e)},_=function(e){return JSON.parse(JSON.stringify(e))},E=function(){var n,l={};try{n="undefined"==typeof window?r("./node_modules/xhr2/lib/browser.js"):null}catch(e){n=null}if(n)try{var E=r("./node_modules/agentkeepalive/browser.js"),y=r("./node_modules/agentkeepalive/browser.js").HttpsAgent,I=new E({keepAlive:!0,timeout:6e4,keepAliveTimeout:6e4});l.httpAgent=I;var C=new y({keepAlive:!0,timeout:6e4,keepAliveTimeout:6e4});l.httpsAgent=C}catch(e){}var O=function(){var e;return n?(e=new n,e.nodejsSet(l)):e=new XMLHttpRequest,e},A=function(e,n,r,o,a){var i=O();i.open(r,e),i.onload=function(){i.status>=200&&i.status<400?f(null,JSON.parse(i.responseText),a):f({status:i.status,statusText:i.statusText,response:i.responseText},null,a)},i.onerror=function(){f({status:404,statusText:"There was a connection error",response:JSON.stringify({message:"There was a connection error",code:J.NETWORK_ERROR})},null,a)};try{for(var s in o)i.setRequestHeader(s,o[s]?o[s]:"sendbird")}catch(e){}try{switch(r){case"get":case"GET":i.send();break;default:"undefined"!=typeof FormData&&FormData&&n instanceof FormData||void 0!==c&&c&&n instanceof c?n.oldIE?(i.setRequestHeader("Content-Type","multipart/form-data; boundary="+n.boundary),i.send(n.toString())):i.send(n):(i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.send(JSON.stringify(n)))}}catch(e){t.log("request.send() fail:"+e)}},N=!1,S=function(e,n,t){t&&"function"==typeof t&&(void 0===n&&(n=null),void 0===e&&(e=null),N?t(n,e):t(e,n))},R="",w=0,T=0,j=function(e){this.isOpenChannel=function(){return this.channelType==L.CHANNEL_TYPE_OPEN},this.isGroupChannel=function(){return this.channelType==L.CHANNEL_TYPE_GROUP},this.isUserMessage=function(){return this.messageType==j.MESSAGE_TYPE_USER},this.isAdminMessage=function(){return this.messageType==j.MESSAGE_TYPE_ADMIN},this.isFileMessage=function(){return this.messageType==j.MESSAGE_TYPE_FILE},this._update=function(e){this.messageId=e.hasOwnProperty("msg_id")?parseInt(e.msg_id):0,this.channelUrl=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.createdAt=e.hasOwnProperty("ts")?parseInt(e.ts):0,this.updatedAt=e.hasOwnProperty("updated_at")?parseInt(e.updated_at):0,this.channelType=e.hasOwnProperty("channel_type")?String(e.channel_type):L.CHANNEL_TYPE_GROUP},this.serialize=function(){var e=JSON.parse(JSON.stringify(this));return e.hasOwnProperty("_sender")&&(e.sender=e._sender,delete e._sender),b(e)},this.messageType=j.MESSAGE_TYPE_BASE,e&&this._update(e)};j.build=function(e,n){if(!e)return null;var t,r,o,a,i,s,c,u;switch(e.type){case"MESG":return t=new F(e.user),r=parseInt(e.message_id),o=String(e.message),a=String(e.data),i=parseInt(e.created_at),s=parseInt(e.updated_at),c=e.hasOwnProperty("custom_type")?String(e.custom_type):"",u=e.hasOwnProperty("translations")?e.translations:{},new U(U.build("",r,t,n,o,a,c,u,i,s));case"FILE":t=new F(e.user),r=parseInt(e.message_id),o=String(e.message),i=parseInt(e.created_at),s=parseInt(e.updated_at),c=e.hasOwnProperty("custom_type")?String(e.custom_type):"";var l=e.file,d=String(l.url),f=String(l.name),h=String(l.type),p=parseInt(l.size)||0;a=String(l.data);var m=e.hasOwnProperty("thumbnails")?e.thumbnails:[],g=!!e.hasOwnProperty("require_auth")&&e.require_auth;return new x(x.build("",r,t,n,d,f,h,p,a,c,i,m,g,s));case"BRDM":case"ADMM":return r=parseInt(e.message_id),o=String(e.message),a=String(e.data),i=parseInt(e.created_at),s=parseInt(e.updated_at),c=e.hasOwnProperty("custom_type")?String(e.custom_type):"",u=e.hasOwnProperty("translations")?e.translations:{},new P(P.build(r,n,o,a,c,u,i,s))}return null},j.MESSAGE_TYPE_BASE="base",j.MESSAGE_TYPE_ADMIN="admin",j.MESSAGE_TYPE_USER="user",j.MESSAGE_TYPE_FILE="file";var P=function(e){this.messageType=j.MESSAGE_TYPE_ADMIN,e&&(this._update(e),this.message=String(e.message),this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?String(e.custom_type):"",this.translations=e.hasOwnProperty("translations")?e.translations:{})};m(j,P),P.build=function(e,n,t,r,o,a,i,s){var c={msg_id:e,channel_url:n.url,channel_type:n.channelType==L.CHANNEL_TYPE_OPEN?L.CHANNEL_TYPE_OPEN:L.CHANNEL_TYPE_GROUP,ts:i,updated_at:s,message:t,data:r};return o&&(c.custom_type=o),a&&(c.translations=a),c},P.buildFromSerializedData=function(e){var n=_(e);return new P(P.build(n.messageId,{url:n.channelUrl,channelType:n.channelType},n.message,n.data,n.customType,n.translations,n.createdAt,n.updatedAt))};var U=function(e){this.messageType=j.MESSAGE_TYPE_USER,e&&(this._update(e),this.message=String(e.message),this.data=e.hasOwnProperty("data")?String(e.data):"",this._sender=new F(e.user),d?this.sender=this._sender:Object.defineProperty(this,"sender",{get:function(){if(X.getInstance().Options.UseMemberAsMessageSender&&this.isGroupChannel()){var e=D.cachedChannels[this.channelUrl];if(e){var n=e.memberMap[this._sender.userId];n&&(this._sender.nickname!=n.nickname&&(this._sender.nickname=n.nickname),this._sender.profileUrl!=n.profileUrl&&(this._sender.profileUrl=n.profileUrl))}}return this._sender},set:function(e){this._sender=e}}),this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.customType=e.hasOwnProperty("custom_type")?String(e.custom_type):"",this.translations=e.hasOwnProperty("translations")?e.translations:{})};m(j,U),U.build=function(e,n,t,r,o,a,i,s,c,u){var l={};l.req_id=e,l.msg_id=n,l.channel_url=r.url,l.channel_type=r.channelType==L.CHANNEL_TYPE_OPEN?L.CHANNEL_TYPE_OPEN:L.CHANNEL_TYPE_GROUP,l.ts=c,l.updated_at=u,l.message=o,a&&(l.data=a),i&&(l.custom_type=i),s&&(l.translations=s);var d={};return d.user_id=t.userId,d.nickname=t.nickname,d.profile_url=t.profileUrl,l.user=d,l},U.buildFromSerializedData=function(e){var n=_(e);return new U(U.build(n.reqId,n.messageId,n.sender,{url:n.channelUrl,channelType:n.channelType},n.message,n.data,n.customType,n.translations,n.createdAt,n.updatedAt))};var x=function(e){if(this.messageType=j.MESSAGE_TYPE_FILE,e&&(this._update(e),this._sender=new F(e.user),d?this.sender=this._sender:Object.defineProperty(this,"sender",{get:function(){if(X.getInstance().Options.UseMemberAsMessageSender&&this.isGroupChannel()){var e=D.cachedChannels[this.channelUrl];if(e){var n=e.memberMap[this._sender.userId];n&&(this._sender.nickname!=n.nickname&&(this._sender.nickname=n.nickname),this._sender.profileUrl!=n.profileUrl&&(this._sender.profileUrl=n.profileUrl))}}return this._sender},set:function(e){this._sender=e}}),this.requireAuth=!!e.hasOwnProperty("require_auth")&&e.require_auth,this.url=this.requireAuth?String(e.url).split("?auth=")[0]+"?auth="+$.getInstance().ekey:String(e.url).split("?auth=")[0],this.name=e.hasOwnProperty("name")?e.name:"File",this.size=parseInt(e.size)||0,this.type=String(e.type),this.data=e.hasOwnProperty("custom")?String(e.custom):"",this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.customType=e.hasOwnProperty("custom_type")?String(e.custom_type):"",this.thumbnails=e.hasOwnProperty("thumbnails")?e.thumbnails:[],this.requireAuth))for(var n in this.thumbnails)this.thumbnails[n].url=String(this.thumbnails[n].url).split("?auth=")[0]+"?auth="+$.getInstance().ekey};m(j,x),x.build=function(e,n,t,r,o,a,i,s,c,u,l,d,f,h){var p={};p.req_id=e,p.msg_id=n,p.channel_url=r.url,p.channel_type=r.channelType==L.CHANNEL_TYPE_OPEN?L.CHANNEL_TYPE_OPEN:L.CHANNEL_TYPE_GROUP,p.ts=l,p.updated_at=h,p.url=o,p.name=a,p.type=i,p.size=s,p.custom=c;var m={};return m.user_id=t.userId,m.nickname=t.nickname,m.profile_url=t.profileUrl,p.user=m,u&&(p.custom_type=u),f&&(p.require_auth=f),d&&(p.thumbnails=d),p},x.buildFromSerializedData=function(e){var n=_(e);return new x(x.build(n.reqId,n.messageId,n.sender,{url:n.channelUrl,channelType:n.channelType},n.url,n.name,n.type,n.size,n.data,n.customType,n.createdAt,n.thumbnails,n.requireAuth,n.updatedAt))};var L=function(e){this._update=function(e){this.url=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.name=e.hasOwnProperty("name")?String(e.name):"",this.coverUrl=e.hasOwnProperty("cover_url")?String(e.cover_url):"",this.createdAt=e.hasOwnProperty("created_at")?1e3*e.created_at:0,this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?e.custom_type:"",this.fileUploadRequest={}},this.serialize=function(){var e=JSON.parse(JSON.stringify(this));if(e.hasOwnProperty("lastMessage")&&null!==e.lastMessage&&void 0!==e.lastMessage&&"object"==typeof e.lastMessage){var n=e.lastMessage;n.hasOwnProperty("_sender")&&(n.sender=n._sender,delete n._sender,e.lastMessage=n)}return b(e)},this.isGroupChannel=function(){return this.channelType==L.CHANNEL_TYPE_GROUP},this.isOpenChannel=function(){return this.channelType==L.CHANNEL_TYPE_OPEN},this.getMessageChangeLogsByToken=function(e,n){if("function"==typeof e&&(n=e,e=null),"function"!=typeof n)return null;$.getInstance().getMessageChangeLogsByToken(this.isOpenChannel(),this.url,e,function(e,t){if(t)return void S(null,t,n);var r=e.updated.map(function(e){return j.build(e,this)}),o=e.deleted.map(function(e){return e.message_id}),a=e.has_more,i=e.next;S({updatedMessages:r,deletedMessageIds:o,hasMore:a,token:i},null,n)})},this.createPreviousMessageListQuery=function(){return new q(this)},this.createMessageListQuery=function(){return new z(this)};var n=function(e,n,t,r,o,a,i,s,c){if(i===v.MessageTypeFilter.ADMIN?i="ADMM":i===v.MessageTypeFilter.USER?i="MESG":i===v.MessageTypeFilter.FILE?i="FILE":i===v.MessageTypeFilter.ALL&&(i=""),!p(n)||"boolean"!=typeof t||!p(r)||!p(o)||"boolean"!=typeof a||"string"!=typeof i||"string"!=typeof s)return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),c);$.getInstance().messageList(e.isOpenChannel(),e.url,n,r,o,t,a,i,s,function(n,t){if(t)return void S(null,t,c);var r=n.messages,o=[];for(var a in r){var i=j.build(r[a],e);i&&o.push(i)}S(o,null,c)})},t=function(e,n,t,r,o,a,i,s,c){if(i===v.MessageTypeFilter.ADMIN?i="ADMM":i===v.MessageTypeFilter.USER?i="MESG":i===v.MessageTypeFilter.FILE?i="FILE":i===v.MessageTypeFilter.ALL&&(i=""),!p(n)||"boolean"!=typeof t||!p(r)||!p(o)||"boolean"!=typeof a||"string"!=typeof i||"string"!=typeof s)return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),c);$.getInstance().messageListByID(e.isOpenChannel(),e.url,n,r,o,t,a,i,s,function(n,t){if(t)return void S(null,t,c);var r=n.messages,o=[];for(var a in r){var i=j.build(r[a],e);i&&o.push(i)}S(o,null,c)})};this.getNextMessagesByTimestamp=function(e,t,r,o,a,i,s){return n(this,e,t,0,r,o,a,i,s)},this.getPreviousMessagesByTimestamp=function(e,t,r,o,a,i,s){return n(this,e,t,r,0,o,a,i,s)},this.getPreviousAndNextMessagesByTimestamp=function(e,t,r,o,a,i,s){return n(this,e,!0,t,r,o,a,i,s)},this.getNextMessagesByID=function(e,n,r,o,a,i,s){return t(this,e,n,0,r,o,a,i,s)},this.getPreviousMessagesByID=function(e,n,r,o,a,i,s){return t(this,e,n,r,0,o,a,i,s)},this.getPreviousAndNextMessagesByID=function(e,n,r,o,a,i,s){return t(this,e,!0,n,r,o,a,i,s)},this._sendFileCommand=function(e,n,t,r,o,a,i,s,c,u,l){var d,f=this;d=l?l.reqId:V.generateRequestId();var h=V.bFile(d,e,n,t,r,o,a,i,s,c),p=x.build(h.requestId,0,X.getInstance().currentUser,this,"string"==typeof n?n:"",t,r,o,a,i,null,null,!1),m=new x(p);return"string"==typeof n&&X.getInstance().sendCommand(h,function(e,n){if(n)return void S(null,new g(n.message,n.code),u);var t=new x(e.getJsonElement()),r=X.getInstance().currentUser;r&&t._sender&&r.userId==t._sender.userId&&(r.nickname!=t._sender.nickname&&(r.nickname=t._sender.nickname),r.profileUrl!=t._sender.profileUrl&&(r.profileUrl=t._sender.profileUrl)),f.isGroupChannel()&&D.getChannel(f.url,function(e,n){if(N){var r=e;e=n,n=r}if(n)return void S(null,n,u);e.lastMessage=t;for(var o in X.getInstance().channelHandlers)X.getInstance().channelHandlers[o].onChannelChanged(e)}),S(t,null,u)}),m},this._getSendFileMessageParamInfo=function(e){var n={file:null,name:null,type:null,size:null,data:"",customType:"",thumbnailSizes:[],callback:null,progressHandler:null};switch("function"==typeof e.slice(-1)[0]&&(n.callback=e.pop()),"function"==typeof e.slice(-1)[0]&&(n.progressHandler=e.pop()),e.length){case 1:n.file=e[0];break;case 2:n.file=e[0],n.data=e[1];break;case 3:n.file=e[0],n.data=e[1],n.customType=e[2];break;case 4:n.file=e[0],n.data=e[1],n.customType=e[2],n.thumbnailSizes=e[3];break;case 5:n.file=e[0],n.name=e[1],n.type=e[2],n.size=e[3],n.data=e[4];break;case 6:n.file=e[0],n.name=e[1],n.type=e[2],n.size=e[3],n.data=e[4],n.customType=e[5];break;case 7:n.file=e[0],n.name=e[1],n.type=e[2],n.size=e[3],n.data=e[4],n.customType=e[5],n.thumbnailSizes=e[6]}return"string"!=typeof n.file&&null!==n.file&&(null!==n.name&&void 0!==n.name&&n.name||(n.name=n.file.name),null!==n.type&&void 0!==n.type&&n.type||(n.type=n.file.type),null!==n.size&&void 0!==n.size||(n.size=n.file.size)),null!==n.name&&void 0!==n.name||(n.name=""),null!==n.type&&void 0!==n.type||(n.type=""),null!==n.size&&void 0!==n.size||(n.size=0),n},this.sendFileMessage=function(){var e=this,n=this._getSendFileMessageParamInfo(Array.prototype.slice.call(arguments)),t=n.file,r=n.name,o=n.type,a=n.size,i=n.data,s=n.customType,c=n.thumbnailSizes,u=n.callback,l=n.progressHandler;if(null!==c&&void 0!==c||(c=[]),!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),u);if(null===t||void 0===t||null!==r&&void 0!==r&&"string"!=typeof r||null!==o&&void 0!==o&&"string"!=typeof o||null!==a&&void 0!==a&&(!p(a)||parseInt(a)<0)||null!==i&&void 0!==i&&"string"!=typeof i||null!==s&&void 0!==s&&"string"!=typeof s||!Array.isArray(c))return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),u);var d=e.url,f=null;return"string"==typeof t?f=e._sendFileCommand(d,t,r,o,a,i,s,[],!1,u):(f=e._sendFileCommand(d,t,r,o,a,i,s,[],!1,u),$.getInstance().uploadFile(t,o,c,d,function(n,t){if(t)return void S(null,t,u);var c="object"==typeof n?n:JSON.parse(n),l=c.url,h=c.hasOwnProperty("thumbnails")?c.thumbnails:[],p=!!c.hasOwnProperty("require_auth")&&c.require_auth;e._sendFileCommand(d,l,r,o,a,i,s,h,p,u,f)},l,this.fileUploadRequest,f.reqId)),f},this.cancelUploadingFileMessage=function(e,n){if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),n);if(!p(e))return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n);var t=this,r=t.fileUploadRequest[e];return r?(r.upload.onabort=function(){delete t.fileUploadRequest[e],S(!0,null,n)},r.abort(),!0):(S(!1,new g("Uploading has been completed or cancelled.",J.FILE_UPLOAD_CANCEL_FAILED),n),!1)},this.sendUserMessage=function(e,n,t,r,o){var a=this;if("function"==typeof n&&(o=n,n="",t="",r=[]),"function"==typeof t&&(o=t,t="",r=[]),"function"==typeof r&&(o=r,r=[]),r||(r=[]),"string"==typeof r&&(r=[r]),null===n&&(n=""),null===t&&(t=""),!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),o);if("string"!=typeof e||"string"!=typeof n||"string"!=typeof t||!Array.isArray(r))return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),o);var i=V.bMessage(this.url,e,n,t,[],r),s=U.build(i.requestId,0,X.getInstance().currentUser,this,e,n,t,r,(new Date).getTime()),c=new U(s);return X.getInstance().sendCommand(i,function(e,n){if(n)return void S(null,new g(n.message,n.code),o);var t=new U(e.getJsonElement()),r=X.getInstance().currentUser;r&&t._sender&&r.userId==t._sender.userId&&(r.nickname!=t._sender.nickname&&(r.nickname=t._sender.nickname),r.profileUrl!=t._sender.profileUrl&&(r.profileUrl=t._sender.profileUrl)),a.isGroupChannel()&&D.getChannel(a.url,function(e,n){if(N){var r=e;e=n,n=r}if(n)return void S(null,n,o);e.lastMessage=t;for(var a in X.getInstance().channelHandlers)X.getInstance().channelHandlers[a].onChannelChanged(e)}),S(t,null,o)}),c},this.updateUserMessage=function(e,n,t,r,o){var a=Array.prototype.slice.call(arguments);if(5!==a.length)return"function"==typeof a.slice(-1)[0]&&(o=a.pop()),void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),o);if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),o);if(!p(e))return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),o);if("string"!=typeof n&&null!==n&&void 0!==n||"string"!=typeof t&&null!==t&&void 0!==t||"string"!=typeof r&&null!==r&&void 0!==r)return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),o);var i=V.bUpdateUserMessage(this.url,e,n,t,r);X.getInstance().sendCommand(i,function(e,n){if(n)return void S(null,new g(n.message,n.code),o);var t=new U(e.getJsonElement());S(t,null,o)})},this.updateFileMessage=function(e,n,t,r){var o=Array.prototype.slice.call(arguments);if(4!==o.length)return"function"==typeof o.slice(-1)[0]&&(r=o.pop()),void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),r);if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),r);if(!p(e))return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),r);if("string"!=typeof n&&null!==n&&void 0!==n||"string"!=typeof t&&null!==t&&void 0!==t)return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),r);var a=V.bUpdateFileMessage(this.url,e,n,t);X.getInstance().sendCommand(a,function(e,n){if(n)return void S(null,new g(n.message,n.code),r);var t=new x(e.getJsonElement());S(t,null,r)})},this.createMetaCounters=function(e,n){return X.getInstance().hasLoggedIn()?null==e||"object"!=typeof e||Array.isArray(e)||h(e)?void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n):void $.getInstance().createMetaCounters(this.isOpenChannel(),this.url,e,function(e,t){if(t)return void S(null,t,n);S(e,null,n)}):void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),n)},this.updateMetaCounters=function(e,n,t){return X.getInstance().hasLoggedIn()?("function"!=typeof n&&void 0!==t||(t=n,n=!1),null==e||"object"!=typeof e||Array.isArray(e)||h(e)||"boolean"!=typeof n?void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),t):void $.getInstance().updateMetaCounters(this.isOpenChannel(),this.url,e,n,$.UPDATE_META_COUNTER_MODE_SET,function(e,n){if(n)return void S(null,n,t);S(e,null,t)})):void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),t)},this.increaseMetaCounters=function(e,n){return X.getInstance().hasLoggedIn()?null==e||"object"!=typeof e||Array.isArray(e)||h(e)?void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n):void $.getInstance().updateMetaCounters(this.isOpenChannel(),this.url,e,!1,$.UPDATE_META_COUNTER_MODE_INC,function(e,t){if(t)return void S(null,t,n);S(e,null,n)}):void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),n)},this.decreaseMetaCounters=function(e,n){return X.getInstance().hasLoggedIn()?null==e||"object"!=typeof e||Array.isArray(e)||h(e)?void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n):void $.getInstance().updateMetaCounters(this.isOpenChannel(),this.url,e,!1,$.UPDATE_META_COUNTER_MODE_DEC,function(e,t){if(t)return void S(null,t,n);var r=e,o={};for(var a in r){var i=r[a];o[a]=i}S(o,null,n)}):void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),n)},this.getMetaCounters=function(e,n){return X.getInstance().hasLoggedIn()?Array.isArray(e)?void $.getInstance().getMetaCounters(this.isOpenChannel(),this.url,e,function(e,t){if(t)return void S(null,t,n);S(e,null,n)}):void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n):void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),n)},this.getAllMetaCounters=function(e){if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),e);$.getInstance().getAllMetaCounters(this.isOpenChannel(),this.url,function(n,t){if(t)return void S(null,t,e);S(n,null,e)})},this.deleteMetaCounter=function(e,n){return X.getInstance().hasLoggedIn()?"string"!=typeof e?void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n):void $.getInstance().deleteMetaCounter(this.isOpenChannel(),this.url,e,function(e,t){if(t)return void S(null,t,n);S(e,null,n)}):void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),n)},this.deleteAllMetaCounters=function(e){if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),e);$.getInstance().deleteAllMetaCounters(this.isOpenChannel(),this.url,function(n,t){if(t)return void(e&&S(null,t,e));S(n,null,e)})},this.createMetaData=function(e,n){return X.getInstance().hasLoggedIn()?null==e||"object"!=typeof e||Array.isArray(e)||h(e)?void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n):void $.getInstance().createMetaData(this.isOpenChannel(),this.url,e,function(e,t){if(t)return void S(null,t,n);S(e,null,n)}):void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),n)},this.updateMetaData=function(e,n,t){return X.getInstance().hasLoggedIn()?("function"!=typeof n&&void 0!==t||(t=n,n=!1),null==e||"object"!=typeof e||Array.isArray(e)||h(e)||"boolean"!=typeof n?void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),t):void $.getInstance().updateMetaData(this.isOpenChannel(),this.url,e,n,function(e,n){if(n)return void S(null,n,t);S(e,null,t)})):void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),t)},this.getMetaData=function(e,n){return X.getInstance().hasLoggedIn()?Array.isArray(e)?void $.getInstance().getMetaData(this.isOpenChannel(),this.url,e,function(e,t){if(t)return void S(null,t,n);S(e,null,n)}):void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n):void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),n)},this.getAllMetaData=function(e){if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),e);$.getInstance().getAllMetaData(this.isOpenChannel(),this.url,function(n,t){if(t)return void S(null,t,e);S(n,null,e)})},this.deleteMetaData=function(e,n){return X.getInstance().hasLoggedIn()?"string"!=typeof e?void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n):void $.getInstance().deleteMetaData(this.isOpenChannel(),this.url,e,function(e,t){if(t)return void S(null,t,n);S(e,null,n)}):void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),n)},this.deleteAllMetaData=function(e){if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),e);$.getInstance().deleteAllMetaData(this.isOpenChannel(),this.url,function(n,t){if(t)return void(e&&S(null,t,e));S(n,null,e)})},this.deleteMessage=function(e,n){var t=Array.prototype.slice.call(arguments);if(2!==t.length)return"function"==typeof t.slice(-1)[0]&&(n=t.pop()),void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n);if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),n);var r=this;if("object"!=typeof e||h(e)||Array.isArray(e)||Object.keys(e).indexOf("messageId")<0||!e)return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n);$.getInstance().deleteMessage(r.isOpenChannel(),r.url,e.messageId,function(e,t){if(t)return void S(null,t,n);S(null,null,n)})},this.channelType=L.CHANNEL_TYPE_BASE,e&&this._update(e)};L.CHANNEL_TYPE_OPEN="open",L.CHANNEL_TYPE_GROUP="group",L.CHANNEL_TYPE_BASE="base";var k=function(e){this.parse=function(e){if(e.hasOwnProperty("freeze")&&(this.isFrozen=e.freeze),e.hasOwnProperty("participant_count")&&(this.participantCount=parseInt(e.participant_count)),e.hasOwnProperty("operators")&&e.operators){this.operators=[];for(var n in e.operators){var t=new F(e.operators[n]);this.operators.push(t)}}},this.refresh=function(e){k.getChannelWithoutCache(this.url,function(n,t){if(N){var r=n;n=t,t=r}if(t)return void S(null,t,e);S(n,null,e)})},this.update=function(e){this._update(e),this.parse(e)},this.delete=function(e){var n=this.url;$.getInstance().deleteOpenChannel(n,function(t,r){if(r)return void S(null,r,e);delete k.cachedChannels[n],S(t,null,e)})},this.enter=function(e){var n=this,t=V.bEnter(n.url);X.getInstance().sendCommand(t,function(t,r){if(r)return void S(null,new g(r.message,r.code),e);k.enteredChannels[n.url]=n,S(null,null,e)})},this.exit=function(e){var n=this,t=V.bExit(n.url);X.getInstance().sendCommand(t,function(t,r){if(r)return void S(null,new g(r.message,r.code),e);delete k.enteredChannels[n.url],S(null,null,e)})},this.createParticipantListQuery=function(){return new W(W.PARTICIPANT,this)},this.createMutedUserListQuery=function(){return new W(W.MUTED_USER,this)},this.createBannedUserListQuery=function(){return new W(W.BANNED_USER,this)},this.updateChannel=function(){var e=Array.prototype.slice.call(arguments),n=null,t=null,r=null,o=null,a=null,i=null;switch("function"==typeof e.slice(-1)[0]&&(i=e.pop()),e.length){case 3:n=e[0],t=e[1],r=e[2];break;case 4:n=e[0],t=e[1],r=e[2],o=e[3];break;case 5:n=e[0],t=e[1],r=e[2],o=e[3],a=e[4];break;default:return void S(null,new g("Invalid arguments.2",J.INVALID_PARAMETER),i)}this.updateChannelWithOperatorUserIds(n,t,r,o,a,i)},this.updateChannelWithOperatorUserIds=function(e,n,t,r,o,a){if("function"==typeof o&&(a=o,o=null),"string"!=typeof e&&null!==e&&void 0!==e||"string"!=typeof n&&h(n)&&null!==n&&void 0!==n||"string"!=typeof t&&null!==t&&void 0!==t||"string"!=typeof r&&!Array.isArray(r)&&null!==r&&void 0!==r||"string"!=typeof o&&null!==o&&void 0!==o)return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),a);$.getInstance().updateOpenChannel(this.url,e,n,t,r,o,function(e,n){if(n)return void S(null,n,a);var t=k.upsert(e);S(t,null,a)})},this.banUser=function(e,n,t){if("function"==typeof n&&3!==arguments.length&&(t=n,n=-1),!e||parseInt(n)<0&&-1!==parseInt(n))return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),t);this.banUserWithUserId(e.userId,n,t)},this.banUserWithUserId=function(e,n,t){if("function"==typeof n&&3!==arguments.length&&(t=n,n=-1),!e||parseInt(n)<0&&-1!==parseInt(n))return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),t);$.getInstance().banUser(this.url,e,null,n,function(e,n){if(n)return void S(null,n,t);S(null,null,t)})},this.unbanUser=function(e,n){if(!e)return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),n);this.unbanUserWithUserId(e.userId,n)},this.unbanUserWithUserId=function(e,n){if(!e)return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),n);$.getInstance().unbanUser(this.url,e,function(e,t){if(t)return void S(null,t,n);S(null,null,n)})},this.muteUser=function(e,n){if(!e)return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),n);this.muteUserWithUserId(e.userId,n)},this.muteUserWithUserId=function(e,n){if(!e)return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),n);$.getInstance().muteUser(this.url,e,function(e,t){if(t)return void S(null,t,n);S(null,null,n)})},this.unmuteUser=function(e,n){if(!e)return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),n);this.unmuteUserWithUserId(e.userId,n)},this.unmuteUserWithUserId=function(e,n){if(!e)return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),n);$.getInstance().unmuteUser(this.url,e,function(e,t){if(t)return void S(null,t,n);S(null,null,n)})},this.isOperator=function(e){return!!e&&this.isOperatorWithUserId(e.userId)},this.isOperatorWithUserId=function(e){for(var n in this.operators)if(this.operators[n].userId==e)return!0;return!1},this.channelType=L.CHANNEL_TYPE_OPEN,this.participantCount=0,this.isFrozen=!1,this.operators=[],e&&(this._update(e),this.parse(e))};m(L,k),k.enteredChannels={},k.clearEnteredChannels=function(){k.enteredChannels={}},k.createOpenChannelListQuery=function(){return new Y},k.buildFromSerializedData=function(e){var n=_(e);return new k({channel_url:n.url,name:n.name,cover_url:n.coverUrl,data:n.data,custom_type:n.customType,created_at:n.createdAt/1e3,freeze:n.isFrozen,participant_count:n.participantCount,operators:n.operators.map(function(e){return F.build(e.userId,e.nickname,e.profileUrl,e.connectionStatus,e.lastSeenAt,e.metaData,e.isActive)})})},k.createChannel=function(){var e,n,t,r,o,a;switch(arguments.length){case 1:a=arguments[0];break;case 4:e=arguments[0],n=arguments[1],t=arguments[2],a=arguments[3];break;case 5:e=arguments[0],n=arguments[1],t=arguments[2],r=arguments[3],a=arguments[4];break;case 6:e=arguments[0],n=arguments[1],t=arguments[2],r=arguments[3],o=arguments[4],a=arguments[5]}k.createChannelWithOperatorUserIds(e,n,t,r,o,a)},k.upsert=function(e){var n=new k(e);return k.cachedChannels.hasOwnProperty(n.url)?k.cachedChannels[n.url].update(e):k.cachedChannels[n.url]=n,k.cachedChannels[n.url]},k.createChannelWithOperatorUserIds=function(e,n,t,r,o,a){if("function"==typeof o&&(a=o,o=""),"string"!=typeof e&&null!==e&&void 0!==e||"string"!=typeof n&&h(n)&&null!==n&&void 0!==n||"string"!=typeof t&&null!==t&&void 0!==t||"string"!=typeof r&&!Array.isArray(r)&&null!==r&&void 0!==r||"string"!=typeof o&&null!==o&&void 0!==o)return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),a);$.getInstance().createOpenChannel(e,n,t,r,o,function(e,n){if(n)return void S(null,n,a);var t=k.upsert(e);S(t,null,a)})},k.cachedChannels={},k.clearCache=function(){k.cachedChannels={}},k.removeCachedChannel=function(e){delete k.cachedChannels[e]},k.getChannel=function(e,n){if(!e)return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n);k.cachedChannels.hasOwnProperty(e)?S(k.cachedChannels[e],null,n):k.getChannelWithoutCache(e,n)},k.getChannelWithoutCache=function(e,n){if(!e)return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n);$.getInstance().getOpenChannel(e,function(t,r){if(r)return void S(null,r,n);k.upsert(t),S(k.cachedChannels[e],null,n)})};var D=function(e){var n,r,o={};this.parse=function(e){var n=this;if(n.isDistinct=!!e.is_distinct,n.unreadMessageCount=parseInt(e.unread_message_count),n.isPushEnabled=!!e.is_push_enabled,n.isHidden=!!e.hasOwnProperty("is_hidden")&&e.is_hidden,e.hasOwnProperty("read_receipt")){n.cachedReadReceiptStatus={};for(var t in e.read_receipt){var r=e.read_receipt[t];n.updateReadReceipt(t,parseInt(r))}}e.hasOwnProperty("members")&&(n.members=[],n.memberMap={},e.members.forEach(function(e){var t=new B(e);n.members.push(t),n.memberMap[t.userId]=t}),n.memberCount=n.members.length),e.hasOwnProperty("member_count")&&(n.memberCount=parseInt(e.member_count)),e.hasOwnProperty("last_message")&&"object"==typeof e.last_message&&e.last_message?e.last_message instanceof j?n.lastMessage=e.last_message:n.lastMessage=j.build(e.last_message,n):n.lastMessage=null,e.hasOwnProperty("inviter")&&null!==e.inviter&&"object"==typeof e.inviter&&!h(e.inviter)?n.inviter=new F(e.inviter):n.inviter=null},this.refresh=function(e){D.getChannelWithoutCache(this.url,function(n,t){if(N){var r=n;n=t,t=r}if(t)return void S(null,t,e);S(n,null,e)})},this.update=function(e){this._update(e),this.parse(e)},this.updateChannel=function(){var e=this,n=Array.prototype.slice.call(arguments),t=null,r=null,o=null,a=null,i=null,s=null;switch("function"==typeof n.slice(-1)[0]&&(s=n.pop()),n.length){case 3:t=e.isDistinct,r=n[0],o=n[1],a=n[2];break;case 4:t=n[0],r=n[1],o=n[2],a=n[3];break;case 5:t=n[0],r=n[1],o=n[2],a=n[3],i=n[4];break;default:return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),s)}if("string"!=typeof r&&null!==r&&void 0!==r||"string"!=typeof o&&h(o)&&null!==o&&void 0!==o||"string"!=typeof a&&null!==a&&void 0!==a||"boolean"!=typeof t||"string"!=typeof i&&null!==i&&void 0!==i)return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),s);$.getInstance().updateGroupChannel(e.url,t,r,o,a,i,function(e,n){if(n)return void S(null,n,s);var t=D.upsert(e);S(t,null,s)})},this.resetMyHistory=function(e){if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),e);$.getInstance().resetMyHistory(this.url,function(n,t){if(t)return void S(null,t,e);S(n,null,e)})},this.invite=function(e,n){if("string"==typeof e&&(e=[{userId:e}]),!Array.isArray(e)||h(e))return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n);var t=[];for(var r in e){if("object"!=typeof e[r]||h(e[r])){S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n);break}t.push(e[r].userId)}this.inviteWithUserIds(t,n)},this.inviteWithUserIds=function(e,n){if(!Array.isArray(e)||h(e))return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n);$.getInstance().groupChannelInvite(this.url,e,function(e,t){if(t)return void S(null,t,n);var r=D.upsert(e);S(r,null,n)})},this.acceptInvitation=function(e){$.getInstance().acceptInvitation(this.url,X.getInstance().getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);var r=D.upsert(n);S(r,null,e)})},this.declineInvitation=function(e){$.getInstance().declineInvitation(this.url,X.getInstance().getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);S(n,null,e)})},this.hide=function(e,n){if(1===arguments.length&&"function"==typeof e&&(n=e,e=!1),null!==e&&void 0!==e||(e=!1),"boolean"!=typeof e)return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),n);var t=this.url,r=this;$.getInstance().groupChannelHide(t,X.getInstance().getCurrentUserId(),e,function(e,o){if(o)return void S(null,o,n);r.isHidden=!0;var a=D.cachedChannels[t];a&&(a.isHidden=!0),S(e,null,n)})},this.leave=function(e){var n=this.url;$.getInstance().groupChannelLeave(n,X.getInstance().getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);S(null,null,e)})},this.markAsRead=function(){this._sendMarkAsRead(null)},this._sendMarkAsRead=function(e){var n=this,t=V.bRead(n.url);X.getInstance().sendCommand(t,function(t,r){if(r)return void S(null,new g(r.message,r.code),e);if(n.unreadMessageCount>0){n.unreadMessageCount=0;for(var o in X.getInstance().channelHandlers)X.getInstance().channelHandlers[o].onChannelChanged(n)}S(null,null,e)})},this.getReadReceipt=function(e){if(!(e instanceof j))return t.log("message is not BaseMessage instance"),-1;if(e.messageType==j.MESSAGE_TYPE_ADMIN)return 0;var n=X.getInstance().currentUser,r=0,o=e.createdAt,a=this.members;for(var i in a){var s=a[i],c=s.userId;n.userId==c||e.sender&&e.sender.userId==c||this.cachedReadReceiptStatus[c]<o&&r++}return r},this.getReadStatus=function(){var e={};if(!X.getInstance().currentUser)return e;var n=this.members;for(var t in n){var r=n[t],o=r.userId;if(r.userId!=X.getInstance().getCurrentUserId()){var a=this.cachedReadReceiptStatus[o];e[o]={user:r,last_seen_at:parseInt(a)}}}return e},this.updateReadReceipt=function(e,n){var t=e,r=this.cachedReadReceiptStatus[t],o=n;(!r||r<o)&&(this.cachedReadReceiptStatus[t]=o)},this.startTyping=function(){var e=(new Date).getTime();if(!(e-n<1e3)){r=0,n=e;var t=V.bTypeStart(this.url,n);X.getInstance().sendCommand(t,null)}},this.endTyping=function(){var e=(new Date).getTime();if(!(e-r<1e3)){n=0,r=e;var t=V.bTypeEnd(this.url,r);X.getInstance().sendCommand(t,null)}},this.invalidateTypingStatus=function(){var e=!1,n=(new Date).getTime();for(var t in o)n-o[t]>=1e4&&(delete o[t],e=!0);return e},this.updateTypingStatus=function(e,n){n?o[e.userId]=(new Date).getTime():delete o[e.userId]},this.isTyping=function(){return 0!=Object.keys(o).length},this.getTypingMembers=function(){var e=[];for(var n in o){var t=this.memberMap[n];this.memberMap[n]&&e.push(t)}return e},this.addMember=function(e){var n=this.removeMember(e);n&&n.state===B.JOINED&&(e.state=B.JOINED),this.memberMap[e.userId]=e,this.members.push(e),this.memberCount++,this.updateReadReceipt(e.userId,0)},this.removeMember=function(e){var n=e.userId,t=null;if(this.memberMap.hasOwnProperty(e.userId)){delete this.memberMap[e.userId];for(var r in this.members){var o=this.members[r];if(o.userId==n){t=o,this.members.splice(r,1);break}}this.memberCount--}return t},this.setPushPreference=function(e,n){var t=this;if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),n);$.getInstance().setPushPreference(X.getInstance().getCurrentUserId(),this.url,e,function(e,r){if(r)return void S(null,r,n);t.isPushEnabled=e.enable,S(e,null,n)})},this.getPushPreference=function(e){var n=this;if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),e);$.getInstance().getPushPreference(X.getInstance().getCurrentUserId(),this.url,function(t,r){if(r)return void S(null,r,e);if(e){var o;try{o=t.enable}catch(e){o=!1}n.isPushEnabled=o,S(o,null,e)}})},this.channelType=L.CHANNEL_TYPE_GROUP,this.isDistinct=!1,this.unreadMessageCount=0,this.inviter=null,this.members=[],this.memberMap={},this.lastMessage={},this.memberCount=0,this.cachedReadReceiptStatus={},this.isPushEnabled,this.isHidden=!1,e&&(this._update(e),this.parse(e))};m(L,D),D.buildFromSerializedData=function(e){var n=_(e);return new D({channel_url:n.url,name:n.name,cover_url:n.coverUrl,data:n.data,custom_type:n.customType,created_at:n.createdAt/1e3,is_distinct:n.isDistinct,unread_message_count:n.unreadMessageCount,is_push_enabled:n.isPushEnabled,is_hidden:n.isHidden,member_count:n.memberCount,members:n.members.map(function(e){return B.build(F.build(e.userId,e.nickname,e.profileUrl,e.connectionStatus,e.lastSeenAt,e.metaData,e.isActive),e.state,e.isBlockedByMe,e.isBlockingMe)}),last_message:function(e){return null!==e&&void 0!==e&&"object"==typeof e?e.messageType===j.MESSAGE_TYPE_USER?new U(U.build(e.reqId,e.messageId,e.sender,{url:e.channelUrl,channelType:e.channelType},e.message,e.data,e.customType,e.translations,e.createdAt,e.updatedAt)):e.messageType===j.MESSAGE_TYPE_FILE?new x(x.build(e.reqId,e.messageId,e.sender,{url:e.channelUrl,channelType:e.channelType},e.url,e.name,e.type,e.size,e.data,e.customType,e.createdAt,e.thumbnails,e.requireAuth,e.updatedAt)):new P(P.build(e.messageId,{url:e.channelUrl,channelType:e.channelType},e.message,e.data,e.customType,e.translations,e.createdAt,e.updatedAt)):null}(n.lastMessage),read_receipt:n.cachedReadReceiptStatus,inviter:null!==n.inviter&&void 0!==n.inviter&&"object"==typeof n.inviter?F.build(n.inviter.userId,n.inviter.nickname,n.inviter.profileUrl,n.inviter.connectionStatus,n.inviter.lastSeenAt,n.inviter.metaData,n.inviter.isActive):null})},D.createMyGroupChannelListQuery=function(){return new K(X.getInstance().currentUser)},D.memberState={ALL:0,JOINED:1,INVITED:2},D.getChannelCount=function(e,n){return"function"==typeof e&&1===arguments.length&&(n=e,e=D.memberState.ALL),e!==D.memberState.ALL&&e!==D.memberState.JOINED&&e!==D.memberState.INVITED?void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n):X.getInstance().hasLoggedIn()?void $.getInstance().getGroupChannelCount(X.getInstance().getCurrentUserId(),e,function(e,t){if(t)return void S(null,t,n);var r=parseInt(e.group_channel_count);S(r,null,n)}):void(n&&S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),n))},D.getTotalUnreadMessageCount=function(e){$.getInstance().getTotalUnreadMessageCount(X.getInstance().getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);var r=parseInt(n.unread_count);S(r,null,e)})},D.getTotalUnreadChannelCount=function(e){$.getInstance().getTotalUnreadChannelCount(X.getInstance().getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);var r=parseInt(n.unread_count);S(r,null,e)})},D.createChannel=function(){var e=null,n=null,t=null,r=null,o=null,a=null,i=null;switch(arguments.length){case 2:e=arguments[0],n=!1,a=arguments[1];break;case 3:e=arguments[0],n=arguments[1],a=arguments[2];break;case 4:e=arguments[0],n=arguments[1],i=arguments[2],a=arguments[3];break;case 6:e=arguments[0],n=arguments[1],t=arguments[2],r=arguments[3],o=arguments[4],a=arguments[5];break;case 7:e=arguments[0],n=arguments[1],t=arguments[2],r=arguments[3],o=arguments[4],i=arguments[5],a=arguments[6]}if(!Array.isArray(e)||"boolean"!=typeof n||"string"!=typeof t&&null!==t&&void 0!==t||"string"!=typeof r&&h(r)&&null!==r&&void 0!==r||"string"!=typeof o&&null!==o&&void 0!==o||"string"!=typeof i&&null!==i&&void 0!==i)return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),a);var s=[];e.forEach(function(e){s.push(e.userId)}),D.createChannelWithUserIds(s,n,t,r,o,i,a)},D.createChannelWithUserIds=function(){var e=null,n=null,t=null,r=null,o=null,a=null,i=null;switch(arguments.length){case 2:e=arguments[0],n=!1,a=arguments[1];break;case 3:e=arguments[0],n=arguments[1],a=arguments[2];break;case 4:e=arguments[0],n=arguments[1],i=arguments[2],a=arguments[3];break;case 6:e=arguments[0],n=arguments[1],t=arguments[2],r=arguments[3],o=arguments[4],a=arguments[5];break;case 7:e=arguments[0],n=arguments[1],t=arguments[2],r=arguments[3],o=arguments[4],i=arguments[5],a=arguments[6]}if(!X.getInstance().hasLoggedIn())return void S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),a);if(!Array.isArray(e)||"boolean"!=typeof n||"string"!=typeof t&&null!==t&&void 0!==t||"string"!=typeof r&&h(r)&&null!==r&&void 0!==r||"string"!=typeof o&&null!==o&&void 0!==o||"string"!=typeof i&&null!==i&&void 0!==i)return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),a);var s=e.filter(function(e,n,t){return n==t.indexOf(e)}),c=X.getInstance().currentUser;s.push(c.userId),$.getInstance().createGroupChannel(s,n,t,r,o,i,function(e,n){if(n)return void S(null,n,a);var t=new D(e);D.cachedChannels[t.url]=t,S(t,null,a)})},D.cachedChannels={},D.clearCache=function(){D.cachedChannels={}},D.removeCachedChannel=function(e){delete D.cachedChannels[e]},D.upsert=function(e){var n=new D(e);return D.cachedChannels.hasOwnProperty(n.url)?D.cachedChannels[n.url].update(e):D.cachedChannels[n.url]=n,D.cachedChannels[n.url]},D.getChannelWithoutCache=function(e,n){if(!e)return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n);$.getInstance().getGroupChannel(e,!0,!0,function(e,t){if(t)return void S(null,t,n);var r=D.upsert(e);S(r,null,n)})},D.getChannel=function(e,n){if(!e)return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n);D.cachedChannels.hasOwnProperty(e)?S(D.cachedChannels[e],null,n):D.getChannelWithoutCache(e,n)},D.markAsReadAllLastSentAt,D.markAsReadAll=function(e){var n=(new Date).getTime();if(n-D.markAsReadAllLastSentAt<1e3)return void S(null,new g("MarkAsRead rate limit exceeded.",J.MARK_AS_READ_RATE_LIMIT_EXCEEDED),e);D.markAsReadAllLastSentAt=n,$.getInstance().groupChannelMarkAsReadAll(X.getInstance().getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);for(var r in D.cachedChannels)D.cachedChannels[r].unreadMessageCount=0;S(null,null,e)})};var M=function(e){e&&(this.category=e.hasOwnProperty("cat")?parseInt(e.cat):0,this.data=e.hasOwnProperty("data")?e.data:null,this.channelUrl=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.channelType=e.hasOwnProperty("channel_type")?String(e.channel_type):L.CHANNEL_TYPE_GROUP),this.isGroupChannel=function(){return this.channelType==L.CHANNEL_TYPE_GROUP},this.isOpenChannel=function(){return this.channelType==L.CHANNEL_TYPE_OPEN}};M.CATEGORY_NONE=0,M.CATEGORY_CHANNEL_ENTER=10102,M.CATEGORY_CHANNEL_EXIT=10103,M.CATEGORY_USER_CHANNEL_MUTE=10201,M.CATEGORY_USER_CHANNEL_UNMUTE=10200,M.CATEGORY_USER_CHANNEL_BAN=10601,M.CATEGORY_USER_CHANNEL_UNBAN=10600,M.CATEGORY_CHANNEL_FREEZE=10701,M.CATEGORY_CHANNEL_UNFREEZE=10700,M.CATEGORY_TYPING_START=10900,M.CATEGORY_TYPING_END=10901,M.CATEGORY_CHANNEL_JOIN=1e4,M.CATEGORY_CHANNEL_LEAVE=10001,M.CATEGORY_CHANNEL_INVITE=10020,M.CATEGORY_CHANNEL_DECLINE_INVITE=10022,M.CATEGORY_CHANNEL_PROP_CHANGED=11e3,M.CATEGORY_CHANNEL_DELETED=12e3,M.CATEGORY_CHANNEL_META_DATA_CHANGED=11100,M.CATEGORY_CHANNEL_META_COUNTERS_CHANGED=11200,M.CATEGORY_CHANNEL_HIDE=13e3;var H=function(e){e&&(this.category=e.hasOwnProperty("cat")?parseInt(e.cat):0)};H.CATEGORY_USER_BLOCK=20001,H.CATEGORY_USER_UNBLOCK=2e4;var G=function(e){e&&(this.reader=new F(e.user),this.timestamp=parseInt(e.ts),this.channelUrl=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.channelType=e.hasOwnProperty("channel_type")?String(e.channel_type):L.CHANNEL_TYPE_GROUP)},F=function(e){this.nickname="",this.profileUrl="",this.userId="",this.connectionStatus="",this.lastSeenAt=null,this.metaData={},this.isActive=!0,this._update=function(e){e.hasOwnProperty("guest_id")&&(this.userId=String(e.guest_id)),e.hasOwnProperty("user_id")&&(this.userId=String(e.user_id)),e.hasOwnProperty("name")&&(this.nickname=String(e.name)),e.hasOwnProperty("nickname")&&(this.nickname=String(e.nickname)),e.hasOwnProperty("image")&&(this.profileUrl=String(e.image)),e.hasOwnProperty("profile_url")&&(this.profileUrl=String(e.profile_url)),e.hasOwnProperty("is_online")?e.is_online===F.NON_AVAILABLE?this.connectionStatus=F.NON_AVAILABLE:this.connectionStatus=e.is_online?F.ONLINE:F.OFFLINE:this.connectionStatus=F.NON_AVAILABLE,e.hasOwnProperty("last_seen_at")?this.lastSeenAt=parseInt(e.last_seen_at):this.lastSeenAt=0,e.hasOwnProperty("metadata")?this.metaData=e.metadata:this.metaData={},e.hasOwnProperty("is_active")?this.isActive=void 0===e.is_active||e.is_active:this.isActive=!0},this._updateMetaData=function(e,n){var t=this,r=Object.keys(e);n?r.forEach(function(e){delete t.metaData[e]}):r.forEach(function(n){t.metaData[n]=e[n]})},this.createMetaData=function(e,n){var t=this;return"function"==typeof e&&1===arguments.length&&(n=e,e={}),"object"!=typeof e||h(e)||Array.isArray(e)?void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),n):X.getInstance().hasLoggedIn()?void $.getInstance().createUserMetaData(t.userId,e,function(e,r){if(r)return void S(null,r,n);t._updateMetaData(e),S(e,null,n)}):void(n&&S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),n))},this.updateMetaData=function(e,n,t){var r=this;return"function"==typeof e&&1===arguments.length&&(t=e,e={}),"function"==typeof n&&2===arguments.length&&(t=n,n=!1),"object"!=typeof e||h(e)||Array.isArray(e)||"boolean"!=typeof n?void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),t):X.getInstance().hasLoggedIn()?void $.getInstance().updateUserMetaData(r.userId,e,n,function(e,n){if(n)return void S(null,n,t);r._updateMetaData(e),S(e,null,t)}):void(t&&S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),t))},this.deleteAllMetaData=function(e){var n=this,t=n.metaData;if(!X.getInstance().hasLoggedIn())return void(e&&S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),e));$.getInstance().deleteAllUserMetaData(n.userId,function(r,o){if(o)return void S(null,o,e);n._updateMetaData(t,!0),S(r,null,e)})},this.deleteMetaData=function(e,n){var t=this;if("function"==typeof e&&1===arguments.length&&(n=e,e=null),"string"!=typeof e)return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),n);if(!X.getInstance().hasLoggedIn())return void(n&&S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),n));var r={};r[e]="",$.getInstance().deleteUserMetaData(t.userId,e,function(e,o){if(o)return void S(null,o,n);t._updateMetaData(r,!0),S(e,null,n)})},this.serialize=function(){var e=JSON.parse(JSON.stringify(this));return b(e)},e&&this._update(e)};F.NON_AVAILABLE="nonavailable",F.ONLINE="online",F.OFFLINE="offline",F.build=function(e,n,t,r,o,a,i){return{user_id:e,nickname:n,profile_url:t,is_online:r,last_seen_at:o,metadata:a,is_active:i}},F.buildFromSerializedData=function(e){var n=_(e);return new F(F.build(n.userId,n.nickname,n.profileUrl,n.connectionStatus,n.lastSeenAt,n.metaData,n.isActive))};var B=function(e){this.state="",this.isBlockedByMe=!1,this.isBlockingMe=!1,this.parse=function(e){this.state=e.state,e.hasOwnProperty("is_blocked_by_me")&&(this.isBlockedByMe=e.is_blocked_by_me),e.hasOwnProperty("is_blocking_me")&&(this.isBlockingMe=e.is_blocking_me)},e&&(this._update(e),this.parse(e))};m(F,B),B.JOINED="joined",B.INVITED="invited",B.build=function(e,n,t,r){var o=e;return o.state=n,o.is_blocked_by_me=t,o.is_blocking_me=r,o},B.buildFromSerializedData=function(e){var n=_(e);return new B(B.build(F.build(n.userId,n.nickname,n.profileUrl,n.connectionStatus,n.lastSeenAt,n.metaData,n.isActive),n.state,n.isBlockedByMe,n.isBlockingMe))};var V=function(e,n,t){this.isAckRequired=function(){return"MESG"==this.command||"FILE"==this.command||"ENTR"==this.command||"EXIT"==this.command||"READ"==this.command||"MEDI"==this.command||"FEDI"==this.command},this.encode=function(){return this.command+this.payload+"\n"},this.decode=function(e){e=e.trim(),this.command=e.substring(0,4),this.payload=e.substring(4)},this.getJsonElement=function(){return JSON.parse(this.payload)},this.isRequestIdCommand=function(){return this.isAckRequired()||"EROR"==this.command},this.command,this.payload,this.requestId;var r=this;if(0!=arguments.length){var o;switch(arguments.length){case 1:var a=arguments[0];if(!a||a.length<=4)return r.command="NOOP",void(r.payload="{}");if(a=a.trim(),r.command=a.substring(0,4),r.payload=a.substring(4),r.isRequestIdCommand()){var i=r.getJsonElement();i&&(r.requestId=i.hasOwnProperty("req_id")?i.req_id:"")}break;case 3:o=arguments[2];case 2:var s=arguments[0],c=arguments[1];o=o||"",r.command=s,r.requestId=o,r.requestId||r.isRequestIdCommand()&&(r.requestId=V.generateRequestId()),c.req_id=r.requestId,r.payload=JSON.stringify(c)}}};V.bMessage=function(e,n,t,r,o,a){var i={};i.channel_url=e,i.message=n,i.data=t,i.mentioned=[];for(var s in o){var c=o[s];i.mentioned.push(String(c))}return r&&(i.custom_type=r),a.length>0&&(i.target_langs=a),new V("MESG",i)},V.bRead=function(e){var n={};return n.channel_url=e,new V("READ",n)},V.bTypeStart=function(e,n){var t={};return t.channel_url=e,t.time=n,new V("TPST",t)},V.bTypeEnd=function(e,n){var t={};return t.channel_url=e,t.time=n,new V("TPEN",t)},V.bFile=function(e,n,t,r,o,a,i,s,c,u){var l={};return l.channel_url=n,l.url=t,l.name=r||"",l.type=o||"",l.size=a||0,l.custom=i,s&&(l.custom_type=s),c&&(l.thumbnails=c),u&&(l.require_auth=u),new V("FILE",l,e)},V.bPing=function(){var e={};return e.id=(new Date).getTime(),new V("PING",e)},V.bEnter=function(e){var n={};return n.channel_url=e,new V("ENTR",n)},V.bExit=function(e){var n={};return n.channel_url=e,new V("EXIT",n)},V.bUpdateUserMessage=function(e,n,t,r,o){var a={};return a.channel_url=e,a.msg_id=n,null!=t&&void 0!=t&&(a.message=t),null!=r&&void 0!=r&&(a.data=r),null!=o&&void 0!=o&&(a.custom_type=o),new V("MEDI",a)},V.bUpdateFileMessage=function(e,n,t,r){var o={};return o.channel_url=e,o.msg_id=n,null!=t&&void 0!=t&&(o.data=t),null!=r&&void 0!=r&&(o.custom_type=r),new V("FEDI",o)},V.requestIdSeed=(new Date).getTime(),V.generateRequestId=function(){return V.requestIdSeed++,String(V.requestIdSeed)};var K=function(e){this.isLoading=!1,this.hasNext=!0,this.limit=20,this.includeEmpty=!1,this.order=K.ORDER_LATEST_LAST_MESSAGE,this.userIdsFilter=[],this.userIdsFilterExactMatch=!1,this.queryType="AND",this.nicknameContainsFilter="",this.channelNameContainsFilter="",this.memberStateFilter=K.MEMBER_STATE_ALL,this.customTypeFilter="";var n=e,t="",r=this;this.next=function(e){return r.hasNext?r.isLoading?void S(null,new g("Query in progress.",J.QUERY_IN_PROGRESS),e):(null!==r.nicknameContainsFilter&&void 0!==r.nicknameContainsFilter||(r.nicknameContainsFilter=""),null!==r.channelNameContainsFilter&&void 0!==r.channelNameContainsFilter||(r.channelNameContainsFilter=""),r.memberStateFilter===D.memberState.JOINED?r.memberStateFilter=K.MEMBER_STATE_JOINED_ONLY:r.memberStateFilter===D.memberState.INVITED?r.memberStateFilter=K.MEMBER_STATE_INVITED_ONLY:r.memberStateFilter===D.memberState.ALL&&(r.memberStateFilter=K.MEMBER_STATE_ALL),!p(r.limit)||!Array.isArray(r.userIdsFilter)||"boolean"!=typeof r.userIdsFilterExactMatch||"string"!=typeof r.customTypeFilter||"string"!=typeof r.queryType||["AND","OR"].indexOf(r.queryType.toUpperCase())<0||"string"!=typeof r.order||[K.ORDER_CHRONOLOGICAL,K.ORDER_LATEST_LAST_MESSAGE].indexOf(r.order.toLowerCase())<0||"string"!=typeof r.memberStateFilter||[K.MEMBER_STATE_INVITED_ONLY,K.MEMBER_STATE_JOINED_ONLY,K.MEMBER_STATE_ALL].indexOf(r.memberStateFilter.toLowerCase())<0||"string"!=typeof r.nicknameContainsFilter||"string"!=typeof r.channelNameContainsFilter?void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),e):(r.isLoading=!0,void $.getInstance().loadUserGroupChannelList(n.userId,t,r.limit,r.includeEmpty,r.order,r.userIdsFilter,r.userIdsFilterExactMatch,r.nicknameContainsFilter,r.queryType,r.memberStateFilter,r.channelNameContainsFilter,r.customTypeFilter,function(n,o){if(o)return r.isLoading=!1,void S(null,o,e);var a=n;(!(t=String(a.next))||t.length<=0)&&(r.hasNext=!1);var i=a.channels,s=[];for(var c in i){var u=D.upsert(i[c]);s.push(u)}r.isLoading=!1,S(s,null,e)}))):void S([],null,e)}};K.ORDER_LATEST_LAST_MESSAGE="latest_last_message",K.ORDER_CHRONOLOGICAL="chronological",K.MEMBER_STATE_INVITED_ONLY="invited_only",K.MEMBER_STATE_JOINED_ONLY="joined_only",K.MEMBER_STATE_ALL="all";var z=function(e){this.isLoading=!1;var n=e,t=this;this.next=function(e,r,o,a){if(t.isLoading)return void S(null,new g("Query in progress.",J.QUERY_IN_PROGRESS),a);if(4!==arguments.length){if("function"!=typeof a){var i=Array.prototype.slice.call(arguments);"function"==typeof i.slice(-1)[0]&&(a=i.pop())}return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),a)}if(!p(e)||!p(r)||"boolean"!=typeof o)return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),a);t.isLoading=!0,$.getInstance().messageList(n.isOpenChannel(),n.url,e,0,r,!1,o,"","",function(e,r){if(r)return t.isLoading=!1,void S(null,r,a);var o=e.messages,i=[];for(var s in o){var c=j.build(o[s],n);c&&i.push(c)}t.isLoading=!1,S(i,null,a)})},this.prev=function(e,r,o,a){if(t.isLoading)return void S(null,new g("Query in progress.",J.QUERY_IN_PROGRESS),a);if(4!==arguments.length){if("function"!=typeof a){var i=Array.prototype.slice.call(arguments);"function"==typeof i.slice(-1)[0]&&(a=i.pop())}return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),a)}if(!p(e)||!p(r)||"boolean"!=typeof o)return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),a);t.isLoading=!0,$.getInstance().messageList(n.isOpenChannel(),n.url,e,r,0,!1,o,"","",function(e,r){if(r)return t.isLoading=!1,void S(null,r,a);var o=e.messages,i=[];for(var s in o){var c=j.build(o[s],n);c&&i.push(c)}t.isLoading=!1,S(i,null,a)})},this.load=function(e,r,o,a,i){if(t.isLoading)return void S(null,new g("Query in progress.",J.QUERY_IN_PROGRESS),i);if(5!==arguments.length){if("function"!=typeof i){var s=Array.prototype.slice.call(arguments);"function"==typeof s.slice(-1)[0]&&(i=s.pop())}return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),i)}if(!p(e)||!p(r)||!p(o)||"boolean"!=typeof a)return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),i);t.isLoading=!0,$.getInstance().messageList(n.isOpenChannel(),n.url,e,r,o,!0,a,"","",function(e,r){if(r)return t.isLoading=!1,void S(null,r,i);var o=e.messages,a=[];for(var s in o){var c=j.build(o[s],n);c&&a.push(c)}t.isLoading=!1,S(a,null,i)})}},Y=function(){var e="";this.limit=20,this.isLoading=!1,this.hasNext=!0,this.nameKeyword=null,this.urlKeyword=null,this.customType=null;var n=this;this.next=function(t){return this.hasNext?this.isLoading?void S(null,new g("Query in progress.",J.QUERY_IN_PROGRESS),t):"string"!=typeof n.nameKeyword&&null!==n.nameKeyword||"string"!=typeof n.urlKeyword&&null!==n.urlKeyword||"string"!=typeof n.customType&&null!==n.customType||!p(n.limit)?void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),t):(n.isLoading=!0,void $.getInstance().loadOpenChannelList(e,n.limit,n.nameKeyword,n.urlKeyword,n.customType,function(r,o){if(o)return n.isLoading=!1,void S(null,o,t);var a=r;try{e=String(a.next)}catch(n){e=""}e||(n.hasNext=!1);var i=a.channels,s=[];i.forEach(function(e){var n=k.upsert(e);s.push(n)}),n.isLoading=!1,S(s,null,t)})):void S([],null,t)}},q=function(e){var n=e,t=0x8000000000000000;this.hasMore=!0,this.isLoading=!1;var r=this;this.load=function(e,o,a,i){if(3!==arguments.length&&4!==arguments.length){if("function"!=typeof i){var s=Array.prototype.slice.call(arguments);"function"==typeof s.slice(-1)[0]&&(i=s.pop())}return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),i)}if("function"==typeof a&&(i=a,a=""),a.toString().toLowerCase()===j.MESSAGE_TYPE_ADMIN||a===v.MessageTypeFilter.ADMIN?a="ADMM":a.toString().toLowerCase()===j.MESSAGE_TYPE_USER||a===v.MessageTypeFilter.USER?a="MESG":a.toString().toLowerCase()===j.MESSAGE_TYPE_FILE||a===v.MessageTypeFilter.FILE?a="FILE":null!==a&&void 0!==a&&a!==v.MessageTypeFilter.ALL||(a=""),!p(e)||"boolean"!=typeof o||"string"!=typeof a)return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),i);if(r.hasMore){if(r.isLoading)return void S(null,new g("Query in progress.",J.QUERY_IN_PROGRESS),i);r.isLoading=!0,$.getInstance().messageList(n.isOpenChannel(),n.url,t,e,0,!1,o,a,"",function(o,a){if(a)return r.isLoading=!1,void S(null,a,i);var s=o.messages,c=[];for(var u in s){var l=j.build(s[u],n);l&&(c.push(l),l.createdAt<=t&&(t=l.createdAt))}(c.length<=0||c.length<e)&&(r.hasMore=!1),r.isLoading=!1,S(c,null,i)})}}},W=function(e,n){var t,r,o,a="";this.hasNext=!0,this.limit=20,this.isLoading=!1,this.userIds=[],this.metaDataKey="",this.metaDataValues=[];var i=this;switch(n&&(r=n),t=e){case W.ALL_USER:case W.BLOCKED_USER:o="users";break;case W.FILTERED_USER:this.userIds=n,o="users";break;case W.PARTICIPANT:o="participants";break;case W.MUTED_USER:o="muted_list";break;case W.BANNED_USER:o="banned_list"}this.next=function(n){if(!i.hasNext)return void S([],null,n);if(!X.getInstance().hasLoggedIn())return void(n&&S(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED),n));if(i.isLoading)return void S(null,new g("Query in progress.",J.QUERY_IN_PROGRESS),n);if(!p(i.limit)||!Array.isArray(i.userIds)||"string"!=typeof i.metaDataKey||!Array.isArray(i.metaDataValues)||i.metaDataKey&&h(i.metaDataValues)||!i.metaDataKey&&!h(i.metaDataValues))return void S(null,new g("Invalid parameter.",J.INVALID_PARAMETER),n);i.isLoading=!0;var s=function(t,r){if(r)return i.isLoading=!1,void S(null,r,n);(a=t.next)||(i.hasNext=!1);var s=t[o],c=[];for(var u in s)e==W.BANNED_USER?c.push(new F(s[u].user)):c.push(new F(s[u]));i.isLoading=!1,S(c,null,n)};switch(t){case W.ALL_USER:$.getInstance().loadUserList(a,i.limit,[],i.metaDataKey,i.metaDataValues,s);break;case W.FILTERED_USER:$.getInstance().loadUserList(a,i.limit,i.userIds,i.metaDataKey,i.metaDataValues,s);break;case W.BLOCKED_USER:$.getInstance().loadBlockedUserList(X.getInstance().getCurrentUserId(),a,i.limit,s);break;case W.PARTICIPANT:$.getInstance().loadOpenChannelParticipantList(r.url,a,i.limit,s);break;case W.MUTED_USER:$.getInstance().loadOpenChannelMutedList(r.url,a,i.limit,s);break;case W.BANNED_USER:$.getInstance().loadOpenChannelBanList(r.url,a,i.limit,s)}}};W.ALL_USER="alluser",W.FILTERED_USER="filtereduser",W.BLOCKED_USER="blockeduser",W.PARTICIPANT="participant",W.MUTED_USER="muteduser",W.BANNED_USER="banneduser";var J=function(){};J.INVALID_INITIALIZATION=800100,J.CONNECTION_REQUIRED=800101,J.INVALID_PARAMETER=800110,J.NETWORK_ERROR=800120,J.NETWORK_ROUTING_ERROR=800121,J.MALFORMED_DATA=800130,J.MALFORMED_ERROR_DATA=800140,J.WRONG_CHANNEL_TYPE=800150,J.MARK_AS_READ_RATE_LIMIT_EXCEEDED=800160,J.QUERY_IN_PROGRESS=800170,J.ACK_TIMEOUT=800180,J.LOGIN_TIMEOUT=800190,J.WEBSOCKET_CONNECTION_CLOSED=800200,J.WEBSOCKET_CONNECTION_FAILED=800210,J.REQUEST_FAILED=800220,J.FILE_UPLOAD_CANCEL_FAILED=800230,J.REQUEST_CANCELLED=800240;var Q=function(n){var a,i,c=!1,u=0;n||(n=new Q.WSClientHandler);var l=function(){u=(new Date).getTime()};this.getConnectionState=function(){return 1==a.readyState?X.getInstance().connectionState.OPEN:X.getInstance().connectionState.CLOSED};var d=function(){var e,r;this.ping=function(){o&&t.log("PING"),clearTimeout(e),clearTimeout(r),e=setTimeout(function(){var a=V.bPing();X.getInstance().wsClient.send(a),r=setTimeout(function(){o&&t.log("PING Timeout"),clearTimeout(e),clearTimeout(r),n.onError()},5e3)},15e3)},this.stop=function(){clearTimeout(e),clearTimeout(r)}},f=new d;this.connect=function(u,d,h){o&&t.log("WSClient connect called"),i=h;var p=null,m=!1;try{p="undefined"==typeof WebSocket?r("./node_modules/websocket/lib/browser.js").w3cwebsocket:WebSocket}catch(e){p=WebSocket}try{var g="/?p=JS&pv="+encodeURIComponent(s)+"&sv="+encodeURIComponent("3.0.48")+"&ai="+encodeURIComponent(R);if($.getInstance().sessionKey?g+="&key="+encodeURIComponent($.getInstance().sessionKey):g+="&user_id="+encodeURIComponent(u)+"&access_token="+encodeURIComponent(d),!(a=new p(i+g)))return void n.onError(e)}catch(e){return void n.onError(e)}if(o)try{window.ws=a}catch(e){}a.onopen=function(e){f&&f.ping(),o&&t.log("WSClient onopen called"),n.onOpen(e)},a.onmessage=function(e){l();var r=e.data.split("\n");for(var a in r){var i=r[a];if(i&&"string"==typeof i){try{if("PONG"==i.substring(0,4)){f&&f.ping();continue}}catch(e){o&&t.log("ws.onmessage-command check error: ",e)}n.onMessage(i)}}},a.onclose=function(e){o&&t.log("WSClient ws.onclose called - e, explicitDisconnect: ",e,c),f&&f.stop(),c?n.onClose(e):m||n.onError(e),c=!1},a.onerror=function(e){o&&t.log("WSClient ws.onerror called: ",e),f&&f.stop(),m=!0,n.onError(e)}},this.disconnect=function(e,r){o&&t.log("WSClient disconnect called [explicit]: ",e),f&&f.stop(),f=null,c=1==e,a&&(a.onopen=function(){},a.onmessage=function(){},a.onclose=function(){r&&r()},a.onerror=function(){},a.close(),a=null),c?n.onClose():n.onError(),c=!1},this.send=function(e,n){1!=a.readyState?n&&n(null,new g("Connection is not valid. Please reconnect.",J.WEBSOCKET_CONNECTION_CLOSED)):(a.send(e.encode()),n&&n(null,null))}};Q.WSClientHandler=function(){this.onReady=function(){},this.onOpen=function(){},this.onClose=function(){},this.onMessage=function(){},this.onError=function(){}};var $=function(){var e=$.getInstance();if(e)return e;this.sessionKey;var n=0;this.getMessageChangeLogsByToken=function(e,n,t,r){var o="";o=e?$.API_OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(n)):$.API_GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(n));var a={};t&&(a.token=t),s(o,a,r)},this.setChannelInvitationPreference=function(e,n,t){var r=$.API_USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(e));d(r,{auto_accept:n},t)},this.getChannelInvitationPreference=function(e,n){var t=$.API_USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(e));s(t,n)},this.getGroupChannelCount=function(e,n,t){var r=$.API_USERS_USERID_GROUP_CHANNEL_COUNT.replace("%s",encodeURIComponent(e)),o="";o=n===D.memberState.JOINED?"joined":n===D.memberState.INVITED?"invited":"all",s(r,{state:o},t)},this.getTotalUnreadMessageCount=function(e,n){var t=$.API_USERS_USERID_UNREAD_MESSAGE_COUNT.replace("%s",encodeURIComponent(e));s(t,n)},this.getTotalUnreadChannelCount=function(e,n){var t=$.API_USERS_USERID_UNREAD_CHANNEL_COUNT.replace("%s",encodeURIComponent(e));s(t,n)},this.checkRouting=function(e){if(X.getInstance()&&X.getInstance().customApiHost&&X.getInstance().customWsHost)"function"==typeof e&&e({API_HOST:X.getInstance().customApiHost,WS_HOST:X.getInstance().customWsHost});else{var t=(new Date).getTime()/1e3;0==n||n-t>300?A($.API_ROUTING_URL.replace("%s",R),{},"GET",{SendBird:u+R},function(r,o){if(o)return void e(null,new g("Server is unreachable.",J.NETWORK_ROUTING_ERROR));a=r.ws_server,i=r.api_server,n=t,"function"==typeof e&&e({API_HOST:i,WS_HOST:a})}):e({API_HOST:X.getInstance().getCurrentApiHost(),WS_HOST:X.getInstance().getCurrentWsHost()},null)}};var t=function(e,n,t,r,o,a,i,s,l,d){if(!X.getInstance().hasLoggedIn())return void(i&&i(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED)));$.getInstance().checkRouting(function(n,h){if(h)i(null,new g("Request failed.",J.REQUEST_FAILED));else{var p=O();p.open("POST",n.API_HOST+e,!0),p.setRequestHeader("SendBird",u+R),p.setRequestHeader("Session-Key",$.getInstance().sessionKey);var m=c?new c:new FormData;r&&"undefined"!=typeof Blob?m.append("file",new Blob([t],{type:r}),t.name):m.append("file",t,t.name),a&&m.append("channel_url",a);for(var v in o){var b=parseInt(v)+1;m.append("thumbnail"+b,o[v].maxWidth+","+o[v].maxHeight)}p.onload=function(){l&&l[d]&&delete l[d],p.status>=200&&p.status<400?f(null,JSON.parse(p.responseText),i):f({status:p.status,statusText:p.statusText,response:p.responseText},null,i)},p.onerror=function(e){l&&l[d]&&delete l[d],i(null,new g(p.statusText,J.REQUEST_FAILED))},p.onabort=function(e){l&&l[d]&&delete l[d],i(null,new g("File upload has been cancelled.",J.REQUEST_CANCELLED))},p.upload.onprogress=function(e){e.lengthComputable&&e.loaded>=e.total&&l&&l[d]&&delete l[d],s&&s(e)},m.oldIE?(p.setRequestHeader("Content-Type","multipart/form-data; boundary="+m.boundary),p.send(m.toString())):p.send(m),l&&(l[d]=p)}})},r=function(e,n,t){if("function"==typeof n&&(t=n,n={}),!X.getInstance().hasLoggedIn())return void(t&&t(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED)));$.getInstance().checkRouting(function(r,o){o?t(null,new g("Request failed.",J.REQUEST_FAILED)):A(r.API_HOST+e,n,"DELETE",{"Session-Key":$.getInstance().sessionKey,SendBird:u+R},t)})},o=function(e){var n="";for(var t in e)e.hasOwnProperty(t)&&(n+=encodeURIComponent(e[t])+",");return n.length>1&&(n=n.substring(0,n.length-1)),n},s=function(e,n,t){if("function"==typeof n&&(t=n,n={}),!X.getInstance().hasLoggedIn())return void(t&&t(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED)));var r,o="";if(n){for(var a in n)""!=o&&(o+="&"),o+=a+"="+n[a];r=e+"?"+o}else r=e;$.getInstance().checkRouting(function(e,o){o?t(null,new g("Request failed.",J.REQUEST_FAILED)):A(e.API_HOST+r,n,"GET",{"Session-Key":$.getInstance().sessionKey,SendBird:u+R},t)})},l=function(e,n,t){if("function"==typeof n&&(t=n,n={}),!X.getInstance().hasLoggedIn())return void(t&&t(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED)));$.getInstance().checkRouting(function(r,o){o?t(null,o):A(r.API_HOST+e,n,"POST",{"Session-Key":$.getInstance().sessionKey,SendBird:u+R},t)})},d=function(e,n,t){if("function"==typeof n&&(t=n,n={}),!X.getInstance().hasLoggedIn())return void(t&&t(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED)));$.getInstance().checkRouting(function(r,o){o||A(r.API_HOST+e,n,"PUT",{"Session-Key":$.getInstance().sessionKey,SendBird:u+R},t)})};this.createUserMetaData=function(e,n,t){var r=$.API_USERS_USERID_METADATA.replace("%s",encodeURIComponent(e)),o={};o.metadata=n,l(r,o,t)},this.updateUserMetaData=function(e,n,t,r){var o=$.API_USERS_USERID_METADATA.replace("%s",encodeURIComponent(e)),a={};a.metadata=n,a.upsert=t,d(o,a,r)},this.deleteAllUserMetaData=function(e,n){var t=$.API_USERS_USERID_METADATA.replace("%s",encodeURIComponent(e));r(t,{},n)},this.deleteUserMetaData=function(e,n,t){var o=$.API_USERS_USERID_METADATA_KEY.replace("%s",encodeURIComponent(e)).replace("%s",encodeURIComponent(n));r(o,{},t)},this.resetMyHistory=function(e,n){var t=$.API_GROUPCHANNELS_RESET_USER_HISTORY.replace("%s",encodeURIComponent(e));d(t,{},n)},this.groupChannelInvite=function(e,n,t){var r=$.API_GROUPCHANNELS_CHANNELURL_INVITE.replace("%s",encodeURIComponent(e)),o={},a=[];try{Array.isArray(n)?a=n:a.push(n)}catch(e){t(null,new g("Invalid parameter.",J.INVALID_PARAMETER))}o.user_ids=a,l(r,o,t)},this.acceptInvitation=function(e,n,t){var r=$.API_GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION.replace("%s",encodeURIComponent(e)),o={};o.user_id=n,d(r,o,t)},this.declineInvitation=function(e,n,t){var r=$.API_GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION.replace("%s",encodeURIComponent(e)),o={};o.user_id=n,d(r,o,t)},this.groupChannelHide=function(e,n,t,r){var o=$.API_GROUPCHANNELS_CHANNELURL_HIDE.replace("%s",encodeURIComponent(e)),a={};a.user_id=n,a.hide_previous_messages=t,d(o,a,r)},this.groupChannelLeave=function(e,n,t){var r=$.API_GROUPCHANNELS_CHANNELURL_LEAVE.replace("%s",encodeURIComponent(e)),o={};o.user_id=n,d(r,o,t)},this.groupChannelMarkAsRead=function(e,n,t){var r=$.API_GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASREAD.replace("%s",encodeURIComponent(e)),o={};o.user_id=n,d(r,o,t)},this.groupChannelMarkAsReadAll=function(e,n){var t=$.API_USERS_USERID_MARKASREADALL.replace("%s",encodeURIComponent(e));d(t,{},n)},this.messageList=function(e,n,t,r,o,a,i,c,u,l){var d;d=e?String($.API_OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",n)):String($.API_GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",n));var f={};f.is_sdk=String(!0),f.message_ts=String(t),f.prev_limit=String(r),f.next_limit=String(o),f.include=String(a),f.reverse=String(i),c&&(f.message_type=String(c)),u&&(f.custom_type=String(u)),s(d,f,l)},this.messageListByID=function(e,n,t,r,o,a,i,c,u,l){var d;d=e?String($.API_OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",n)):String($.API_GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",n));var f={};f.is_sdk=String(!0),f.message_id=t,f.prev_limit=String(r),f.next_limit=String(o),f.include=String(a),f.reverse=String(i),c&&(f.message_type=String(c)),u&&(f.custom_type=String(u)),s(d,f,l)},this.login=function(e,n,t){var r=$.API_USERS_USERID_LOGIN.replace("%s",encodeURIComponent(e)),o={};o.app_id=R,n&&(o.access_token=n),l(r,o,function(e,n){n?t(null,n):($.getInstance().sessionKey=e.key,$.getInstance().ekey=e.ekey,t(e,n))})},this.updateUserInfo=function(e,n,t,r){var o={};n&&(o.nickname=n),t&&(o.profile_url=t);var a=String($.API_USERS_USERID).replace("%s",encodeURIComponent(e));d(a,o,r)},this.getGroupChannel=function(e,n,t,r){var o=$.API_GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(e)),a={member:String(n),read_receipt:String(t)};s(o,a,r)},this.getOpenChannel=function(e,n){var t=$.API_OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(e));s(t,n)},this.createGroupChannel=function(e,n,t,r,o,a,i){var s=$.API_GROUPCHANNELS,u=[];"string"==typeof e?u.push(e):e.forEach(function(e){u.push(e)});var d;r&&"string"!=typeof r?(d=c?new c:new FormData,r&&d.append("cover_file",r,r.name),d.append("user_ids",u),d.append("is_distinct",n),null!==t&&"string"==typeof t&&d.append("name",t),o&&d.append("data",o),a&&d.append("custom_type",a)):(d={},null!==r&&"string"==typeof r&&(d.cover_url=r),d.user_ids=u,d.is_distinct=n,null!==t&&"string"==typeof t&&(d.name=t),o&&(d.data=o),a&&(d.custom_type=a)),l(s,d,i)},this.createOpenChannel=function(e,n,t,r,o,a){var i,s=String($.API_OPENCHANNELS);n&&"string"!=typeof n?(i=c?new c:new FormData,n&&i.append("cover_file",n,n.name),null!==e&&"string"==typeof e&&i.append("name",e),t&&i.append("data",t),r&&(Array.isArray(r)?i.append("operators",r):i.append("operators",[r])),o&&i.append("custom_type",o)):(i={},null!==n&&"string"==typeof n&&(i.cover_url=n),null!==e&&"string"==typeof e&&(i.name=e),t&&(i.data=t),r&&(Array.isArray(r)?i.operators=r:i.operators=[r]),o&&(i.custom_type=o)),l(s,i,a)},this.updateGroupChannel=function(e,n,t,r,o,a,i){var s,u=String($.API_GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(e)));r&&"string"!=typeof r?(s=c?new c:new FormData,s.append("is_distinct",n),r&&s.append("cover_file",r,r.name),null!==t&&"string"==typeof t&&s.append("name",t),null!==o&&"string"==typeof o&&s.append("data",o),null!==a&&"string"==typeof a&&s.append("custom_type",a)):(s={},s.is_distinct=n,null!==r&&"string"==typeof r&&(s.cover_url=r),null!==t&&"string"==typeof t&&(s.name=t),null!==o&&"string"==typeof o&&(s.data=o),null!==a&&"string"==typeof a&&(s.custom_type=a)),d(u,s,i)},this.updateOpenChannel=function(e,n,t,r,o,a,i){var s,u=String($.API_OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(e)));t&&"string"!=typeof t?(s=c?new c:new FormData,t&&s.append("cover_file",t,t.name),null!==n&&"string"==typeof n&&s.append("name",n),null!==r&&"string"==typeof r&&s.append("data",r),null!==o&&(Array.isArray(o)?s.append("operators",o):s.append("operators",[o])),null!==a&&"string"==typeof a&&s.append("custom_type",a)):(s={},null!==t&&"string"==typeof t&&(s.cover_url=t),null!==n&&"string"==typeof n&&(s.name=n),null!==r&&"string"==typeof r&&(s.data=r),null!==o&&(Array.isArray(o)?s.operators=o:s.operators=[o]),null!==a&&"string"==typeof a&&(s.custom_type=a)),d(u,s,i)},this.deleteOpenChannel=function(e,n){var t=String($.API_OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(e)));r(t,{},n)},this.createMetaCounters=function(e,n,t,r){var o;o=e?$.API_OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(n)):$.API_GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(n));var a={};a.metacounter=t,l(o,a,r)},this.updateMetaCounters=function(e,n,t,r,o,a){var i;i=e?$.API_OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(n)):$.API_GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(n));var s={};switch(s.metacounter=t,s.upsert=r,o){case $.UPDATE_META_COUNTER_MODE_SET:s.mode="set";break;case $.UPDATE_META_COUNTER_MODE_INC:s.mode="increase";break;case $.UPDATE_META_COUNTER_MODE_DEC:s.mode="decrease"}d(i,s,a)},this.getAllMetaCounters=function(e,n,t){this.getMetaCounters(e,n,{},t)},this.getMetaCounters=function(e,n,t,r){var a;a=e?$.API_OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(n)):$.API_GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(n));var i=o(t);s(a,{keys:i},r)},this.deleteMetaCounter=function(e,n,t,o){var a="";a=e?$.API_OPENCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(n)).replace("%s",t):$.API_GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(n)).replace("%s",t),r(a,{},o)},this.deleteAllMetaCounters=function(e,n,t){var o="";o=e?$.API_OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(n)):$.API_GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(n)),r(o,{},t)},this.createMetaData=function(e,n,t,r){var o="";o=e?$.API_OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(n)):$.API_GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(n));var a={},i={};for(var s in t){var c=t[s];i[s]=c}a.metadata=i,l(o,a,r)},this.updateMetaData=function(e,n,t,r,o){var a="";a=e?$.API_OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(n)):$.API_GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(n));var i={},s={};for(var c in t){var u=t[c];s[c]=u}i.metadata=s,i.upsert=r,d(a,i,o)},this.getAllMetaData=function(e,n,t){this.getMetaData(e,n,{},t)},this.getMetaData=function(e,n,t,r){var a="";a=e?$.API_OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(n)):$.API_GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(n));var i=o(t);s(a,{keys:i},r)},this.deleteMetaData=function(e,n,t,o){var a="";a=e?$.API_OPENCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(n)).replace("%s",t):$.API_GROUPCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(n)).replace("%s",t),r(a,{},o)},this.deleteAllMetaData=function(e,n,t){var o="";o=e?$.API_OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(n)):$.API_GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(n)),r(o,{},t)},this.loadUserList=function(e,n,t,r,o,a){var i=$.API_USERS,c={token:encodeURIComponent(e),limit:String(n)};if(!h(t))try{var u="";for(var l in t){var d=t[l];u+=encodeURIComponent(d)+","}u.length>1&&(u=u.substring(0,u.length-1)),c.user_ids=u}catch(e){}if(r&&!h(o)){var f="";o.forEach(function(e){f+=encodeURIComponent(e)+","}),f.length>0&&(f=f.substring(0,f.length-1)),c.metadatakey=encodeURIComponent(r),c.metadatavalues_in=f}s(i,c,a)},this.loadBlockedUserList=function(e,n,t,r){var o=$.API_USERS_USERID_BLOCK.replace("%s",encodeURIComponent(e)),a={token:encodeURIComponent(n),limit:String(t)};s(o,a,r)},this.loadOpenChannelList=function(e,n,t,r,o,a){var i=$.API_OPENCHANNELS,c={token:encodeURIComponent(e),limit:String(n)};null!==t&&(c.name_contains=encodeURIComponent(t)),r&&(c.url_contains=encodeURIComponent(r)),null!==o&&(c.custom_type=encodeURIComponent(o)),s(i,c,a)},this.uploadFile=function(e,n,r,o,a,i,s,c){t($.API_STORAGE_FILE,0,e,n,r,o,a,i,s,c)},this.uploadProfileImage=function(e,n){t($.API_STORAGE_PROFILE,0,e,"",[],"",n)},this.loadUserGroupChannelList=function(e,n,t,r,a,i,c,u,l,d,f,h,p){var m=$.API_MYGROUPCHANNELS.replace("%s",encodeURIComponent(e)),g={token:encodeURIComponent(n),limit:String(t),show_member:!0,show_read_receipt:!0,show_empty:String(r),order:a,member_state_filter:d};if(h&&(g.custom_type=encodeURIComponent(h)),u)try{g.members_nickname_contains=encodeURIComponent(u)}catch(e){}if(f)try{g.name_contains=encodeURIComponent(f)}catch(e){}if(i.length>0)try{c?g.members_exactly_in=o(i):(g.members_include_in=o(i),g.query_type=l)}catch(e){}s(m,g,p)},this.loadOpenChannelParticipantList=function(e,n,t,r){var o=$.API_OPENCHANNELS_CHANNELURL_PARTICIPANTS.replace("%s",e),a={token:encodeURIComponent(n),limit:String(t)};s(o,a,r)},this.loadOpenChannelMutedList=function(e,n,t,r){var o=$.API_OPENCHANNELS_CHANNELURL_MUTE.replace("%s",e),a={token:encodeURIComponent(n),limit:String(t)};s(o,a,r)},this.loadOpenChannelBanList=function(e,n,t,r){var o=$.API_OPENCHANNELS_CHANNELURL_BAN.replace("%s",e),a={token:encodeURIComponent(n),limit:String(t)};s(o,a,r)},this.setPushTemplate=function(e,n,t){var r=$.API_USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(e));d(r,{name:n},t)},this.getPushTemplate=function(e,n){var t=$.API_USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(e));s(t,n)},this.setDoNotDisturb=function(e,n,t,r,o,a,i,s){var c=$.API_USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(e));d(c,{do_not_disturb:n,start_hour:t,start_min:r,end_hour:o,end_min:a,timezone:i},s)},this.getDoNotDisturb=function(e,n){var t=$.API_USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(e));s(t,n)},this.setPushPreference=function(e,n,t,r){var o=$.API_USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(e)).replace("%s",encodeURIComponent(n)),a={};a.enable=t,d(o,a,r)},this.getPushPreference=function(e,n,t){var r=$.API_USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(e)).replace("%s",encodeURIComponent(n));s(r,t)},this.registerGCMPushToken=function(e,n,t){var r=$.API_USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(e));l(r,{gcm_reg_token:n},t)},this.unregisterGCMPushToken=function(e,n,t){var o=$.API_USERS_USERID_PUSH_GCM_TOKEN.replace("%s",encodeURIComponent(e)).replace("%s",encodeURIComponent(n));r(o,t)},this.unregisterGCMPushTokenAll=function(e,n){var t=$.API_USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(e));r(t,n)},this.registerAPNSPushToken=function(e,n,t){var r=$.API_USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(e));l(r,{apns_device_token:n},t)},this.unregisterAPNSPushToken=function(e,n,t){var o=$.API_USERS_USERID_PUSH_APNS_TOKEN.replace("%s",encodeURIComponent(e)).replace("%s",encodeURIComponent(n));r(o,t)},this.unregisterAPNSPushTokenAll=function(e,n){var t=$.API_USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(e));r(t,n)},this.unregisterPushTokenAll=function(e,n){var t=$.API_USERS_USERID_PUSH.replace("%s",encodeURIComponent(e));r(t,n)},this.blockUser=function(e,n,t){var r=$.API_USERS_USERID_BLOCK.replace("%s",encodeURIComponent(e));l(r,{target_id:n},t)},this.unblockUser=function(e,n,t){var o=$.API_USERS_USERID_BLOCK_TARGETID.replace("%s",encodeURIComponent(e)).replace("%s",encodeURIComponent(n));r(o,{},t)},this.banUser=function(e,n,t,r,o){var a=$.API_OPENCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(e)),i={user_id:n};t&&(i.description=t),i.seconds=String(r),l(a,i,o)},this.unbanUser=function(e,n,t){var o=$.API_OPENCHANNELS_CHANNELURL_BAN_USERID.replace("%s",encodeURIComponent(e)).replace("%s",encodeURIComponent(n));r(o,{},t)},this.muteUser=function(e,n,t){var r=$.API_OPENCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(e));l(r,{user_id:n},t)},this.unmuteUser=function(e,n,t){var o=$.API_OPENCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(e)).replace("%s",encodeURIComponent(n));r(o,{},t)},this.deleteMessage=function(e,n,t,o){var a="";a=e?$.API_OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(n)).replace("%s",encodeURIComponent(t)):$.API_GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(n)).replace("%s",encodeURIComponent(t)),r(a,{},o)}},Z=null;$.getInstance=function(){return null===Z?null:Z},$.API_VERSION="v3",$.API_ROUTING_URL="https://api-p.sendbird.com/routing/%s",$.API_USERS="/%v/users".replace("%v",$.API_VERSION),$.API_USERS_USERID_LOGIN="/%v/users/%s/login".replace("%v",$.API_VERSION),$.API_USERS_USERID="/%v/users/%s".replace("%v",$.API_VERSION),$.API_USERS_USERID_METADATA="/%v/users/%s/metadata".replace("%v",$.API_VERSION),$.API_USERS_USERID_METADATA_KEY="/%v/users/%s/metadata/%s".replace("%v",$.API_VERSION),$.API_USERS_USERID_UNREAD_MESSAGE_COUNT="/%v/users/%s/unread_message_count".replace("%v",$.API_VERSION),$.API_USERS_USERID_UNREAD_CHANNEL_COUNT="/%v/users/%s/unread_channel_count".replace("%v",$.API_VERSION),$.API_USERS_USERID_MARKASREADALL="/%v/users/%s/mark_as_read_all".replace("%v",$.API_VERSION),$.API_USERS_USERID_PUSH_GCM_TOKEN="/%v/users/%s/push/gcm/%s".replace("%v",$.API_VERSION),$.API_USERS_USERID_PUSH_GCM="/%v/users/%s/push/gcm".replace("%v",$.API_VERSION),$.API_USERS_USERID_PUSHPREFERENCE_CHANNELURL="/%v/users/%s/push_preference/%s".replace("%v",$.API_VERSION),$.API_USERS_USERID_PUSHPREFERENCE="/%v/users/%s/push_preference/".replace("%v",$.API_VERSION),$.API_USERS_USERID_PUSH_TEMPLATE="/%v/users/%s/push/template".replace("%v",$.API_VERSION),$.API_USERS_USERID_BLOCK="/%v/users/%s/block".replace("%v",$.API_VERSION),$.API_USERS_USERID_BLOCK_TARGETID="/%v/users/%s/block/%s".replace("%v",$.API_VERSION),$.API_USERS_USERID_PUSH_APNS_TOKEN="/%v/users/%s/push/apns/%s".replace("%v",$.API_VERSION),$.API_USERS_USERID_PUSH_APNS="/%v/users/%s/push/apns".replace("%v",$.API_VERSION),$.API_USERS_USERID_PUSH="/%v/users/%s/push".replace("%v",$.API_VERSION),$.API_USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE="/%v/users/%s/channel_invitation_preference".replace("%v",$.API_VERSION),$.API_USERS_USERID_GROUP_CHANNEL_COUNT="/%v/users/%s/group_channel_count".replace("%v",$.API_VERSION),$.API_OPENCHANNELS="/%v/open_channels".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL="/%v/open_channels/%s".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_MESSAGES="/%v/open_channels/%s/messages".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID="/%v/open_channels/%s/messages/%s".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_PARTICIPANTS="/%v/open_channels/%s/participants".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_METADATA="/%v/open_channels/%s/metadata".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_METADATA_KEY="/%v/open_channels/%s/metadata/%s".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_METACOUNTER="/%v/open_channels/%s/metacounter".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_METACOUNTER_KEY="/%v/open_channels/%s/metacounter/%s".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_BAN="/%v/open_channels/%s/ban".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_BAN_USERID="/%v/open_channels/%s/ban/%s".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_MUTE="/%v/open_channels/%s/mute".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_MUTE_USERID="/%v/open_channels/%s/mute/%s".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS="/%v/group_channels".replace("%v",$.API_VERSION),$.API_MYGROUPCHANNELS="/%v/users/%s/my_group_channels".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL="/%v/group_channels/%s".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_INVITE="/%v/group_channels/%s/invite".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION="/%v/group_channels/%s/accept".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION="/%v/group_channels/%s/decline".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_HIDE="/%v/group_channels/%s/hide".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_LEAVE="/%v/group_channels/%s/leave".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_MESSAGES="/%v/group_channels/%s/messages".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASREAD="/%v/group_channels/%s/messages/mark_as_read".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_MESSAGES_TOTALCOUNT="/%v/group_channels/%s/messages/total_count".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_MESSAGES_UNREADCOUNT="/%v/group_channels/%s/messages/unread_count".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID="/%v/group_channels/%s/messages/%s".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_MEMBERS="/%v/group_channels/%s/members".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_METADATA="/%v/group_channels/%s/metadata".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_METADATA_KEY="/%v/group_channels/%s/metadata/%s".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_METACOUNTER="/%v/group_channels/%s/metacounter".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY="/%v/group_channels/%s/metacounter/%s".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_RESET_USER_HISTORY="/%v/group_channels/%s/reset_user_history".replace("%v",$.API_VERSION),$.API_STORAGE_FILE="/%v/storage/file".replace("%v",$.API_VERSION),$.API_STORAGE_PROFILE="/%v/storage/profile_image".replace("%v",$.API_VERSION),$.API_OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS="/%v/open_channels/%s/messages/changelogs".replace("%v",$.API_VERSION),$.API_GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS="/%v/group_channels/%s/messages/changelogs".replace("%v",$.API_VERSION),$.UPDATE_META_COUNTER_MODE_SET=0,$.UPDATE_META_COUNTER_MODE_INC=1,$.UPDATE_META_COUNTER_MODE_DEC=2;var X=function(e){var n=X.getInstance();if(n)return n;try{if(!e.hasOwnProperty("appId"))return t.log("Must be set appId"),{}}catch(e){return t.log("Must be set appId"),{}}this.GCMPushToken="",this.APNSPushToken="",this.PUSH_TEMPLATE_DEFAULT="default",this.PUSH_TEMPLATE_ALTERNATIVE="alternative",this.isSessionOpened=!1,this.pushTokenRegistrationState={SUCCESS:"success",PENDING:"pending",ERROR:"error"},this.loginTimer,this.onLoginTimerCancel,this.globalTimer,this.reconnectTimer,this.onReconnectTimerCancel,this.currentUser=null,this.getCurrentUserId=function(){return X.getInstance().currentUser?X.getInstance().currentUser.userId:null},this.wsClient,this.connectionState={CONNECTING:"CONNECTING",OPEN:"OPEN",CLOSING:"CLOSING",CLOSED:"CLOSED"},this.ConnectionState=this.connectionState,this.BaseChannel=v,this.User=F,this.Member=B,this.OpenChannel=k,this.GroupChannel=D,this.UserMessage=U,this.FileMessage=x,this.AdminMessage=P,this.channelHandlers={},this.connectionHandlers={};var r={};R=e.appId,ee=this,Z=$.getInstance(),Z||(Z=new $),this.Options={UseMemberAsMessageSender:!1},this.customApiHost=null,this.customWsHost=null,this.ChannelHandler=function(){this.onMessageReceived=function(e,n){},this.onMessageUpdated=function(e,n){},this.onMessageDeleted=function(e,n){},this.onReadReceiptUpdated=function(e){},this.onTypingStatusUpdated=function(e){},this.onUserJoined=function(e,n){},this.onUserLeft=function(e,n){},this.onUserEntered=function(e,n){},this.onUserExited=function(e,n){},this.onUserMuted=function(e,n){},this.onUserUnmuted=function(e,n){},this.onUserBanned=function(e,n){},this.onUserUnbanned=function(e,n){},this.onChannelFrozen=function(e){},this.onChannelUnfrozen=function(e){},this.onChannelChanged=function(e){},this.onChannelDeleted=function(e){},this.onUserReceivedInvitation=function(e,n,t){},this.onUserDeclinedInvitation=function(e,n,t){},this.onMetaDataCreated=function(e,n){},this.onMetaDataUpdated=function(e,n){},this.onMetaDataDeleted=function(e,n){},this.onMetaCountersCreated=function(e,n){},this.onMetaCountersUpdated=function(e,n){},this.onMetaCountersDeleted=function(e,n){},this.onChannelHidden=function(e){}},this.addChannelHandler=function(e,n){X.getInstance().channelHandlers[e]=n},this.removeChannelHandler=function(e){delete X.getInstance().channelHandlers[e]},this.removeAllChannelHandlers=function(){X.getInstance().channelHandlers={}},this.ConnectionHandler=function(){this.onReconnectStarted=function(){},this.onReconnectSucceeded=function(){},this.onReconnectFailed=function(){}},this.addConnectionHandler=function(e,n){X.getInstance().connectionHandlers[e]=n},this.removeConnectionHandler=function(e){delete X.getInstance().connectionHandlers[e]},this.removeAllConnectionHandlers=function(){X.getInstance().connectionHandlers={}},this.createUserListQuery=function(e){return e?new W(W.FILTERED_USER,e):new W(W.ALL_USER)},this.createBlockedUserListQuery=function(){return new W(W.BLOCKED_USER)},this.getApplicationId=function(){return R},this.getDebugMode=function(){return o},this.setDebugMode=function(e){o=e},this.setAPIHost=function(e){i=e},this.setWSHost=function(e){a=e},this.clearCurrentApiHost=function(){this.customApiHost=null},this.getCurrentApiHost=function(){return this.customApiHost?this.customApiHost:i},this.clearCurrentWsHost=function(){this.customWsHost=null},this.getCurrentWsHost=function(){return this.customWsHost?this.customWsHost:a},this.setErrorFirstCallback=function(e){N=e},this.getConnectionState=function(){if(!X.getInstance())return this.connectionState.CLOSED;try{return X.getInstance().wsClient?X.getInstance().isSessionOpened?X.getInstance().wsClient.getConnectionState():X.getInstance().connectionState.CONNECTING:X.getInstance().connectionState.CLOSED}catch(e){return X.getInstance().connectionState.CLOSED}},this.hasLoggedIn=function(){return X.getInstance().currentUser&&$.getInstance().sessionKey};var s=function(e){return r.hasOwnProperty(e)?r[e]:null},c=function(e){var n=new V(e);if(n.requestId){var r=s(n.requestId);if(null==r)return;clearTimeout(r.timer);var o=r.handler;if(o)if("EROR"==n.command){var a=n.getJsonElement(),i=a.code,c=a.message;o(n,new g(c,i))}else o(n,null)}else switch(n.command){case"LOGI":if(X.getInstance().loginTimer){clearTimeout(X.getInstance().loginTimer),X.getInstance().loginTimer=null,X.getInstance().onLoginTimerCancel=null;var d=n.getJsonElement();if(d.hasOwnProperty("error")){X.getInstance().isSessionOpened=!1;var i=d.code,c=d.message;X.getInstance().loginHandler(null,new g(c,i))}else X.getInstance().isSessionOpened=!0,d.hasOwnProperty("key")&&($.getInstance().sessionKey=d.key),d.hasOwnProperty("ekey")&&($.getInstance().ekey=d.ekey),d.hasOwnProperty("user_id")&&(X.getInstance().currentUser=new F(d)),X.getInstance().loginHandler(X.getInstance().currentUser,null)}break;case"MESG":case"FILE":case"BRDM":case"ADMM":var f="",h=!1;if("MESG"==n.command?f=new U(n.getJsonElement()):"FILE"==n.command?f=new x(n.getJsonElement()):(f=new P(n.getJsonElement()),n.getJsonElement().hasOwnProperty("silent")&&(h=n.getJsonElement().silent)),!f)return;if(f.isGroupChannel()){var p=D.cachedChannels.hasOwnProperty(f.channelUrl);D.getChannel(f.channelUrl,function(e,n){if(N){var t=e;e=n,n=t}if(n)return void(o&&o(null,n));if(e.isHidden=!1,D.cachedChannels[e.url]=e,f._sender&&e.memberMap.hasOwnProperty(f._sender.userId)){var r=e.memberMap[f._sender.userId];r.nickname!=f._sender.nickname&&(r.nickname=f._sender.nickname),r.profileUrl!=f._sender.profileUrl&&(r.profileUrl=f._sender.profileUrl)}var a=X.getInstance().currentUser;if(a&&f._sender&&a.userId==f._sender.userId&&(a.nickname!=f._sender.nickname&&(a.nickname=f._sender.nickname),a.profileUrl!=f._sender.profileUrl&&(a.profileUrl=f._sender.profileUrl)),!h){p&&(e.updatedLocal?(e.lastMessage=f,f.sender&&f.sender.userId==X.getInstance().getCurrentUserId()||e.unreadMessageCount++):(!e.lastMessage||e.lastMessage.createdAt<f.createdAt)&&(e.updatedLocal=!0,e.lastMessage=f,f.sender&&f.sender.userId==X.getInstance().getCurrentUserId()||e.unreadMessageCount++));for(var i in X.getInstance().channelHandlers){var s=X.getInstance().channelHandlers[i];s.onChannelChanged(e)}}for(var i in X.getInstance().channelHandlers){var s=X.getInstance().channelHandlers[i];s.onMessageReceived(e,f)}})}else k.getChannel(f.channelUrl,function(e,n){if(N){var t=e;e=n,n=t}if(n)return void(o&&o(null,n));for(var r in X.getInstance().channelHandlers)X.getInstance().channelHandlers[r].onMessageReceived(e,f)});break;case"MEDI":case"FEDI":case"AEDI":var f="";if(!(f="MEDI"==n.command?new U(n.getJsonElement()):"FEDI"==n.command?new x(n.getJsonElement()):new P(n.getJsonElement())))return;f.isGroupChannel()?D.getChannel(f.channelUrl,function(e,n){if(N){var t=e;e=n,n=t}if(n)return void(o&&o(null,n));if(f._sender&&e.memberMap.hasOwnProperty(f._sender.userId)){var r=e.memberMap[f._sender.userId];r.nickname!=f._sender.nickname&&(r.nickname=f._sender.nickname),r.profileUrl!=f._sender.profileUrl&&(r.profileUrl=f._sender.profileUrl)}var a=X.getInstance().currentUser;a&&f._sender&&a.userId==f._sender.userId&&(a.nickname!=f._sender.nickname&&(a.nickname=f._sender.nickname),a.profileUrl!=f._sender.profileUrl&&(a.profileUrl=f._sender.profileUrl));for(var i in X.getInstance().channelHandlers)X.getInstance().channelHandlers[i].onMessageUpdated(e,f)}):k.getChannel(f.channelUrl,function(e,n){if(N){var t=e;e=n,n=t}if(n)return void(o&&o(null,n));for(var r in X.getInstance().channelHandlers)X.getInstance().channelHandlers[r].onMessageUpdated(e,f)});break;case"READ":var m=new G(n.getJsonElement()),p=D.cachedChannels.hasOwnProperty(m.channelUrl);D.getChannel(m.channelUrl,function(e,n){if(N){var t=e;e=n,n=t}if(n)return void(o&&o(null,n));if(m.reader.userId==X.getInstance().getCurrentUserId()){if(p){if(e.unreadMessageCount>0){e.unreadMessageCount=0;for(var r in X.getInstance().channelHandlers){var a=X.getInstance().channelHandlers[r];a.onChannelChanged(e)}}}else if(0==e.unreadMessageCount)for(var r in X.getInstance().channelHandlers){var a=X.getInstance().channelHandlers[r];a.onChannelChanged(e)}}else{e.updateReadReceipt(m.reader.userId,m.timestamp);for(var r in X.getInstance().channelHandlers){var a=X.getInstance().channelHandlers[r];a.onReadReceiptUpdated(e)}}});break;case"TPST":case"TPEN":case"MTIO":break;case"SYEV":l(n);break;case"USEV":u(n);break;case"DELM":var v=n.getJsonElement(),b=String(v.channel_type),_=String(v.channel_url),E=String(v.msg_id);switch(b){case L.CHANNEL_TYPE_OPEN:k.getChannel(_,function(e,n){if(N){var r=e;e=n,n=r}if(n)return void t.log("Discard a command.");for(var o in X.getInstance().channelHandlers)X.getInstance().channelHandlers[o].onMessageDeleted(e,E)});break;case L.CHANNEL_TYPE_GROUP:D.getChannel(_,function(e,n){if(N){var r=e;e=n,n=r}if(n)return void t.log("Discard a command.");for(var o in X.getInstance().channelHandlers)X.getInstance().channelHandlers[o].onMessageDeleted(e,E)})}}},u=function(e){var n=new M(e.getJsonElement());switch(n.category){case H.CATEGORY_USER_BLOCK:case H.CATEGORY_USER_UNBLOCK:var t=n.data.blocker.user_id,r=n.data.blockee.user_id;Object.keys(D.cachedChannels).forEach(function(e){var o=D.cachedChannels[e];try{X.getInstance().getCurrentUserId()===t?o.memberMap[r].isBlockedByMe=n.category===H.CATEGORY_USER_BLOCK:X.getInstance().getCurrentUserId()===r&&(o.memberMap[t].isBlockingMe=n.category===H.CATEGORY_USER_BLOCK)}catch(e){}})}},l=function(e){var n=new M(e.getJsonElement());switch(n.category){case M.CATEGORY_CHANNEL_JOIN:case M.CATEGORY_CHANNEL_LEAVE:D.getChannel(n.channelUrl,function(r,o){if(N){var a=r;r=o,o=a}if(o)return void t.log("Discard a command: "+e.command+":"+n.category);var i=new F(n.data);if(n.category==M.CATEGORY_CHANNEL_JOIN){n.data.state=B.JOINED,r.addMember(new B(n.data));for(var s in X.getInstance().channelHandlers){var c=X.getInstance().channelHandlers[s];c.onUserJoined(r,i)}}else{i.userId==X.getInstance().getCurrentUserId()&&D.removeCachedChannel(n.channelUrl),r.removeMember(i);for(var s in X.getInstance().channelHandlers){var c=X.getInstance().channelHandlers[s];c.onUserLeft(r,i)}}});break;case M.CATEGORY_CHANNEL_INVITE:D.getChannel(n.channelUrl,function(r,o){if(N){var a=r;r=o,o=a}if(o)return void t.log("Discard a command: "+e.command+":"+n.category);var i=null;n.data&&n.data.inviter&&!h(n.data.inviter)&&(i=new F(n.data.inviter));var s=[];for(var c in n.data.invitees){n.data.invitees[c].state=B.INVITED;var u=new B(n.data.invitees[c]);s.push(u),r.addMember(u)}for(var c in X.getInstance().channelHandlers)X.getInstance().channelHandlers[c].onUserReceivedInvitation(r,i,s)});break;case M.CATEGORY_CHANNEL_DECLINE_INVITE:D.getChannel(n.channelUrl,function(r,o){if(N){var a=r;r=o,o=a}if(o)return void t.log("Discard a command: "+e.command+":"+n.category);var i=null;n.data&&n.data.inviter&&!h(n.data.inviter)&&(i=new F(n.data.inviter));var s=new F(n.data.invitee);s.userId==X.getInstance().getCurrentUserId()&&D.removeCachedChannel(n.channelUrl),r.removeMember(s);for(var c in X.getInstance().channelHandlers)X.getInstance().channelHandlers[c].onUserDeclinedInvitation(r,i,s)});break;case M.CATEGORY_TYPING_START:case M.CATEGORY_TYPING_END:D.getChannel(n.channelUrl,function(r,o){if(N){var a=r;r=o,o=a}if(o)return void t.log("Discard a command: "+e.command+":"+n.category);var i=new F(n.data);n.category==M.CATEGORY_TYPING_START?r.updateTypingStatus(i,!0):r.updateTypingStatus(i,!1);for(var s in X.getInstance().channelHandlers)X.getInstance().channelHandlers[s].onTypingStatusUpdated(r)});break;case M.CATEGORY_CHANNEL_ENTER:case M.CATEGORY_CHANNEL_EXIT:k.getChannel(n.channelUrl,function(r,o){if(N){var a=r;r=o,o=a}if(o)return void t.log("Discard a command: "+e.command+":"+n.category);n.data.hasOwnProperty("participant_count")&&(r.participantCount=n.data.participant_count);var i=new F(n.data);if(n.category==M.CATEGORY_CHANNEL_ENTER)for(var s in X.getInstance().channelHandlers){var c=X.getInstance().channelHandlers[s];c.onUserEntered(r,i)}else for(var s in X.getInstance().channelHandlers){var c=X.getInstance().channelHandlers[s];c.onUserExited(r,i)}});break;case M.CATEGORY_USER_CHANNEL_MUTE:case M.CATEGORY_USER_CHANNEL_UNMUTE:k.getChannel(n.channelUrl,function(r,o){if(N){var a=r;r=o,o=a}if(o)return void t.log("Discard a command: "+e.command+":"+n.category);var i=new F(n.data);if(n.category==M.CATEGORY_USER_CHANNEL_MUTE)for(var s in X.getInstance().channelHandlers){var c=X.getInstance().channelHandlers[s];c.onUserMuted(r,i)}else for(var s in X.getInstance().channelHandlers){var c=X.getInstance().channelHandlers[s];c.onUserUnmuted(r,i)}});break;case M.CATEGORY_USER_CHANNEL_BAN:case M.CATEGORY_USER_CHANNEL_UNBAN:k.getChannel(n.channelUrl,function(r,o){if(N){var a=r;r=o,o=a}if(o)return void t.log("Discard a command: "+e.command+":"+n.category);var i=new F(n.data);if(n.category==M.CATEGORY_USER_CHANNEL_BAN)for(var s in X.getInstance().channelHandlers){var c=X.getInstance().channelHandlers[s];c.onUserBanned(r,i)}else for(var s in X.getInstance().channelHandlers){var c=X.getInstance().channelHandlers[s];c.onUserUnbanned(r,i)}});break;case M.CATEGORY_CHANNEL_FREEZE:case M.CATEGORY_CHANNEL_UNFREEZE:k.getChannel(n.channelUrl,function(r,o){if(N){var a=r;r=o,o=a}if(o)return void t.log("Discard a command: "+e.command+":"+n.category);if(r.isFrozen=n.data.freeze,n.category==M.CATEGORY_CHANNEL_FREEZE)for(var i in X.getInstance().channelHandlers){var s=X.getInstance().channelHandlers[i];s.onChannelFrozen(r)}else for(var i in X.getInstance().channelHandlers){var s=X.getInstance().channelHandlers[i];s.onChannelUnfrozen(r)}});break;case M.CATEGORY_CHANNEL_DELETED:if(n.isGroupChannel()){D.removeCachedChannel(n.channelUrl);for(var r in X.getInstance().channelHandlers){var o=X.getInstance().channelHandlers[r];o.onChannelDeleted(n.channelUrl,"group")}}else{k.removeCachedChannel(n.channelUrl);for(var r in X.getInstance().channelHandlers){var o=X.getInstance().channelHandlers[r];o.onChannelDeleted(n.channelUrl,"open")}}break;case M.CATEGORY_CHANNEL_PROP_CHANGED:n.isOpenChannel()?k.getChannelWithoutCache(n.channelUrl,function(r,o){if(N){var a=r;r=o,o=a}if(o)return void t.log("Discard a command: "+e.command+":"+n.category);for(var i in X.getInstance().channelHandlers)X.getInstance().channelHandlers[i].onChannelChanged(r)}):D.getChannelWithoutCache(n.channelUrl,function(r,o){if(N){var a=r;r=o,o=a}if(o)return void t.log("Discard a command: "+e.command+":"+n.category);for(var i in X.getInstance().channelHandlers)X.getInstance().channelHandlers[i].onChannelChanged(r)});break;case M.CATEGORY_CHANNEL_META_DATA_CHANGED:case M.CATEGORY_CHANNEL_META_COUNTERS_CHANGED:var a=n.data.hasOwnProperty("created"),i=n.data.hasOwnProperty("updated"),s=n.data.hasOwnProperty("deleted");n.isOpenChannel()?k.getChannel(n.channelUrl,function(r,o){if(N){var c=r;r=o,o=c}if(o)return void t.log("Discard a command: "+e.command+":"+n.category);for(var u in X.getInstance().channelHandlers){var l=X.getInstance().channelHandlers[u];n.category==M.CATEGORY_CHANNEL_META_DATA_CHANGED?(a&&l.onMetaDataCreated(r,n.data.created),i&&l.onMetaDataUpdated(r,n.data.updated),s&&l.onMetaDataDeleted(r,n.data.deleted)):(a&&l.onMetaCountersCreated(r,n.data.created),i&&l.onMetaCountersUpdated(r,n.data.updated),s&&l.onMetaCountersDeleted(r,n.data.deleted))}}):D.getChannel(n.channelUrl,function(r,o){if(N){var c=r;r=o,o=c}if(o)return void t.log("Discard a command: "+e.command+":"+n.category);for(var u in X.getInstance().channelHandlers){var l=X.getInstance().channelHandlers[u];n.category==M.CATEGORY_CHANNEL_META_DATA_CHANGED?(a&&l.onMetaDataCreated(r,n.data.created),i&&l.onMetaDataUpdated(r,n.data.updated),s&&l.onMetaDataDeleted(r,n.data.deleted)):(a&&l.onMetaCountersCreated(r,n.data.created),i&&l.onMetaCountersUpdated(r,n.data.updated),s&&l.onMetaCountersDeleted(r,n.data.deleted))}});break;case M.CATEGORY_CHANNEL_HIDE:D.getChannel(n.channelUrl,function(r,o){if(N){var a=r;r=o,o=a}if(o)return void t.log("Discard a command: "+e.command+":"+n.category);r.isHidden=!0;for(var i in X.getInstance().channelHandlers)X.getInstance().channelHandlers[i].onChannelHidden(r)})}};this.setPushTemplate=function(e,n){return!e||e!==this.PUSH_TEMPLATE_DEFAULT&&e!==this.PUSH_TEMPLATE_ALTERNATIVE?void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n):this.currentUser?void $.getInstance().setPushTemplate(this.getCurrentUserId(),e,function(e,t){if(t)return void S(null,t,n);var r=e.name.toString();S(r,null,n)}):void S(null,new g("Connection must be made before you set push template",J.CONNECTION_REQUIRED),n)},this.getPushTemplate=function(e){if(!this.currentUser)return void S(null,new g("Connection must be made before you get push template",J.CONNECTION_REQUIRED),e);$.getInstance().getPushTemplate(this.getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);var r=n.name.toString();S(r,null,e)})},this.setChannelInvitationPreference=function(e,n){"boolean"!=typeof e&&S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),n),$.getInstance().setChannelInvitationPreference(this.getCurrentUserId(),e,function(e,t){if(t)return void S(null,t,n);S({autoAccept:e.auto_accept},null,n)})},this.getChannelInvitationPreference=function(e){$.getInstance().getChannelInvitationPreference(this.getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);S({autoAccept:n.auto_accept},null,e)})},this.connect=function(){var e=Array.prototype.slice.call(arguments),n=null,r=null,a=null;switch("function"==typeof e.slice(-1)[0]&&(a=e.pop()),e.length){case 1:n=e[0];break;case 2:n=e[0],r=e[1];break;case 3:n=e[0],this.customApiHost=e[1],this.customWsHost=e[2];break;case 4:n=e[0],r=e[1],this.customApiHost=e[2],this.customWsHost=e[3];break;default:o&&t.log("sb.connect args length error: ",arguments)}n&&0!=n.length?(m(!0,null),_(n,r,a)):S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),a)};var d=!1,f=!1,p=!0;this.setBackgroundState=function(){!d&&p&&(d=!0,this.getConnectionState()!=this.connectionState.CLOSED?(f=!0,m(!1,null)):f=!1)},this.setForegroundState=function(){d&&p&&(d=!1,f&&this.currentUser&&(w=0,b(this.getCurrentUserId(),!0)))},this.disableStateChange=function(){p=!1},this.enableStateChange=function(){p=!0},this.disconnect=function(e){m(!0,e)},this.reconnect=function(){if(!$.getInstance().sessionKey||!this.currentUser)return!1;var e=!0;return w>0&&(e=!1),m(!1,null),w=0,b(this.getCurrentUserId(),e),!0};var m=function(e,n){var t=this;X.getInstance().loginTimer&&(clearTimeout(X.getInstance().loginTimer),X.getInstance().onLoginTimerCancel&&(X.getInstance().onLoginTimerCancel(),X.getInstance().onLoginTimerCancel=null),X.getInstance().loginTimer=null),X.getInstance().reconnectTimer&&(clearTimeout(X.getInstance().reconnectTimer),X.getInstance().onReconnectTimerCancel&&(X.getInstance().onReconnectTimerCancel(),X.getInstance().onReconnectTimerCancel=null),X.getInstance().reconnectTimer=null),X.getInstance().wsClient&&(w=0,X.getInstance().wsClient.disconnect(!0),X.getInstance().wsClient=null),function(){if(e){k.clearEnteredChannels(),k.clearCache(),D.clearCache(),X.getInstance().globalTimer&&(clearTimeout(t.globalTimer),X.getInstance().globalTimer=null);for(var r in X.getInstance().ackStateMap)clearTimeout(X.getInstance().ackStateMap[r].timer);X.getInstance().ackStateMap={},X.getInstance().currentUser=null,$.getInstance().sessionKey=null,$.getInstance().ekey=null}S(null,null,n)}()},b=function(e,n){if(X.getInstance().reconnectTimer)o&&t.log("still reconnecting");else{if((w+=1)<=1){if(n)for(var r in X.getInstance().connectionHandlers){var a=X.getInstance().connectionHandlers[r];a.onReconnectStarted(r)}T=0}else T=3e3*Math.pow(2,w-2);if(!e||!$.getInstance().sessionKey||w>=6){m(!1,null),w=0;for(var r in X.getInstance().connectionHandlers){var a=X.getInstance().connectionHandlers[r];a.onReconnectFailed(r)}return}X.getInstance().onReconnectTimerCancel=function(){w=0},X.getInstance().reconnectTimer=setTimeout(function(){X.getInstance().reconnectTimer=null,X.getInstance().onReconnectTimerCancel=null,X.getInstance().wsClient&&X.getInstance().wsClient.disconnect(!0);var n=new Q.WSClientHandler;X.getInstance().wsClient=new Q(n),X.getInstance().loginHandler=function(e){w=0;for(var n in k.enteredChannels)k.enteredChannels[n].enter();for(var n in X.getInstance().connectionHandlers)X.getInstance().connectionHandlers[n].onReconnectSucceeded(n)},n.onOpen=function(){o&&t.log("reconnectWS onOpen"),X.getInstance().loginTimer=setTimeout(function(){o&&t.log("reconnectWS loginTimer timedout"),X.getInstance().loginTimer=null,b(e,!0)},1e4),X.getInstance().onLoginTimerCancel=null},n.onMessage=function(e){c(e)},n.onError=function(){o&&t.log("reconnectWS onError"),b(e,!0)},n.onClose=function(){o&&t.log("reconnectWS onClose")};var r=X.getInstance().getCurrentApiHost();$.getInstance().checkRouting(function(n,t){if(t)return void b(e,!0);r!=n.API_HOST&&A(n.API_HOST,{},"GET",{},function(){}),X.getInstance().wsClient.connect(e,null,n.WS_HOST)})},T)}},_=function(e,n,r){var a=new Q.WSClientHandler;X.getInstance().wsClient=new Q(a),a.onMessage=function(e){c(e)},X.getInstance().loginHandler=function(e,n){if(n)X.getInstance().disconnect(null),S(null,n,r);else{clearTimeout(X.getInstance().globalTimer);var t=function(){if(D.cachedChannels)for(var e in D.cachedChannels){var n=D.cachedChannels[e];if(n.invalidateTypingStatus())for(var r in X.getInstance().channelHandlers){var o=X.getInstance().channelHandlers[r];o.onTypingStatusUpdated(n)}}X.getInstance().globalTimer=setTimeout(function(){t()},1e3)};t(),S(e,null,r)}},a.onOpen=function(e){X.getInstance().loginTimer=setTimeout(function(){X.getInstance().loginTimer=null,X.getInstance().onLoginTimerCancel=null,X.getInstance().disconnect(null),S(null,new g("Connection timeout.",J.LOGIN_TIMEOUT),r)},1e4),X.getInstance().onLoginTimerCancel=function(){S(null,new g("Connection Cancelled.",J.REQUEST_FAILED),r)}},a.onError=function(n){o&&t.log("WSClientHandler.onError",n),$.getInstance().sessionKey?b(e,!0):S(null,new g("Websocket connection failed.",J.WEBSOCKET_CONNECTION_FAILED),r)},a.onClose=function(e){o&&t.log("WSClientHandler.onClose")},$.getInstance().checkRouting(function(t,o){if(o)return void S(null,new g("Connection routing failed.",J.REQUEST_FAILED),r);A(t.API_HOST,{},"GET",{},function(){}),X.getInstance().wsClient.connect(e,n,t.WS_HOST)})};this.sendCommand=function(e,n){if(!X.getInstance().hasLoggedIn())return void(n&&n(null,new g("Connection should be made first.",J.CONNECTION_REQUIRED)));if(null==X.getInstance().wsClient||X.getInstance().wsClient.getConnectionState()!=X.getInstance().connectionState.OPEN)return void(n&&n(null,new g("Connection is not valid. Please reconnect.",J.WEBSOCKET_CONNECTION_CLOSED)));if(e.isAckRequired()){var t=e.requestId,o={handler:n,timer:setTimeout(function(){n(null,new g("Command received no ack.",J.ACK_TIMEOUT)),delete r[t]},1e4)};r[t]=o,X.getInstance().wsClient.send(e,function(e,t){if(t)return clearTimeout(o.timer),void n(null,t)})}else X.getInstance().wsClient.send(e,n)},this.updateCurrentUserInfoWithProfileImage=function(e,n,t){var r=this;n?$.getInstance().uploadProfileImage(n,function(n,o){if(o)return void S(null,o,t);var a="object"==typeof n?n:JSON.parse(n),i=a.url;r.updateCurrentUserInfo(e,i,t)}):r.updateCurrentUserInfo(e,null,t)},this.updateCurrentUserInfo=function(e,n,t){var r=this;$.getInstance().updateUserInfo(r.getCurrentUserId(),e,n,function(o,a){if(a)return void S(null,a,t);r.currentUser&&(e&&(r.currentUser.nickname=e),n&&(r.currentUser.profileUrl=n)),S(r.currentUser,null,t)})},this.getPendingGCMToken=function(){return this.GCMPushToken},this.getPendingAPNSToken=function(){return this.APNSPushToken},this.registerGCMPushTokenForCurrentUser=function(e,n){var t=this;return e?this.currentUser?void $.getInstance().registerGCMPushToken(this.getCurrentUserId(),e,function(e,r){if(r)return void S(t.pushTokenRegistrationState.ERROR,r,n);t.GCMPushToken="",S(t.pushTokenRegistrationState.SUCCESS,null,n)}):(t.GCMPushToken=e,void S(t.pushTokenRegistrationState.PENDING,null,n)):void S(t.pushTokenRegistrationState.ERROR,new g("Invalid token",J.INVALID_PARAMETER),n)},this.unregisterGCMPushTokenForCurrentUser=function(e,n){if(!e)return void S(null,new g("Invalid token",J.INVALID_PARAMETER),n);$.getInstance().unregisterGCMPushToken(this.getCurrentUserId(),e,function(e,t){if(t)return void S(null,t,n);S(null,null,n)})},this.unregisterGCMPushTokenAllForCurrentUser=function(e){$.getInstance().unregisterGCMPushTokenAll(this.getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);S(null,null,e)})},this.registerAPNSPushTokenForCurrentUser=function(e,n){var t=this;return e?this.currentUser?void $.getInstance().registerAPNSPushToken(this.getCurrentUserId(),e,function(e,r){if(r)return void S(t.pushTokenRegistrationState.ERROR,r,n);t.APNSPushToken="",S(t.pushTokenRegistrationState.SUCCESS,null,n)}):(t.APNSPushToken=e,void S(t.pushTokenRegistrationState.PENDING,null,n)):void S(t.pushTokenRegistrationState.ERROR,new g("Invalid token",J.INVALID_PARAMETER),n)},this.unregisterAPNSPushTokenForCurrentUser=function(e,n){if(!e)return void S(null,new g("Invalid token",J.INVALID_PARAMETER),n);$.getInstance().unregisterAPNSPushToken(this.getCurrentUserId(),e,function(e,t){if(t)return void S(null,t,n);S(null,null,n)})},this.unregisterAPNSPushTokenAllForCurrentUser=function(e){$.getInstance().unregisterAPNSPushTokenAll(this.getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);S(null,null,e)})},this.unregisterPushTokenAllForCurrentUser=function(e){$.getInstance().unregisterAPNSPushTokenAll(this.getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);S(null,null,e)})},this.setDoNotDisturb=function(e,n,t,r,o,a,i){var s=this;if(n<0||n>23||t<0||t>59||r<0||r>23||o<0||o>59)return void S(null,new g("Invalid arguments.",J.INVALID_PARAMETER),i);$.getInstance().setDoNotDisturb(s.getCurrentUserId(),e,n,t,r,o,a,function(e,n){if(n)return void S(null,n,i);var t={doNotDisturbOn:e.do_not_disturb,startHour:e.start_hour,startMin:e.start_min,endHour:e.end_hour,endMin:e.end_min,timezone:e.timezone};S(t,null,i)})},this.getDoNotDisturb=function(e){var n=this;$.getInstance().getDoNotDisturb(n.getCurrentUserId(),function(n,t){if(t)return void S(null,t,e);var r={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone};S(r,null,e)})},this.blockUser=function(e,n){if("object"!=typeof e)return void S(null,new g("You have to pass user object.",J.INVALID_PARAMETER),n);this.blockUserWithUserId(e.userId,n)},this.blockUserWithUserId=function(e,n){if(this.getCurrentUserId()==e)return void S(null,new g("You can not block yourself.",J.INVALID_PARAMETER),n);$.getInstance().blockUser(this.getCurrentUserId(),e,function(e,t){if(t)return void S(null,t,n);S(new F(e),null,n)})},this.unblockUser=function(e,n){if("object"!=typeof e)return void S(null,new g("You have to pass user object.",J.INVALID_PARAMETER),n);this.unblockUserWithUserId(e.userId,n)},this.unblockUserWithUserId=function(e,n){if(this.getCurrentUserId()==e)return void S(null,new g("You can not unblock yourself.",J.INVALID_PARAMETER),n);$.getInstance().unblockUser(this.getCurrentUserId(),e,function(e,t){if(t)return void S(null,t,n);S(null,null,n)})}},ee=null;return X.getInstance=function(){return null===ee?null:ee},{SendBird:X}},y=null;return function(){var e=function(e){if(e.newInstance||!y){var n=new E;y=new n.SendBird(e)}return y};return e.getInstance=function(){return null===y?null:y},e.version="3.0.48",{SendBird:e}}().SendBird})},"./node_modules/websocket/lib/browser.js":function(e,n,t){function r(e,n){return n?new a(e,n):new a(e)}var o=function(){return this}(),a=o.WebSocket||o.MozWebSocket,i=t("./node_modules/websocket/lib/version.js");e.exports={w3cwebsocket:a?r:null,version:i}},"./node_modules/websocket/lib/version.js":function(e,n,t){e.exports=t("./node_modules/websocket/package.json").version},"./node_modules/websocket/package.json":function(e,n){e.exports={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:"Brian McKelvey <brian@worlize.com> (https://www.worlize.com/)",contributors:["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version:"1.0.24",repository:{type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=0.8.0"},dependencies:{debug:"^2.2.0",nan:"^2.3.3","typedarray-to-buffer":"^3.1.2",yaeti:"^0.0.6"},devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.0.1"},config:{verbose:!1},scripts:{install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0"}},"./node_modules/xhr2/lib/browser.js":function(e,n){e.exports=XMLHttpRequest},"./src/chat/actions/channel.ts":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function a(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var s=t("./node_modules/lodash/first.js"),c=t.n(s),u=t("./src/lib/makeActionCreator/index.ts"),l=t("./src/chat/endpoints/accounts/index.ts"),d=t("./src/chat/actions/user.ts"),f=t("./src/chat/constants/promos.ts"),h=t("./src/chat/endpoints/sendbird/index.ts"),p=function(e){function n(e,t){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"Invalid Value: '"+e+" is "+t+"'"))}return a(n,e),n}(Error),m=t("./src/chat/singleton/SendbirdSDK.ts"),g=t("./src/chat/actions/message.ts"),v=t("./src/chat/actions/promo.ts"),b=t("./src/chat/actions/tracking.ts"),_=t("./src/chat/selectors/channels.ts"),E=t("./src/chat/selectors/experiments.ts"),y=t("./src/chat/constants/channels.ts"),I=t("./src/chat/models/Channel/index.ts"),C=t("./src/chat/helpers/urls.ts"),O=t("./node_modules/react-router-redux/es/index.js");t.d(n,"a",function(){return S}),t.d(n,"l",function(){return R}),t.d(n,"k",function(){return w}),t.d(n,"m",function(){return T}),t.d(n,"f",function(){return j}),t.d(n,"e",function(){return P}),t.d(n,"p",function(){return U}),t.d(n,"q",function(){return x}),t.d(n,"r",function(){return L}),t.d(n,"h",function(){return k}),t.d(n,"g",function(){return D}),t.d(n,"b",function(){return M}),t.d(n,"c",function(){return H}),t.d(n,"o",function(){return G}),t.d(n,"n",function(){return F}),t.d(n,"i",function(){return B}),t.d(n,"j",function(){return V}),t.d(n,"d",function(){return K}),t.d(n,"E",function(){return z}),t.d(n,"s",function(){return J}),t.d(n,"x",function(){return $}),t.d(n,"I",function(){return ne}),t.d(n,"J",function(){return oe}),t.d(n,"G",function(){return se}),t.d(n,"w",function(){return fe}),t.d(n,"v",function(){return he}),t.d(n,"C",function(){return pe}),t.d(n,"H",function(){return me}),t.d(n,"z",function(){return ye}),t.d(n,"A",function(){return Ce}),t.d(n,"B",function(){return Oe}),t.d(n,"t",function(){return Se}),t.d(n,"y",function(){return Re}),t.d(n,"u",function(){return we}),t.d(n,"F",function(){return Te}),t.d(n,"D",function(){return je});var A=this,N=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},S="CHANNEL__ADD_SUCCESS",R="CHANNEL__SELECT_BEGIN",w="CHANNEL__RESET_UNREAD_COUNT",T="CHANNEL__SELECT_END",j="CHANNEL__EXPAND_INVITE_LIST",P="CHANNEL__COLLAPSE_INVITE_LIST",U="CHANNEL__UPDATE_CHANNEL_NAME",x="CHANNEL__INVITED_UPDATE",L="CHANNEL__JOINED_UPDATE",k="CHANNEL__FETCHING_JOINED_CHANNELS",D="CHANNEL__FETCHING_INVITED_CHANNELS",M="CHANNEL__ADD_EXISTING_INVITED_CHANNELS",H="CHANNEL__ADD_EXISTING_JOINED_CHANNELS",G="CHANNEL__SET_INVITED_CHANNEL_TO_JOINED",F="CHANEL__SET_EXISTING_CHANNELS_END",B="CHANNEL__REMOVE_CHANNEL",V="CHANNEL__RESET_CHANNEL_MESSAGE_LIST",K="CHANNEL__BLOCK_COMPLETED",z=Object(u.a)("CHANNEL__MUTE_TOGGLED"),Y=function(e){return function(n,t,r){r.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r={removedChannelId:e},n(q(r));case 2:case"end":return t.stop()}},t,this)}))}},q=Object(u.a)(B),W=Object(u.a)(G),J=function(e){return function(n,t,r){r.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var o,a,i,s,c,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t(),a=e||Object(_.q)(o,"channelId")){r.next=4;break}throw new p("acceptedChannelId",a);case 4:if(i={acceptedChannelId:a},s=o.contacts.models,c=o.channels.models[a].members,!(u=!!c.find(function(e,n){return!!s[e.id].isNSFW}))){r.next=14;break}return r.next=11,Object(v.b)(f.a.NSFW_WARNING);case 11:if(o.promoAccepted[f.a.NSFW_WARNING]){r.next=14;break}return n(Object(O.push)(Object(C.a)(a,y.a.VIEW_NSFW_CONFIRMATION))),r.abrupt("return");case 14:return r.next=16,m.a.acceptChannelInvite().then(function(){return n(W(i))}).then(function(){return n(Object(O.push)(Object(C.b)(a)))});case 16:case"end":return r.stop()}},r,this)}))}},Q=function(e){return function(n,t){return N(A,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n(Y(e));case 1:case"end":return t.stop()}},t,this)}))}},$=function(){return function(e,n,t){t.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function t(){var r,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),o=Object(_.q)(r,"memberState"),a=Object(_.q)(r,"channelId")){t.next=5;break}throw new p("declinedChannelId",a);case 5:if(o){t.next=7;break}throw new p("declinedChannelType",o);case 7:m.a.declineChannelInvite().then(function(){return e(Q(a))}).then(function(){return e(me(o))});case 8:case"end":return t.stop()}},t,this)}))}},Z=Object(u.a)(x),X=Object(u.a)(L),ee=function(e){return function(n,t,r){r.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var o,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:o=t().user.account.id,a=e.members.filter(function(e){return e.id!==o}).map(function(e){return e.id}),n(Object(d.p)(a));case 3:case"end":return r.stop()}},r,this)}))}},ne=function(e){return function(n,t,r){r.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var o,a,i,s,c,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t(),a=o.platform.currentPage,i=o.user.account.id,s=e.members.find(function(e){return e.id===i})){r.next=6;break}throw new p("currentUser",s);case 6:if(c=a&&a.urlParams.channelId,u=c===e.channelId,u&&(e=Object.assign({},e,{unreadMessageCount:0})),"invited"!==s.state){r.next=15;break}return r.next=12,n(Z({channel:e}));case 12:n(ee(e)),r.next=17;break;case 15:return r.next=17,n(X({channel:e}));case 17:n(u?ce():Object(g.x)());case 18:case"end":return r.stop()}},r,this)}))}},te=Object(u.a)(w),re=Object(u.a)(U),oe=function(e){return function(n,t){return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var o,a,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(o=Object(_.n)(t()))){r.next=7;break}return a=Object.assign({},o,{name:e}),i=Object.assign({},o),n(re(a)),r.next=7,m.a.updateChannel(a).catch(function(e){n(re(i))});case 7:case"end":return r.stop()}},r,this)}))}},ae=Object(u.a)(R),ie=Object(u.a)(T),se=function(e){return function(n,t,r){r.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var o,a,i,s,c,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t(),a=o.platform.currentPage,i=a&&a.urlParams.channelId,s=e||i,!(c=!!(s&&o&&o.channels&&o.channels.models&&o.channels.models[s]))||!s){r.next=22;break}return n(ae({channelId:s})),r.next=9,m.a.enterChannel(s);case 9:if(!(u=r.sent)||u.error){r.next=18;break}return r.next=13,n(Object(g.n)(u.data));case 13:return r.next=15,n(ie());case 15:n(ce(s)),r.next=20;break;case 18:n(Object(g.w)()),n(ie());case 20:r.next=24;break;case 22:i?c||n(me()):n(me()),n(Object(g.w)());case 24:case"end":return r.stop()}},r,this)}))}},ce=(Object(u.a)("MESSAGE__MARK_AS_READ"),function(e){return function(n,t,r){r.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var o,a,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=t(),e||(a=o.platform.currentPage,(i=a&&a.urlParams.channelId)&&(e=i)),n(te(e)),r.next=5,m.a.markChannelAsRead();case 5:n(Object(g.x)());case 6:case"end":return r.stop()}},r,this)}))}}),ue=Object(u.a)(S),le=Object(u.a)("CHANNEL__ADD_FAIL"),de=function(e,n,t){var r=e.map(function(e){return{user_id:e,nickname:n[e].name}});if(t){var o=t.id,a=t.name;r.unshift({user_id:o,nickname:a})}return r},fe=function(e,n,t){return function(r,o,a){var s=a.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function a(){var c,u,l,d,f,p,m,g,v,_,E,A,N;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=o(),u=c.user,l=u.account,d=u.session,f=c.contacts.models,p=c.channels,m=p.joined,g=p.invited,!l||!d){a.next=30;break}if(v=de(e,f,l),!(v.length<2)){a.next=6;break}return a.abrupt("return");case 6:return a.next=8,Object(h.a)(s(),d,v,n);case 8:if(_=a.sent,!_.body){a.next=28;break}if(E=_.body,A=Object(I.d)(E,y.e.JOINED),N=A.channelId,!g.sortedKeys.includes(N)){a.next=18;break}r(J(N)),r(Object(b.f)(e,N)),a.next=26;break;case 18:if(!m.sortedKeys.includes(N)){a.next=22;break}t&&(r(Object(O.push)(Object(C.b)(N))),r(Object(b.f)(e,N))),a.next=26;break;case 22:return a.next=24,r(ue(i({},N,A)));case 24:r(Object(b.f)(e,N)),t&&r(Object(O.push)(Object(C.b)(N)));case 26:a.next=30;break;case 28:r(le()),r(Object(b.q)(e));case 30:case"end":return a.stop()}},a,this)}))}},he=function(e,n){return function(t,r){return N(A,void 0,void 0,regeneratorRuntime.mark(function o(){var a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=Object(E.a)(r()),!a&&e.length>1&&(e=[c()(e)]),o.next=4,t(Object(d.p)(e));case 4:t(fe(e,n,!0));case 5:case"end":return o.stop()}},o,this)}))}},pe=function(e){return function(n,t,r){var o=r.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var a,i,s,c,u,l,d,f;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=t(),i=a.user,s=i.account,c=i.session,u=a.contacts.models,l=Object(_.q)(a,"channelSendbirdUrl"),!s||!c){r.next=9;break}return d=de(e,u),r.next=7,Object(h.f)(o(),c,d,l);case 7:f=r.sent,f.body&&(Object(b.a)(),n(Object(O.goBack)()));case 9:case"end":return r.stop()}},r,this)}))}},me=function(e){return function(n,t,r){r.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var o,a,i,s,u,l,d,f,h,p,m,g;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t(),a=o.channels,i=a.invited,s=a.joined,u=o.platform.currentPage,l=y.e.INVITED,d=y.e.JOINED,u&&u.urlParams.userIds&&(f=u.urlParams.userIds.split(","),n(he(f,name))),!e){r.next=18;break}h=e===l?d:l,p=function(e){return o.channels[e.toLowerCase()].sortedKeys},m=p(e).length?e:h,g=c()(p(m)),r.t0=m,r.next=r.t0===l?12:r.t0===d?14:16;break;case 12:return n(Object(O.replace)(Object(C.a)(g,y.a.VIEW_REQUEST))),r.abrupt("break",17);case 14:return n(Object(O.replace)(Object(C.b)(g))),r.abrupt("break",17);case 16:n(Object(O.replace)(C.g));case 17:return r.abrupt("return");case 18:n(i.sortedKeys[0]?Object(O.replace)(Object(C.a)(i.sortedKeys[0],y.a.VIEW_REQUEST)):s.sortedKeys[0]?Object(O.replace)(Object(C.b)(s.sortedKeys[0])):Object(O.replace)(C.g));case 19:case"end":return r.stop()}},r,this)}))}},ge=Object(u.a)(D),ve=Object(u.a)(k),be=Object(u.a)(M),_e=Object(u.a)(H),Ee=Object(u.a)(F),ye=function(){return function(e,n,t){t.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e(Ce()),e(Oe())]);case 2:return r=n().channels.models,t.next=5,e(Ie(r));case 5:e(Ee()),e(se());case 7:case"end":return t.stop()}},t,this)}))}},Ie=function(e){return function(n){return N(A,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e&&function(){var t=[];for(var r in e)e[r].members.map(function(e){return t.push(e.id)});n(Object(d.p)(t))}();case 1:case"end":return t.stop()}},t,this)}))}},Ce=function(){return function(e,n){return N(A,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(E.a)(n()),e(ge()),t.next=4,m.a.getExistingChannels(y.e.INVITED,r).then(function(n){return n&&e(Ie(n.channels)),n}).then(function(n){n&&e(be(n))}).catch(function(e){e.message});case 4:case"end":return t.stop()}},t,this)}))}},Oe=function(){return function(e,n){return N(A,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(E.a)(n()),e(ve()),t.next=4,m.a.getExistingChannels(y.e.JOINED,r).then(function(n){n&&e(_e(n))}).catch(function(e){e.message});case 4:case"end":return t.stop()}},t,this)}))}},Ae=Object(u.a)(K),Ne=Object(u.a)("CHANNEL__BLOCK_FAILED"),Se=function(){return function(e,n,t){var r=t.apiContext;return N(A,void 0,void 0,regeneratorRuntime.mark(function t(){var o,a,i,s,u,d,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n(),a=Object(_.q)(o,"memberState"),(i=Object(_.m)(o))&&(i&&i.length>0)){t.next=5;break}throw new p("blockedUser",i);case 5:if(s=c()(i).id,u=Object(_.g)(o)){t.next=9;break}throw new p("currentChannel",u);case 9:if(d=u.channelId){t.next=12;break}throw new p("blockedChannelId",d);case 12:if(a){t.next=14;break}throw new p("blockedChannelType",a);case 14:return t.next=16,Object(l.a)(r(),s);case 16:f=t.sent,f&&f.ok?m.a.hideChannel().then(function(){return e(Ae({blockedChannelId:d,blockedUserId:s}))}).then(function(){return e(me(a))}):f&&e(Ne(f.error));case 18:case"end":return t.stop()}},t,this)}))}},Re=Object(u.a)(j),we=Object(u.a)(P),Te=(Object(u.a)("CHANNEL__MESSAGES_LOADED"),Object(u.a)(V)),je=function(e){return function(n,t){return N(A,void 0,void 0,regeneratorRuntime.mark(function r(){var o,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:o=t(),a=Object(_.q)(o,"memberState"),m.a.leaveChannel().then(function(){return n(Y(e))}).then(function(){return n(me(a))}).catch(function(e){return void e.message});case 3:case"end":return r.stop()}},r,this)}))}}},"./src/chat/actions/container.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"c",function(){return c}),t.d(n,"b",function(){return u});var r=t("./src/chat/constants/container.ts"),o=t("./src/lib/makeActionCreator/index.ts"),a=this,i=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},s="CONTAINER__SIZE_CHANGED",c=Object(o.a)(s),u=function(){return function(e,n,t){t.apiContext;return i(a,void 0,void 0,regeneratorRuntime.mark(function t(){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n().platform.currentPage){t.next=3;break}throw new Error("Could not open pop-out: current page not defined");case 3:window.open(o.url,"_blank","width=1024, height=768"),e(c(r.a.PILL));case 5:case"end":return t.stop()}},t,this)}))}}},"./src/chat/actions/message.ts":function(e,n,t){"use strict";function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,"u",function(){return g}),t.d(n,"a",function(){return v}),t.d(n,"c",function(){return E}),t.d(n,"o",function(){return I}),t.d(n,"v",function(){return C}),t.d(n,"m",function(){return O}),t.d(n,"j",function(){return N}),t.d(n,"t",function(){return S}),t.d(n,"h",function(){return R}),t.d(n,"r",function(){return T}),t.d(n,"b",function(){return j}),t.d(n,"n",function(){return U}),t.d(n,"k",function(){return x}),t.d(n,"w",function(){return L}),t.d(n,"d",function(){return k}),t.d(n,"p",function(){return M}),t.d(n,"i",function(){return H}),t.d(n,"s",function(){return F}),t.d(n,"l",function(){return B}),t.d(n,"x",function(){return K}),t.d(n,"g",function(){return z}),t.d(n,"e",function(){return Y}),t.d(n,"f",function(){return q}),t.d(n,"q",function(){return $});var o=t("./node_modules/react-router-redux/es/index.js"),a=t("./src/chat/singleton/SendbirdSDK.ts"),i=t("./src/lib/makeActionCreator/index.ts"),s=t("./src/chat/actions/tracking.ts"),c=t("./src/chat/constants/messages.ts"),u=t("./src/chat/endpoints/sendbird/index.ts"),l=t("./src/chat/endpoints/users/index.ts"),d=t("./src/chat/models/Message/index.ts"),f=t("./src/chat/selectors/channels.ts"),h=t("./src/chat/selectors/messages.ts"),p=this,m=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},g=(Object(i.a)("MESSAGE__REPORT"),function(e){return function(n,t,r){var a=r.apiContext;return m(p,void 0,void 0,regeneratorRuntime.mark(function t(){var r,i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.message,i=e.reason,s={channelUrl:r.channelSendbirdUrl,channelType:r.channelType,createdAt:r.createdAt,customData:r.data,customType:r.customType,messageBody:r.messageData.value,messageId:r.messageId,userId:r.sender.userId,fileUrl:"",reason:i,userNickname:r.sender.nickname},Object(l.a)(a(),s).then(function(){return n(Object(o.goBack)())});case 3:case"end":return t.stop()}},t,this)}))}}),v="MESSAGE__ADD_ONE",b=Object(i.a)(v),_=function(e,n){return function(t,o){return m(p,void 0,void 0,regeneratorRuntime.mark(function i(){var c,u;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:c=o(),u=Object(d.b)(n),a.a.addMessage(e,n).then(function(e){var n=Object(f.q)(c,"channelId"),o=r({},e.messageId,e);n&&(t(b({message:o,channelId:n,clientMessageId:u})),t(Object(s.o)(e.messageId)))}).catch(function(){return u&&t(A({clientMessageId:u,toggle:!0}))});case 3:case"end":return i.stop()}},i,this)}))}},E="MESSAGE__ADD_PENDING_ONE",y=Object(i.a)(E),I=function(e,n){return function(t,r){return m(p,void 0,void 0,regeneratorRuntime.mark(function o(){var a,i,s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:a=r(),i=Object(d.a)(a,e,n),i&&(s=n===c.b.TEXT?e:"",t(y(i)),t(_(s,i.data)));case 3:case"end":return o.stop()}},o,this)}))}},C=function(e){return function(n,t){return m(p,void 0,void 0,regeneratorRuntime.mark(function r(){var o,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:o=t(),a=Object(h.c)(o,e),a&&(n(A({clientMessageId:e,toggle:!1})),n(_(a.messageData.value,a.data)));case 3:case"end":return r.stop()}},r,this)}))}},O="MESSAGE__TOGGLE_PENDING_MESSAGE_ERROR",A=Object(i.a)(O),N="MESSAGE__REMOVE_PENDING_ONE",S=Object(i.a)(N),R="MESSAGE__RECEIVE_ADD_ONE",w=Object(i.a)(R),T=function(e){return function(n,t,o){o.apiContext;return m(p,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n(w(r({},e.messageId,e)));case 1:case"end":return t.stop()}},t,this)}))}},j="MESSAGE__ADD_LIST",P=Object(i.a)(j),U=function(e){return function(n,t,r){r.apiContext;return m(p,void 0,void 0,regeneratorRuntime.mark(function r(){var o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:o=Object(f.q)(t(),"channelId"),n(P(Object.assign({channelId:o},e)));case 2:case"end":return r.stop()}},r,this)}))}},x="MESSAGE__SET_MESSAGE_LIST_IS_LOADED",L=Object(i.a)(x),k="MESSAGE__DELETE_ONE",D=Object(i.a)(k),M=function(e){return function(n,t,r){r.apiContext;return m(p,void 0,void 0,regeneratorRuntime.mark(function r(){var i,s,c;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:i=t(),s=i.messages.models,c=s[e],a.a.deleteMessage(c).then(function(){return n(D(c.messageId))}).then(function(){return n(Object(o.goBack)())});case 4:case"end":return r.stop()}},r,this)}))}},H="MESSAGE__RECEIVE_DELETE_ONE",G=Object(i.a)(H),F=function(e){return function(n,t,r){r.apiContext;return m(p,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n(G(e));case 1:case"end":return t.stop()}},t,this)}))}},B="MESSAGE__SET_UNREAD_COUNT",V=Object(i.a)(B),K=function(e){return function(n,t,r){var o=r.apiContext;return m(p,void 0,void 0,regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if("number"==typeof e){r.next=11;break}if(!a.a.isConnected()){r.next=7;break}return r.next=4,a.a.getUnreadCount();case 4:e=r.sent,r.next=11;break;case 7:return r.next=9,Object(u.e)(o(),t().user.session);case 9:i=r.sent,e=parseInt(i.body.unread_count,10)||0;case 11:n(V({count:e}));case 12:case"end":return r.stop()}},r,this)}))}},z="MESSAGE__GET_PREVIOUS_MESSAGES_START",Y="MESSAGE__GET_PREVIOUS_MESSAGES_END",q="MESSAGE__GET_PREVIOUS_MESSAGES_ERROR",W=Object(i.a)(z),J=Object(i.a)(Y),Q=Object(i.a)(q),$=function(){return function(e,n,t){t.apiContext;return m(p,void 0,void 0,regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(f.q)(n(),"channelId"),e(W(r)),!r){t.next=5;break}return t.next=5,a.a.getPreviousMessages(c.c.USER).then(function(n){return e(J(Object.assign({channelId:r},n)))}).catch(function(){return e(Q(r))});case 5:case"end":return t.stop()}},t,this)}))}}},"./src/chat/actions/promo.ts":function(e,n,t){"use strict";function r(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,"a",function(){return f}),t.d(n,"b",function(){return p}),t.d(n,"d",function(){return m}),t.d(n,"c",function(){return v});var a=t("./src/lib/cache/index.ts"),i=t("./src/lib/constants/index.ts"),s=t("./src/lib/makeActionCreator/index.ts"),c=t("./src/chat/actions/channel.ts"),u=t("./src/chat/constants/promos.ts"),l=this,d=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},f="PROMO__DISPLAY_PROMO",h=Object(s.a)(f),p=function(e){return function(n,t,r){r.apiContext;return d(l,void 0,void 0,regeneratorRuntime.mark(function t(){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=Object(a.b)(u.b)||[],i=r.includes(e),n(h(o({},e,i)));case 3:case"end":return t.stop()}},t,this)}))}},m=function(e){return function(n,t,s){s.apiContext;return d(l,void 0,void 0,regeneratorRuntime.mark(function t(){var s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:s=Object(a.b)(u.b)||[],c=[e].concat(r(s)),Object(a.d)(u.b,c,i._45),n(h(o({},e,!0)));case 4:case"end":return t.stop()}},t,this)}))}},g=Object(s.a)("PROMO__SET_NSFW_WARNING"),v=function(){return function(e,n){return d(l,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e(g(!0)),e(m(u.a.NSFW_WARNING)),e(Object(c.s)());case 3:case"end":return n.stop()}},n,this)}))}}},"./src/chat/actions/sendbird/index.ts":function(e,n,t){"use strict";function r(e){return e?e.map(o).filter(function(e){return!!e}):[]}function o(e){if(e.contact_account_id||e.id)return{id:e.contact_account_id||i._3.ACCOUNT+"_"+e.id,name:e.name,lastInteraction:e.last_interaction,created:e.created_utc,linkKarma:e.link_karma,commentKarma:e.comment_karma,profileImg:e.profile_img,isNSFW:e.profile_over_18}}var a=t("./src/lib/cache/index.ts"),i=t("./src/lib/constants/index.ts"),s=t("./src/lib/makeActionCreator/index.ts"),c=t("./src/chat/endpoints/accounts/index.ts"),u=t("./src/chat/selectors/contacts.ts"),l=t("./src/chat/actions/tracking.ts"),d=t("./src/chat/endpoints/sendbird/index.ts");t.d(n,"b",function(){return p}),t.d(n,"a",function(){return m}),t.d(n,"g",function(){return g}),t.d(n,"f",function(){return v}),t.d(n,"i",function(){return _}),t.d(n,"e",function(){return E}),t.d(n,"j",function(){return C}),t.d(n,"c",function(){return O}),t.d(n,"d",function(){return A}),t.d(n,"h",function(){return R});var f=this,h=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},p="SENDBIRD__DEACTIVATE_SENDBIRD_SESSION",m="SENDBIRD__ACTIVATE_SENDBIRD_SESSION",g=Object(s.a)(p),v=(Object(s.a)(m),"SENDBIRD__SET_SENDBIRD_SESSION"),b=Object(s.a)(v),_=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(n,t,r){var o=r.apiContext;return h(f,void 0,void 0,regeneratorRuntime.mark(function r(){var s,c,u,l,f,h,p,m,v,_,E;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(s=t(),c=s.user,u=c.account,l=c.session,!l||!u){r.next=17;break}if(f=void 0,h=Object(a.c)(i.l.CHAT,"session",u.id),!(p=Object(a.b)(h))||!p.token){r.next=10;break}f=p,r.next=14;break;case 10:return r.next=12,Object(d.d)(o(),l);case 12:m=r.sent,m.ok&&(v=m.body,_=v.valid_until,E=v.sb_access_token,f={expires:_,token:E},Object(a.d)(h,f,new Date(_)));case 14:if(!f){r.next=17;break}return n(b(Object.assign({},f,{active:e}))),r.abrupt("return");case 17:n(g());case 18:case"end":return r.stop()}},r,this)}))}},E="SENDBIRD__SET_REDDIT_CONTACT_LIST",y=6*i.B,I=Object(s.a)(E),C=function(){return function(e,n,t){var o=t.apiContext;return h(f,void 0,void 0,regeneratorRuntime.mark(function t(){var s,c,u,l,f,h,p,m,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=n(),c=s.contacts.models,u=Object(a.c)(i.l.CHAT,"contacts",s.user.account.id),!(l=Object(a.b)(u))||2!==l.version){t.next=7;break}return e(I(l.data)),t.abrupt("return");case 7:if(f=n().user.session){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,Object(d.b)(o(),f,25);case 12:h=t.sent,p=r(h.body),m=p.map(function(e){return c[e.id]?c[e.id]:e}),g={version:2,data:m},Object(a.d)(u,g,y),e(I(m));case 18:case"end":return t.stop()}},t,this)}))}},O="SENDBIRD__IDENTIFY_CONTACT_BEGIN",A="SENDBIRD__IDENTIFY_CONTACT_END",N=Object(s.a)(O),S=Object(s.a)(A),R=function(e){return function(n,t,r){var a=r.apiContext;return h(f,void 0,void 0,regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:i=Object(u.b)(t(),e.username),i||(n(N({username:e.username})),Object(c.b)(a(),e.username).then(function(t){if(t.ok){var r=o(t.body.data);if(r)return n(S({username:e.username,contact:r,valid:!0}))}else n(Object(l.r)(e.username));n(S({username:e.username,valid:!1}))}));case 2:case"end":return r.stop()}},r,this)}))}}},"./src/chat/actions/theme.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return u});var r=t("./src/chat/constants/theme.ts"),o=t("./src/lib/makeActionCreator/index.ts"),a=this,i=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},s="THEME_CHANGED",c=Object(o.a)(s),u=function(){return function(e,n){return i(a,void 0,void 0,regeneratorRuntime.mark(function t(){var o,a,i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o=r.b.REDDIT,a=r.b.NIGHT,i=n().user.prefs.globalTheme,s=i===o?a:o,e(c({themeKey:s}));case 4:case"end":return t.stop()}},t,this)}))}}},"./src/chat/actions/tooltip.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return o});var r=t("./src/lib/makeActionCreator/index.ts"),o=Object(r.a)("TOOLTIP__DROPDOWN_TOGGLED")},"./src/chat/actions/tracking.ts":function(e,n,t){"use strict";var r=t("./node_modules/lodash/first.js"),o=t.n(r),a=t("./src/chat/constants/tracking.ts"),i=t("./src/telemetry/index.ts"),s=t("./src/chat/tracking/commonFields.ts"),c=function(e){Object(i.a)(Object.assign({noun:"beta_welcome",source:"messages_inbox",action:a.a.VIEW,chat:Object.assign({},Object(s.k)(e),Object(s.x)(e),Object(s.m)(e))},Object(s.v)(e)))},u=t("./src/chat/tracking/eventUtils.ts"),l=function(e){return Object(u.a)(e,function(n,t){Object(i.a)(Object.assign({noun:"chat_settings",source:"chat_settings",action:a.a.VIEW,correlationId:t,chat:Object.assign({},Object(s.q)(e),Object(s.l)(e),Object(s.o)(e),Object(s.d)(e),Object(s.b)(n))},Object(s.v)(e)))})},d=function(e,n){return Object(u.a)(e,function(n,t){Object(i.a)(Object.assign({noun:"chat_member_block",source:"chat_settings",action:a.a.SUBMIT,correlationId:t,chat:Object.assign({},Object(s.q)(e),Object(s.l)(e),Object(s.o)(e),Object(s.d)(e),Object(s.b)(n))},Object(s.v)(e)))},n)},f=function(e){Object(i.a)(Object.assign({noun:"view_member",source:"chat_settings",action:a.a.CLICK,chat:Object.assign({},Object(s.q)(e),Object(s.l)(e),Object(s.o)(e),Object(s.d)(e))},Object(s.v)(e)))},h=function(e){return Object(u.a)(e,function(n,t){Object(i.a)(Object.assign({noun:"chat_settings",source:"chat_settings",action:a.a.CLICK,correlationId:t,chat:Object.assign({},Object(s.q)(e),Object(s.l)(e),Object(s.o)(e),Object(s.d)(e),Object(s.b)(n))},Object(s.v)(e)))})},p=t("./src/chat/tracking/events/chatView.ts"),m=t("./src/chat/tracking/events/contactsList.ts"),g=t("./src/chat/tracking/events/invitationInbox.ts"),v=t("./src/chat/tracking/events/messagesInbox.ts"),b=function(e,n){Object(i.a)(Object.assign({noun:"create_chat",source:"user_profile",action:a.a.CLICK,chat:Object.assign({},Object(s.A)(e,n),Object(s.y)(e,n),Object(s.z)(e,n)),user:Object.assign({},Object(s.B)(e))},Object(s.v)(e)))},_=t("./src/chat/selectors/channels.ts"),E=t("./src/chat/selectors/contacts.ts");t.d(n,"e",function(){return C}),t.d(n,"o",function(){return O}),t.d(n,"t",function(){return A}),t.d(n,"p",function(){return N}),t.d(n,"u",function(){return S}),t.d(n,"n",function(){return R}),t.d(n,"m",function(){return w}),t.d(n,"l",function(){return T}),t.d(n,"d",function(){return j}),t.d(n,"r",function(){return P}),t.d(n,"q",function(){return U}),t.d(n,"f",function(){return x}),t.d(n,"b",function(){return L}),t.d(n,"a",function(){return k}),t.d(n,"i",function(){return D}),t.d(n,"j",function(){return M}),t.d(n,"k",function(){return H}),t.d(n,"h",function(){return G}),t.d(n,"c",function(){return F}),t.d(n,"g",function(){return B}),t.d(n,"s",function(){return V});var y=this,I=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},C=function(){return function(e,n,t){t.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(v.a)(n());case 1:case"end":return e.stop()}},e,this)}))}},O=function(e){return function(n,t,r){r.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Object(p.a)(t(),e);case 1:case"end":return n.stop()}},n,this)}))}},A=function(){return function(e,n,t){t.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(p.d)(n());case 1:case"end":return e.stop()}},e,this)}))}},N=function(e){return function(n,t,r){r.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Object(p.b)(t(),e);case 1:case"end":return n.stop()}},n,this)}))}},S=function(){return function(e,n,t){t.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l(n());case 1:case"end":return e.stop()}},e,this)}))}},R=function(){return function(e,n,t){t.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(_.m)(n()),t&&t.length&&(r=o()(t).id,d(n(),r));case 2:case"end":return e.stop()}},e,this)}))}},w=function(){return function(e,n,t){t.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n().platform.currentPage,t&&"invited"!==t.urlParams.action&&f(n());case 2:case"end":return e.stop()}},e,this)}))}},T=function(){return function(e,n){return I(y,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h(n());case 1:case"end":return e.stop()}},e,this)}))}},j=function(e){return function(n,t,r){r.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Object(m.c)(t(),e);case 1:case"end":return n.stop()}},n,this)}))}},P=function(e){return function(n,t,r){r.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=Object(E.b)(t(),e),r&&Object(m.f)(t(),r.id);case 2:case"end":return n.stop()}},n,this)}))}},U=function(e){return function(n,t,r){r.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o,a,i,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=t(),o=e&&e.filter(function(e){return e!==r.user.account.id}),a=o&&o[0],i=r.contacts.models[a],s=i&&i.name,c=Object(E.a)(t(),s),c&&Object(m.e)(t(),a,c);case 7:case"end":return n.stop()}},n,this)}))}},x=function(e,n){return function(t,r,o){o.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function t(){var o,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o=r(),a=e&&e.filter(function(e){return e!==o.user.account.id}),i=a&&a[0],Object(m.d)(r(),i,n);case 4:case"end":return t.stop()}},t,this)}))}},L=function(e){return function(n,t,r){r.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Object(m.b)(t(),e);case 1:case"end":return n.stop()}},n,this)}))}},k=function(){return function(e,n){return I(y,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(m.a)(n());case 1:case"end":return e.stop()}},e,this)}))}},D=function(){return function(e,n,t){t.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(g.c)(n());case 1:case"end":return e.stop()}},e,this)}))}},M=function(){return function(e,n,t){t.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(g.d)(n());case 1:case"end":return e.stop()}},e,this)}))}},H=function(){return function(e,n,t){t.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n().platform.currentPage,t&&"invited"===t.urlParams.action&&Object(g.e)(n());case 2:case"end":return e.stop()}},e,this)}))}},G=function(){return function(e,n,t){t.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(g.b)(n());case 1:case"end":return e.stop()}},e,this)}))}},F=function(){return function(e,n,t){t.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(g.a)(n());case 1:case"end":return e.stop()}},e,this)}))}},B=function(e){return function(n,t,r){r.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:b(t(),e);case 1:case"end":return n.stop()}},n,this)}))}},V=function(){return function(e,n,t){t.apiContext;return I(y,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c(n());case 1:case"end":return e.stop()}},e,this)}))}}},"./src/chat/actions/typingIndicator.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return u});var r=t("./src/lib/makeActionCreator/index.ts"),o=t("./src/chat/selectors/channels.ts"),a=this,i=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},s="TYPING_INDICATOR__UPDATE",c=Object(r.a)(s),u=function(e){var n=e.channelId,t=e.usernames;return function(e,r){return i(a,void 0,void 0,regeneratorRuntime.mark(function a(){var i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:i=Object(o.q)(r(),"channelId"),i===n&&e(c({usernames:t}));case 2:case"end":return a.stop()}},a,this)}))}}},"./src/chat/actions/user.ts":function(e,n,t){"use strict";function r(e){return{id:e.id,name:e.name,created:e.created_utc,linkKarma:e.link_karma,commentKarma:e.comment_karma,profileImg:e.profile_img,isNSFW:e.profile_over_18}}var o=t("./src/chat/actions/tracking.ts"),a=t("./src/lib/constants/index.ts"),i=function(e){var n={};for(var t in e)n[t]=r(Object.assign({id:t},e[t]));return n},s=function(e){var n=a._3.ACCOUNT+"_";return e.id.includes(n)?(e.id=e.id,e.id_without_prefix=e.id.substr(n.length)):(e.id_without_prefix=e.id,e.id=n+e.id),e},c=t("./src/lib/makeActionCreator/index.ts"),u=t("./src/chat/endpoints/accounts/index.ts"),l=t("./src/chat/endpoints/users/index.ts"),d=t("./src/chat/helpers/urls.ts"),f=t("./node_modules/react-router-redux/es/index.js");t.d(n,"a",function(){return m}),t.d(n,"c",function(){return g}),t.d(n,"b",function(){return v}),t.d(n,"d",function(){return b}),t.d(n,"k",function(){return _}),t.d(n,"l",function(){return C}),t.d(n,"o",function(){return O}),t.d(n,"i",function(){return A}),t.d(n,"f",function(){return N}),t.d(n,"p",function(){return j}),t.d(n,"e",function(){return P}),t.d(n,"j",function(){return x}),t.d(n,"h",function(){return L}),t.d(n,"n",function(){return k}),t.d(n,"g",function(){return D}),t.d(n,"m",function(){return M});var h=this,p=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},m="USER__ACCOUNT_FETCH_COMPLETED",g="USER__REDDAID_RECEIVED",v="USER__LOID_RECEIVED",b="USER__SESSION_TRACKER_RECEIVED",_=Object(c.a)(v),E=Object(c.a)("USER__ACCOUNT_FETCH_PENDING"),y=Object(c.a)(m),I=Object(c.a)("USER__ACCOUNT_FETCH_FAILED"),C=Object(c.a)(g),O=Object(c.a)(b),A=function(){return function(e,n,t){var r=t.apiContext;return p(h,void 0,void 0,regeneratorRuntime.mark(function t(){var o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n(),o.user.session){t.next=3;break}return t.abrupt("return");case 3:if(!o.user.account){t.next=5;break}return t.abrupt("return");case 5:return e(E()),t.next=8,Object(u.c)(r());case 8:a=t.sent,e(a.ok?y(s(a.body)):I(a.error));case 10:case"end":return t.stop()}},t,this)}))}},N="USER__USERS_FETCH_COMPLETED",S=Object(c.a)("USER__USERS_FETCH_PENDING"),R=Object(c.a)(N),w=Object(c.a)("USER__USERS_FETCH_FAILED"),T=function(e){return function(e,n,t){t.apiContext;return p(h,void 0,void 0,regeneratorRuntime.mark(function t(){var r,o,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n().channels,o=r.invited,a=r.joined,i=a[0]||o[0],e(w()),e(i?Object(f.push)(Object(d.b)(i)):Object(f.push)("/chat"));case 4:case"end":return t.stop()}},t,this)}))}},j=function(e){return function(n,t,r){var o=r.apiContext;return p(h,void 0,void 0,regeneratorRuntime.mark(function r(){var a,s,c,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=t().contacts.models,s=e.filter(function(e){return!a[e]}),s.length){r.next=4;break}return r.abrupt("return");case 4:return n(S(e)),r.next=7,Object(l.b)(o(),s);case 7:c=r.sent,c.ok?(u=i(c.body),n(R(u))):n(T(c.error));case 9:case"end":return r.stop()}},r,this)}))}},P="USERS__USERS_ADD_SELECTED",U=Object(c.a)(P),x=function(e){return function(n,t){return p(h,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n(U(e)),n(Object(o.d)(e));case 2:case"end":return t.stop()}},t,this)}))}},L="USERS__USERS_REMOVE_SELECTED",k=Object(c.a)(L),D="USERS__USERS_REMOVE_ALL_SELECTED",M=Object(c.a)(D)},"./src/chat/components/Counter/index.tsx":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function a(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}t.d(n,"a",function(){return h});var i=t("./node_modules/react/index.js"),s=(t.n(i),t("./bundled-modules/styled-components/styled-components.min.js")),c=t.n(s),u=t("./src/chat/helpers/styles/mixins/index.tsx"),l=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),d=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),f=c()(function(e){return d("span",{className:e.className},void 0,e.count)}).withConfig({componentId:"dbq90v-0"})(["","color: ",";font-size: 1em;padding-left: 15px;padding-right: 15px;text-align: right;"],u.d,function(e){return e.count<=0?e.theme.activity.text.warning:""}),h=function(e){function n(){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),l(n,[{key:"render",value:function(){return d(f,{count:this.props.count})}}]),n}(i.PureComponent)},"./src/chat/components/EmptyState/index.tsx":function(e,n,t){"use strict";var r=t("./src/chat/strings/index.ts"),o=t("./src/config.ts"),a=t("./node_modules/react/index.js"),i=(t.n(a),t("./bundled-modules/styled-components/styled-components.min.js")),s=t.n(i),c=t("./src/chat/controls/Button/index.tsx"),u=t("./src/chat/helpers/styles/components/index.tsx"),l=t("./src/chat/icons/svgs/ChatNew/index.tsx"),d=t("./src/chat/helpers/urls.ts"),f=t("./node_modules/react-router-dom/es/index.js"),h=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),p=s.a.div.withConfig({componentId:"s166672x-0"})(["display: inline-block;padding: 10px;"]),m=s.a.img.withConfig({componentId:"s166672x-1"})(["vertical-align: middle;display: inline-block;height: 180px;width: 180px;"]),g=s.a.div.withConfig({componentId:"s166672x-2"})(["vertical-align: middle;display: inline-block;max-width: 250px;padding: 20px 0 20px 30px;text-align: left;"]),v=s()(u.b).withConfig({componentId:"s166672x-3"})(["padding-bottom: 10px;font-weight: bold;"]),b=s()(c.a).withConfig({componentId:"s166672x-4"})(["font-size: 1em;height: 2.4em;margin-top: 1em;padding: 0.2em 2em;"]),_=h(l.a,{width:"1em"}),E=function(){return h(u.a,{},void 0,h(p,{},void 0,h(m,{src:o.a.assetPath+"/img/chat/empty-hero.png"}),h(g,{},void 0,h(v,{},void 0,Object(r.a)("en","app.chat.emptyState.title")),h(u.c,{},void 0,Object(r.a)("en","app.chat.emptyState.main"),h(f.Link,{to:Object(d.b)("create")},void 0,h(b,{primary:!0},void 0,_," ",Object(r.a)("en","app.chat.actions.new")))))))};n.a=E},"./src/chat/components/FrameHeader/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),o=(t.n(r),t("./node_modules/react-redux/es/index.js")),a=t("./node_modules/reselect/lib/index.js"),i=(t.n(a),t("./bundled-modules/styled-components/styled-components.min.js")),s=t.n(i),c=t("./src/chat/helpers/styles/mixins/index.tsx"),u=t("./src/chat/strings/index.ts"),l=t("./src/lib/constants/index.ts"),d=t("./src/chat/constants/channels.ts"),f=t("./src/chat/selectors/channels.ts"),h=t("./src/chat/selectors/contacts.ts"),p=t("./src/chat/selectors/experiments.ts"),m=t("./src/chat/selectors/platform.ts"),g=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),v=s.a.h1.withConfig({componentId:"s1u2n6wo-0"})(["",";font-weight: bold;line-height: 1.5em;display: inline-block;"],c.d),b=s()(function(e){return g("span",{className:e.className},void 0,e.count)}).withConfig({componentId:"s1u2n6wo-1"})(["background: ",";position: relative;display: inline-block;box-sizing: border-box;border-radius: 5em;min-width: 1.6em;min-height: 1.6em;padding: 0 0.45em;margin-left: 7px;top: -1px;font-size: .7em;font-weight: bold;line-height: 1.6em;text-align: center;color: ",";"],function(e){return e.theme.layout.header.counterBg},function(e){return e.theme.layout.header.counterText}),_=s()(function(e){return g("span",{className:e.className},void 0,e.children)}).withConfig({componentId:"s1u2n6wo-2"})(["",";",";font-size: 0.75em;padding-left: 0.6875em;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;"],c.d,function(e){return e.warning?"color: "+function(e){return e.theme.activity.text.warning}:""}),E=function(e){var n=e.channelAction,t=e.groupChatEnabled,r=e.memberCount,o=e.selectedUsersCount,a=n===d.a.INVITE_MEMBERS?r+o:o+1;if(a<d.d&&t){var i=(d.d-a).toString();return Object(u.a)("en","app.chat.channels.addGroupMembers").replace("%0",i)}if(a===d.d)return Object(u.a)("en","app.chat.channels.maxGroupSize")+"\n      ("+(a+1)+")"},y=function(e,n,t){return g("div",{},void 0,g(v,{className:t.className},void 0,e),g(_,{className:t.className,warning:n===d.d},void 0,E(t)))},I=function(e){return g(v,{className:e.className},void 0,Object(u.a)("en","app.layout.header.title"),(e.count||0)>0&&g(b,{count:e.count}))},C=function(e,n){return g(v,{className:e.className},void 0,n+" "+Object(u.a)("en","app.chat.channels.groupMembers"))},O=function(e){return y(Object(u.a)("en","app.chat.channels.createGroup"),e.selectedUsersCount,e)},A=function(e){var n=e.memberCount+e.selectedUsersCount;return y(Object(u.a)("en","app.chat.channels.addToGroup"),n,e)},N=Object(a.createStructuredSelector)({channelAction:m.a,memberCount:function(e){return Object(f.q)(e,"memberCount")},selectedUsersCount:h.i,groupChatEnabled:p.a,currentChannel:f.g}),S=Object(o.connect)(N),R=function(e){switch(e.routeName){case l._13.CHAT_MEMBERS:var n=e.currentChannel&&e.currentChannel.members.length;return n?C(e,n):null;case l._13.CHAT_CREATE:return O(e);case l._13.CHAT_INVITE:return A(e);default:return I(e)}};n.a=S(R)},"./src/chat/components/FrameNav/index.tsx":function(e,n,t){"use strict";var r=t("./src/config.ts"),o=t("./node_modules/react/index.js"),a=t.n(o),i=t("./node_modules/react-redux/es/index.js"),s=t("./node_modules/react-router-redux/es/index.js"),c=t("./node_modules/reselect/lib/index.js"),u=t("./bundled-modules/styled-components/styled-components.min.js"),l=t.n(u),d=t("./src/chat/actions/container.ts"),f=t("./src/chat/actions/tracking.ts"),h=t("./src/chat/constants/container.ts"),p=t("./src/chat/helpers/dom.ts"),m=t("./src/chat/helpers/urls.ts"),g=t("./src/chat/selectors/app.ts"),v=t("./src/chat/strings/index.ts"),b=t("./src/lib/constants/index.ts"),_=t("./src/chat/controls/Button/index.tsx"),E=t("./src/chat/controls/Svg/index.tsx"),y=t("./src/chat/icons/svgs/ChatNew/index.tsx"),I=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),C=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},O=I("path",{d:"M8.622 10.616c.078.08.14.175.183.28.044.105.07.218.07.332 0 .237-.087.456-.253.62-.167.168-.385.255-.622.255-.236 0-.455-.087-.62-.254-.167-.166-.255-.385-.255-.622 0-.114.027-.227.07-.332.044-.105.105-.2.184-.28.087-.088.174-.15.288-.193.324-.13.71-.052.954.193zm-.205-6.242c1.595 0 2.466.807 2.466 1.92 0 .976-.556 1.448-1.238 1.816-.615.317-.83.518-.904.898 0 .004-.034.207-.036.21-.034.126-.087.244-.18.336-.14.14-.323.21-.524.21-.097 0-.192-.017-.29-.052-.087-.035-.165-.088-.235-.158-.14-.14-.22-.333-.22-.533 0-.11.02-.188.074-.348.16-.472.55-.896 1.056-1.17.577-.327.84-.558.84-1.07 0-.42-.357-.715-.987-.715-.496 0-.996.218-1.39.52-.26.2-.62.202-.858-.02l-.05-.05c-.313-.29-.27-.787.075-1.04.603-.444 1.394-.753 2.4-.753zM8 13.25c-2.895 0-5.25-2.355-5.25-5.25S5.105 2.75 8 2.75 13.25 5.105 13.25 8 10.895 13.25 8 13.25M8 1C4.14 1 1 4.14 1 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7"}),A=function(e){return a.a.createElement(E.a,C({},e,{viewBox:"0 0 16 16"}),O)},N=t("./src/chat/icons/svgs/NavClose/index.tsx"),S=t("./src/chat/icons/svgs/NavMinimize/index.tsx"),R=t("./src/chat/icons/svgs/NavPopout/index.tsx"),w=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),T=l()(_.c).withConfig({componentId:"s1r424n8-0"})(["width: 1em;height: 1em;margin: 0 0.3em;padding: 0;box-sizing: content-box;border: 0;"," {vertical-align: unset;}"],E.a),j=Object(c.createStructuredSelector)({isReady:g.c,enableClose:function(e){return!(!e.user.account||!e.user.account.features.chat_menu_notification)}}),P=function(e,n){return{createChannel:function(){e(Object(s.push)(Object(m.b)("create"))),e(Object(f.e)())},close:function(){return e(Object(d.c)(h.a.HIDDEN))},popout:function(){return e(Object(d.b)())},expand:function(){return e(Object(d.c)(h.a.EMBED))},minimize:function(){return e(Object(d.c)(h.a.PILL))}}},U=Object(i.connect)(j,P),x=w(y.a,{}),L=w(A,{}),k=w(R.a,{}),D=w(S.a,{}),M=w(N.a,{}),H=function(e){return w("nav",{className:e.className},void 0,e.isReady&&e.containerSize!==h.a.HIDDEN&&e.containerSize!==h.a.PILL&&e.routeName!==b._13.CHAT_CREATE&&w(T,{onClick:Object(p.b)(e.createChannel),title:Object(v.a)("en","app.layout.header.newChat")},void 0,x),e.isReady&&e.containerSize!==h.a.HIDDEN&&e.containerSize!==h.a.PILL&&w(T,{href:r.a.redditHelpUrl.chat,title:Object(v.a)("en","app.layout.header.help")},void 0,L),e.isReady&&e.containerSize!==h.a.FULL&&w(T,{onClick:Object(p.b)(e.popout),title:Object(v.a)("en","app.layout.header.popout")},void 0,k),e.isReady&&e.containerSize===h.a.EMBED&&w(T,{onClick:Object(p.b)(e.minimize),title:Object(v.a)("en","app.layout.header.minimize")},void 0,D),e.enableClose&&e.containerSize!==h.a.FULL&&w(T,{onClick:Object(p.b)(e.close),title:Object(v.a)("en","app.layout.header.close")},void 0,M))};n.a=U(H)},"./src/chat/components/LongList/index.tsx":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function a(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}t.d(n,"a",function(){return h});var i=t("./node_modules/react/index.js"),s=t.n(i),c=t("./bundled-modules/styled-components/styled-components.min.js"),u=t.n(c),l=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),d=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),f=u.a.div.withConfig({componentId:"s1kzxq2y-0"})(["overflow-y: auto;overflow-x: hidden;height: 100%;"]),h=function(e){function n(){r(this,n);var e=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.isBatchLoading=!1,e.isScrolling=!1,e.addScrollListener=e.addScrollListener.bind(e),e.removeScrollListener=e.removeScrollListener.bind(e),e.onScroll=e.onScroll.bind(e),e.scrollCapture=e.scrollCapture.bind(e),e.scrollRelease=e.scrollRelease.bind(e),e}return a(n,e),d(n,[{key:"componentDidMount",value:function(){this.scrollCapture(),this.props.autoScrollBottom&&!this.isScrolling&&(this.list.scrollTop=this.list.scrollHeight)}},{key:"componentWillUpdate",value:function(){var e=this.list,n=e.clientHeight,t=e.scrollTop,r=e.scrollHeight;this.isScrolling=t+n!==r}},{key:"componentDidUpdate",value:function(){var e=this.list,n=e.scrollHeight,t=e.scrollTop,r=this.props.autoScrollBottom;r&&this.isScrolling&&this.isBatchLoading&&(this.list.scrollTop=t+(n-this.previousScrollHeight),this.isBatchLoading=!1),r&&!this.isScrolling&&(this.list.scrollTop=n)}},{key:"componentWillUnmount",value:function(){this.scrollRelease()}},{key:"addScrollListener",value:function(e,n){e.addEventListener("wheel",n,!1)}},{key:"removeScrollListener",value:function(e,n){e.removeEventListener("wheel",n,!1)}},{key:"onScroll",value:function(e){var n=this.list,t=n.clientHeight,r=n.scrollHeight,o=n.scrollTop,a=this.props,i=a.autoScrollBottom,s=a.loadMoreRows,c=a.threshold,u=e.deltaY,l=u>0;if(void 0!==c&&s){var d=i&&o<=c,f=!i&&o>=r-t-c;(d||f)&&(this.isBatchLoading=!0,this.previousScrollHeight=r,s())}l&&u>r-t-o?(this.list.scrollTop=r,e.preventDefault()):!l&&-u>o&&(this.list.scrollTop=0,e.preventDefault())}},{key:"scrollCapture",value:function(){this.list&&this.addScrollListener(this.list,this.onScroll)}},{key:"scrollRelease",value:function(){this.list&&this.removeScrollListener(this.list,this.onScroll)}},{key:"resetScrollPosition",value:function(){this.props.autoScrollBottom?this.list.scrollTop=this.list.scrollHeight:this.list.scrollTop=0}},{key:"render",value:function(){var e=this,n=this.props,t=n.children,r=n.className;return l(f,{innerRef:function(n){return e.list=n},className:r},void 0,t)}}]),n}(s.a.Component)},"./src/chat/components/LongListItem/index.tsx":function(e,n,t){"use strict";var r=t("./bundled-modules/styled-components/styled-components.min.js"),o=t.n(r);n.a=o.a.li.withConfig({componentId:"s1c3ndu3-0"})(["cursor: pointer;list-style: none;&:hover {background-color: ",";}"],function(e){return e.theme.chat.list.item.hoverBg})},"./src/chat/components/MessageListHeader/index.tsx":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function a(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function c(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function u(e,n){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function l(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function d(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function f(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var h,p=t("./node_modules/react/index.js"),m=t("./bundled-modules/styled-components/styled-components.min.js"),g=t.n(m),v=t("./node_modules/lodash/noop.js"),b=t.n(v),_=t("./src/config.ts"),E=t("./node_modules/react-redux/es/index.js"),y=t("./node_modules/react-router-redux/es/index.js"),I=t("./node_modules/reselect/lib/index.js"),C=t("./src/chat/constants/channels.ts");!function(e){e.BLOCK="block",e.ADD_TO_GROUP="addToGroup",e.LEAVE="leave",e.PROFILE="profile",e.VIEW_MEMBERS="members",e.RENAME_GROUP="renameGroup"}(h||(h={}));var O=h,A=O.ADD_TO_GROUP,N=O.BLOCK,S=O.LEAVE,R=O.PROFILE,w=O.VIEW_MEMBERS,T=O.RENAME_GROUP,j={directChannel:[R,N],groupJoinedChannel:[T,w,A,S]},P=t("./src/chat/helpers/urls.ts"),U=t("./src/chat/strings/index.ts"),x=t("./src/higherOrderComponents/asTooltip.tsx"),L=t("./src/chat/actions/channel.ts"),k=t("./src/chat/actions/tooltip.ts"),D=t("./src/chat/actions/tracking.ts"),M=t("./src/chat/controls/Button/index.tsx"),H=t("./src/chat/controls/Dropdown/index.tsx"),G=t("./src/chat/helpers/styles/functions/index.tsx"),F=t("./src/chat/helpers/styles/mixins/index.tsx"),B=t("./src/reddit/layout/row/Inline/index.tsx"),V=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),K=g.a.div.withConfig({componentId:"s14sujjb-0"})(["display: inline-block;vertical-align: middle;margin-right: 2px;width: 26px;"]),z=g.a.span.withConfig({componentId:"s14sujjb-1"})(["","display: inline-block;vertical-align: middle;"],F.d),Y=Object(m.withTheme)(function(e){return V(B.a,{id:e.id,className:e.className,onClick:e.onClick?e.onClick:function(){},role:"button"},void 0,e.children&&V(K,{},void 0,e.children),V(z,{},void 0,e.displayText))}),q=g()(Y).withConfig({componentId:"s14sujjb-2"})(["color: ",";font-weight: ",";display: block;white-space: nowrap;text-transform: capitalize;",";background-color: ",";border: 1px solid ",";border-bottom: 0;&:last-of-type { border-bottom: 1px solid ",";}&:first-of-type { border-bottom: 0; }&:hover {background-color: ",";border-color: ",";","{color: ",";}}"],function(e){return e.isSelected?e.theme.activity.button.active:e.theme.activity.text.contrast},function(e){return e.isSelected?"bold":"normal"},Object(G.b)(),function(e){return e.theme.layout.body},function(e){return e.theme.post.separator},function(e){return e.theme.post.separator},function(e){return e.theme.activity.button.active},function(e){return e.theme.activity.button.active},z,function(e){return e.theme.activity.button.text}),W=t("./src/chat/icons/svgs/MenuOverflow/index.tsx"),J=t("./src/chat/models/Channel/index.ts"),Q=t("./src/chat/selectors/channels.ts"),$=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),Z=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),X="MessageListHeader--Select",ee=g()(Object(x.a)(H.a)).withConfig({componentId:"s11428mm-0"})(["left: auto !important;right: 0;"]),ne=g()(q).withConfig({componentId:"s11428mm-1"})(["border: none;cursor: pointer;&:hover {background-color: transparent;}"]),te=g()(q).withConfig({componentId:"s11428mm-2"})(["cursor: pointer;padding: .7em 1em;min-width: 6em;"]),re=g()(M.c).withConfig({componentId:"s11428mm-3"})(["width: 1.6em;height: 1.6em;padding: 0.1em 0.3em 0.2em;"]),oe=Z(re,{},void 0,Z(W.a,{})),ae=function(e){return e.menu?Z(ne,{displayText:"",id:X,onClick:e.onClick},void 0,oe):null},ie=Object(I.createStructuredSelector)({channelId:function(e){return Object(Q.q)(e,"channelId")},dropdownIsOpen:function(e){return e.tooltipId===X},selectedChannel:function(e){return Object(Q.n)(e)}}),se=function(e,n){return{onOpenDropdown:function(){e(Object(k.a)({tooltipId:X})),e(Object(D.u)())},onInviteToChannel:function(n){return e(Object(y.push)(Object(P.a)(n,C.a.INVITE_MEMBERS_CONFIRMATION)))},onMuteChannel:function(){return e(Object(L.E)())},onBlockChannel:function(n){return e(Object(y.push)(Object(P.a)(n,C.a.BLOCK)))},onLeaveChannel:function(n){return e(Object(y.push)(Object(P.a)(n,C.a.LEAVE)))},onViewMembers:function(n){return e(Object(y.push)(Object(P.a)(n,C.a.VIEW_MEMBERS)))},onUpdateChannelName:function(n){return e(Object(L.J)(n))},onViewProfile:function(){e(Object(D.k)()),e(Object(D.m)()).then(function(){window.open(_.a.redditUrl+"/user/"+(n.inviterName||n.name))})}}},ce=Object(E.connect)(ie,se),ue=function(e){function n(){r(this,n);var e=o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return e.onOptionClick=function(n){switch(n){case h.ADD_TO_GROUP:return e.props.onInviteToChannel(e.props.channelId);case h.BLOCK:return e.props.onBlockChannel(e.props.channelId);case h.LEAVE:return e.props.onLeaveChannel(e.props.channelId);case h.PROFILE:return e.props.onViewProfile();case h.RENAME_GROUP:return e.props.toggleChannelNameInput();case h.VIEW_MEMBERS:return e.props.onViewMembers(e.props.channelId);default:return b.a}},e}return a(n,e),$(n,[{key:"render",value:function(){var e=this,n=this.props,t=n.dropdownIsOpen,r=n.menu,o=n.onOpenDropdown;return[Z(ae,{menu:!!r,onClick:o}),Z(ee,{isOpen:t,tooltipId:X},void 0,this.getDropdownGroupOptions.map(function(n){return Z(te,{displayText:Object(U.a)("en","app.chat.message.dropdown.options."+n),isSelected:!1,onClick:function(){return e.onOptionClick(n)}})}))]}},{key:"getDropdownGroupOptions",get:function(){var e=this.props.selectedChannel;return e&&e.type===J.a.Group?j.groupJoinedChannel:j.directChannel}}]),n}(p.Component),le=ce(ue),de=t("./src/chat/components/Counter/index.tsx"),fe=t("./src/chat/controls/ChannelNameInput/index.tsx"),he=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),pe=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),me=u(["\n  margin-right: 0.46875em;\n  font-size: 0.9375em;\n"],["\n  margin-right: 0.46875em;\n  font-size: 0.9375em;\n"]),ge=u(["\n  margin-left: 0.46875em;\n  font-size: 0.9375em;\n"],["\n  margin-left: 0.46875em;\n  font-size: 0.9375em;\n"]),ve=g()(function(e){return pe("div",{className:e.className},void 0,e.children)}).withConfig({componentId:"s1kr8w06-0"})(["","display: flex;align-items: center;width: 100%;overflow: hidden;border-bottom: 1px solid;position: absolute;left: 0;background-color: ",";z-index: 1;max-height: ",";top: calc(100% + 1px);border-color: ",";transition: all 0.3s;"],F.d,function(e){return e.theme.layout.body},function(e){return e.isShown?"6.250em":"0"},function(e){return e.isShown?e.theme.layout.colsBorder:"transparent"}),be=g.a.div.withConfig({componentId:"s1kr8w06-1"})(["width: 100%;padding: 0 16px;margin-top: 0.859375em;"]),_e=g.a.span.withConfig({componentId:"s1kr8w06-2"})(["display: flex;justify-content: flex-end;width: 100%;padding-top: 5px;"]),Ee=M.a.extend(me),ye=M.a.extend(ge),Ie=function(e,n){return{onUpdateChannelName:function(n){return e(Object(L.J)(n))}}},Ce=Object(E.connect)(void 0,Ie),Oe=function(e){function n(e){i(this,n);var t=s(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleChannelNameInput=function(e){return t.setState({groupName:e})},t.submitGroupName=function(){t.props.onUpdateChannelName(t.state.groupName.trim()),t.props.hideChannelNameInput()},t.state={groupName:t.props.name||""},t}return c(n,e),he(n,[{key:"componentWillReceiveProps",value:function(e){this.props.channelId!==e.channelId&&(this.setState(function(n){return{groupName:e.name}}),this.props.hideChannelNameInput()),this.props.name===e.name||this.props.isShown||this.setState(function(n){return{groupName:e.name}})}},{key:"render",value:function(){var e=this.props,n=e.hideChannelNameInput,t=e.isShown;return pe(ve,{isShown:t},void 0,pe(be,{},void 0,pe(fe.a,{handleChannelNameInput:this.handleChannelNameInput,placeholder:Object(U.a)("en","app.chat.channels.groupRename"),withBackground:!0,value:this.state.groupName},void 0,pe(de.a,{count:this.getAvailableCharacters})),pe(_e,{},void 0,pe(Ee,{secondaryNoBorder:!0,onClick:n},void 0,Object(U.a)("en","app.button.cancel")),pe(ye,{primaryNoBorder:!0,disabled:this.getAvailableCharacters<0||this.getAvailableCharacters>=C.c,onClick:this.submitGroupName},void 0,Object(U.a)("en","app.button.save")))))}},{key:"getAvailableCharacters",get:function(){return C.c-this.state.groupName.length}}]),n}(p.Component),Ae=Ce(Oe),Ne=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),Se=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),Re=g.a.div.withConfig({componentId:"s1lpwew0-0"})(["align-items: center;border-bottom: 1px solid ",";display: flex;flex: 0 0 auto;justify-content: space-between;height: 1.8em;padding: 0px .75em 0px 1em;position: relative;"],function(e){return e.theme.layout.colsBorder}),we=g.a.h4.withConfig({componentId:"s1lpwew0-1"})(["color: ",";font-size: 0.8em;line-height: 1.12em;font-weight: bold;width: 100%;-webkit-font-smoothing: antialiased;"],function(e){return e.theme.activity.text.regular}),Te=function(e){function n(e){l(this,n);var t=d(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.toggleChannelNameInput=function(){return t.setState(function(e){return{isRenameGroupShown:!e.isRenameGroupShown}})},t.hideChannelNameInput=function(){return t.setState(function(e){return{isRenameGroupShown:!1}})},t.state={isRenameGroupShown:!1},t}return f(n,e),Se(n,[{key:"componentWillReceiveProps",value:function(e){this.props.channelId!==e.channelId&&this.hideChannelNameInput()}},{key:"render",value:function(){var e=this.state.isRenameGroupShown;return Ne(Re,{className:this.props.className},void 0,Ne(we,{},void 0,this.props.name),Ne(le,{inviterName:this.props.inviterName,menu:this.props.menu,toggleChannelNameInput:this.toggleChannelNameInput}),this.props.renameGroup&&Ne(Ae,{channelId:this.props.channelId,name:this.props.name,isShown:e,hideChannelNameInput:this.hideChannelNameInput}))}}]),n}(p.Component);n.a=Te},"./src/chat/components/OverlayCreateChannel/index.tsx":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function a(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function c(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function u(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function l(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function d(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function f(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function h(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function p(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var m=t("./node_modules/lodash/uniqBy.js"),g=t.n(m),v=t("./node_modules/lodash/noop.js"),b=t.n(v),_=t("./node_modules/react/index.js"),E=t.n(_),y=t("./node_modules/react-redux/es/index.js"),I=t("./node_modules/react-router-redux/es/index.js"),C=t("./node_modules/reselect/lib/index.js"),O=t("./bundled-modules/styled-components/styled-components.min.js"),A=t.n(O),N=t("./src/chat/actions/channel.ts"),S=t("./src/chat/actions/sendbird/index.ts"),R=t("./src/chat/actions/tracking.ts"),w=t("./src/chat/actions/user.ts"),T=t("./src/chat/components/Counter/index.tsx"),j=t("./src/chat/components/LongList/index.tsx"),P=t("./src/chat/components/LongListItem/index.tsx"),U=t("./node_modules/lodash/last.js"),x=t.n(U),L=t("./node_modules/react-dom/index.js"),k=t("./src/chat/constants/keys.ts"),D=t("./src/chat/helpers/dom.ts"),M=t("./src/chat/helpers/styles/functions/index.tsx"),H=t("./src/chat/helpers/styles/mixins/index.tsx"),G=t("./src/chat/strings/index.ts"),F=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),B=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),V=A()(j.a).withConfig({componentId:"f41d28-0"})(["","display: flex;min-height: 3em;max-height: 6.71875em;border-bottom: 1px solid ",";"],H.d,function(e){return e.theme.layout.colsBorder}),K=A.a.span.withConfig({componentId:"f41d28-1"})(["padding: 0.725em 0.1875em 0 1em;"]),z=A.a.span.withConfig({componentId:"f41d28-2"})(["display: flex;flex-wrap: wrap;width: 100%;"]),Y=A.a.input.withConfig({componentId:"f41d28-3"})(["flex: 1 1;min-width: 0;outline: none;padding: 0.125em;"]),q=A.a.span.withConfig({componentId:"f41d28-4"})(["align-self: start;border-radius: 3px;cursor: pointer;margin: 0.2734375em;padding: 0.390625em;outline: 0;white-space: nowrap;",";color: ",";background-color: ",";&:active,&:focus {color: ",";background-color: ",";}"],Object(M.b)("all","0.1s"),function(e){return e.theme.activity.input.color},function(e){return e.theme.activity.input.ownerBg},function(e){return e.theme.activity.input.focusColor},function(e){return e.theme.activity.input.focusBg}),W=function(e){function n(e){r(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.bubbleRefs={},t.searchBarInputRef={},t.timeoutToken=null,t.onBubbleKey=function(e){return function(n){switch(n.key){case k.d:case k.c:return Object(L.findDOMNode)(t.searchBarInputRef).focus(),t.props.onUnselect(e.id);case k.a:var r=n.target;if(r.previousElementSibling){r.previousElementSibling.focus()}break;case k.b:var o=n.target;if(o.nextElementSibling){o.nextElementSibling.focus()}}}},t.onBubbleKey=t.onBubbleKey.bind(t),t.onFilterChange=t.onFilterChange.bind(t),t.stopEnter=t.stopEnter.bind(t),t.searchKeyHandler=t.searchKeyHandler.bind(t),t}return a(n,e),B(n,[{key:"stopEnter",value:function(e){e.key===k.e&&e.preventDefault()}},{key:"onFilterChange",value:function(e){this.props.onFilterContacts(e.currentTarget.value)}},{key:"searchKeyHandler",value:function(e){var n=this.props,t=n.onFilterContacts,r=n.onIdentifyContact,o=n.onIdentifyContactTimeout,a=e.currentTarget,i=function(){return a.value};switch(this.timeoutToken&&clearTimeout(this.timeoutToken),this.timeoutToken=setTimeout(function(){i()&&r(i())},o),e.key){case k.e:return r(function(){return a.id}());case k.a:case k.d:case k.c:if(0===i().length){var s=x()(this.props.selectedContacts);s&&s.name&&Object(L.findDOMNode)(this.bubbleRefs[s.name]).focus()}}return t(i())}},{key:"render",value:function(){var e=this,n=this.props,t=n.filter,r=n.innerRef,o=n.resetFilter,a=n.selectedContacts,i=n.onFilterReset,s=o?"":t;return F(V,{autoScrollBottom:!0},void 0,F(K,{},void 0,Object(G.a)("en","app.chat.contactList.to")),F(z,{},void 0,a&&a.length>0&&a.map(function(n,t){return E.a.createElement(q,{key:"selected-contact-"+t,tabIndex:0,onKeyDown:Object(D.a)(e.onBubbleKey(n)),ref:function(t){e.bubbleRefs[n.name]=t}},n.name)}),E.a.createElement(Y,{key:"search-bar",type:"text",autoFocus:!0,value:s,onFocus:i,onChange:this.onFilterChange,onKeyDown:this.stopEnter,onKeyUp:this.searchKeyHandler,ref:function(n){e.searchBarInputRef=n},innerRef:function(e){return r(e)}})))}}]),n}(E.a.Component),J=W;W.defaultProps={onIdentifyContactTimeout:1e3};var Q=t("./src/chat/controls/Checkbox/index.tsx"),$=t("./src/chat/icons/Userpic/index.tsx"),Z=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),X=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),ee=A()(Q.a).withConfig({componentId:"s1kgoqxu-0"})(["padding: 0.625em 0;width: 100%;&:focus,&:hover {background-color: ",";}"],function(e){return e.theme.chat.list.item.hoverBg}),ne=A()($.a).withConfig({componentId:"s1kgoqxu-1"})(["display: inline-block;margin-right: 0.625em;height: 1.875em;width: 1.875em;"]),te=A.a.span.withConfig({componentId:"s1kgoqxu-2"})(["display: inline-block;vertical-align: middle;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;width: calc(100% - 3.2em);"]),re=function(e){function n(){i(this,n);var e=s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return e.CONTACT_FORM_NAME="contactForm",e}return c(n,e),X(n,[{key:"render",value:function(){var e=this.props,n=e.contact,t=n.id,r=n.name,o=e.formName,a=e.isChecked,i=e.onChange;return Z(ee,{type:"checkbox",name:o,value:r,onChange:i,checked:a(t),id:t},void 0,Z(ne,{userId:t}),Z(te,{},void 0,r))}}]),n}(_.Component),oe=re,ae=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),ie=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),se=A.a.span.withConfig({componentId:"s1a3mby8-0"})(["display: flex;align-items: center;justify-content: space-between;height: 2.8em;padding: 0 0.9375em;opacity: 0.6;"]),ce=A.a.span.withConfig({componentId:"s1a3mby8-1"})(["","display: flex;padding-right: 1em;min-width: 0;"],H.d),ue=A()($.a).withConfig({componentId:"s1a3mby8-2"})(["margin-right: 0.625em;height: 1.875em;min-width: 1.875em;"]),le=A.a.span.withConfig({componentId:"s1a3mby8-3"})(["overflow: hidden;white-space: nowrap;text-overflow: ellipsis;"]),de=A.a.span.withConfig({componentId:"s1a3mby8-4"})(["",""],H.d),fe=function(e){function n(){return u(this,n),l(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,e),ie(n,[{key:"render",value:function(){var e=this.props,n=e.contact,t=n.id,r=n.name,o=e.context;return ae(se,{},void 0,ae(ce,{},void 0,ae(ue,{userId:t}),ae(le,{},void 0,r)),ae(de,{},void 0,o))}}]),n}(_.Component),he=fe,pe=t("./src/chat/controls/ChannelNameInput/index.tsx"),me=t("./src/chat/controls/ModalControlBar/index.tsx"),ge=t("./src/chat/controls/Overlay/index.tsx"),ve=t("./src/chat/constants/channels.ts"),be=t("./src/chat/selectors/channels.ts"),_e=t("./src/chat/selectors/contacts.ts"),Ee=t("./src/chat/selectors/experiments.ts"),ye=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),Ie=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),Ce=A.a.div.withConfig({componentId:"s1czy2v1-0"})(["flex: 1 1 auto;align-items: center;"]),Oe=A()(Q.a).withConfig({componentId:"s1czy2v1-1"})(["padding: 10px 0;width: 100%;&:focus,&:hover {background-color: ",";}"],function(e){return e.theme.chat.list.item.hoverBg}),Ae=A()(j.a).withConfig({componentId:"s1czy2v1-2"})(["height: 100%;max-height: calc(100vh - 7.313em);"]),Ne=A()(P.a).withConfig({componentId:"s1czy2v1-3"})(["border-bottom: 1px solid ",";&:last-of-type { border-bottom: 0; }"],function(e){return e.theme.layout.colsBorder}),Se=A()(Ne).withConfig({componentId:"s1czy2v1-4"})(["&:hover {background: initial;cursor: initial;}"]),Re=A.a.h4.withConfig({componentId:"s1czy2v1-5"})(["","font-weight: bold;padding: 10px 15px;"],H.d),we=A.a.span.withConfig({componentId:"s1czy2v1-6"})(["display: inline-block;vertical-align: middle;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;width: calc(100% - 3.2em);"]),Te=A.a.span.withConfig({componentId:"s1czy2v1-7"})(["","display: block;color: ",";"],H.d,function(e){return e.theme.activity.input.error}),je=A()(pe.a).withConfig({componentId:"s1czy2v1-8"})(["padding-left: 0.390625em;"]),Pe=A()(function(e){return Ie("div",{className:e.className},void 0,e.children)}).withConfig({componentId:"s1czy2v1-9"})(["","display: flex;align-items: center;width: 100%;overflow: hidden;border-bottom: 1px solid;height: ",";border-color: ",";transition: all 0.2s;"],H.d,function(e){return e.isShown?"3em":"0"},function(e){return e.isShown?e.theme.layout.colsBorder:"transparent"}),Ue=function(e){return{onCreateNewChannel:function(n,t){return e(Object(N.w)(n,t,!0))},onInviteUsersToExistingChannel:function(n){return e(Object(N.C)(n))},onIdentifyContact:function(n){return e(Object(S.h)({username:n}))},onCancelAndGoBack:function(n){e(Object(I.goBack)()),e(Object(R.b)(n))},onSelectUser:function(n){return e(Object(w.j)(n))},onUnselectUser:function(n){return e(Object(w.n)(n))},removeAllSelectedUsers:function(){return e(Object(w.m)())},requestSuggestedContacts:function(){return e(Object(S.j)())}}},xe=function(e){return e.toLocaleLowerCase()},Le=Object(C.createStructuredSelector)({channelAction:function(e){return e.platform.currentPage.urlParams.action},contacts:_e.f,groupChatEnabled:Ee.a,loadedContacts:_e.g,knownContacts:_e.e,memberCount:function(e){return Object(be.q)(e,"memberCount")},existingGroupUsers:function(e){var n=Object(be.q)(e,"members");return n&&n.map(function(e){return e.id})},selectedUsers:_e.h,selectedUsersCount:_e.i}),ke=Object(y.connect)(Le,Ue),De=function(e){function n(e){f(this,n);var t=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.isUserSelected=function(e){return t.props.selectedUsers.includes(e)},t.isExistingGroupUser=function(e){return!!t.props.existingGroupUsers&&t.props.existingGroupUsers.includes(e)&&!t.props.selectedUsers.includes(e)},t.isSubmitDisabled=function(e){var n=t.props,r=n.channelAction,o=n.memberCount,a=n.selectedUsersCount,i=r===ve.a.CREATE,s=a&&o,c=e<0||e===ve.c;return!a||i&&a>1&&c||s>=ve.d},t.primaryButtonText=function(){return t.props.channelAction===ve.a.INVITE_MEMBERS?Object(G.a)("en","app.chat.channels.addToGroup"):Object(G.a)("en","app.button.init")},t.getSelectedContacts=t.getSelectedContacts.bind(t),t.onContactsSelect=t.onContactsSelect.bind(t),t.onFilterContacts=t.onFilterContacts.bind(t),t.onFilterReset=t.onFilterReset.bind(t),t.onSubmit=t.onSubmit.bind(t),t.onCancel=t.onCancel.bind(t),t.handleChannelNameInput=t.handleChannelNameInput.bind(t),t.state={filter:"",resetFilter:!1,groupName:""},t}return p(n,e),ye(n,[{key:"componentWillMount",value:function(){this.props.requestSuggestedContacts()}},{key:"componentWillUnmount",value:function(){this.props.removeAllSelectedUsers()}},{key:"onContactsSelect",value:function(e){var n=e.target.id,t=this.props,r=t.groupChatEnabled,o=t.onSelectUser,a=t.onUnselectUser,i=t.selectedUsers,s=t.selectedUsersCount;i.includes(n)?a(n):(s<ve.d&&r||s<1)&&(this.setState(function(e){return Object.assign({},e,{resetFilter:!0})}),o(n)),this.searchBarElement.focus()}},{key:"onFilterContacts",value:function(e){this.setState({filter:e})}},{key:"onFilterReset",value:function(){this.setState({filter:"",resetFilter:!1})}},{key:"handleChannelNameInput",value:function(e){this.setState({groupName:e})}},{key:"onSubmit",value:function(){var e=this.props,n=e.channelAction,t=e.onCreateNewChannel,r=e.onInviteUsersToExistingChannel,o=this.state.groupName,a=this.getSelectedContacts().map(function(e){return e.id});a&&a.length&&(n!==ve.a.INVITE_MEMBERS?t(a,o.trim()):r(a))}},{key:"onCancel",value:function(){this.props.onCancelAndGoBack(this.props.selectedUsers)}},{key:"getSelectedContacts",value:function(){var e=this.props,n=e.loadedContacts,t=e.selectedUsers,r=[];return t.map(function(e){for(var t in n)xe(n[t].id)===e&&r.push(n[t])}),r}},{key:"getFilteredContacts",value:function(){var e=this.props.contacts,n=this.state.filter;return n?e.filter(function(e){return xe(e.name).includes(xe(n))}):e}},{key:"getLoadedContact",value:function(){var e=this;return this.props.loadedContacts.find(function(n){return n&&xe(n.name)===xe(e.state.filter)})}},{key:"getIsValidUser",value:function(e){var n=this.props.knownContacts[xe(e)];return!n||!n.loaded||n.valid}},{key:"availableCharacters",value:function(e){return ve.c-e.length}},{key:"render",value:function(){var e=this,n=this.props,t=n.channelAction,r=n.className,o=n.onIdentifyContact,a=n.selectedUsersCount,i=this.state,s=i.filter,c=i.resetFilter,u=i.groupName,l=this.isUserSelected,d=this.isExistingGroupUser,f=this.onFilterReset,h=this.onFilterContacts,p=this.onContactsSelect,m=this.onSubmit,v=this.onCancel,_=this.getSelectedContacts(),E=this.getFilteredContacts(),y=this.getLoadedContact(),I=!!s&&!y,C=!!y,O=!this.getIsValidUser(s),A=this.handleChannelNameInput,N=this.availableCharacters(u),S=this.isSubmitDisabled(N),R=this.primaryButtonText(),w=t===ve.a.CREATE;return Ie(ge.a,{className:r,onSubmit:Object(D.a)(m),form:!0},void 0,Ie(Ce,{},void 0,w&&Ie(Pe,{isShown:a>1},void 0,Ie(je,{handleChannelNameInput:A,placeholder:Object(G.a)("en","app.chat.channels.groupName")},void 0,Ie(T.a,{count:N}))),Ie(J,{innerRef:function(n){return e.searchBarElement=n},filter:s,resetFilter:c,selectedContacts:_,onFilterReset:f,onFilterContacts:h,onIdentifyContact:o,onUnselect:this.props.onUnselectUser}),Ie(Ae,{loadMoreRows:b.a,threshold:0},void 0,g()(E,function(e){return e.name}).map(function(e){return Ie(Ne,{},void 0,!w&&d(e.id)?Ie(he,{contact:e,context:Object(G.a)("en","app.chat.contactList.existingGroupContact")}):Ie(oe,{formName:"contactForm",contact:e,onChange:p,isChecked:l}))}),(I||C)&&Ie(Se,{},void 0,Ie(Re,{},void 0,Object(G.a)("en","app.chat.contactList.potentialsHeader"))),I&&!C&&Ie(Ne,{},void 0,Ie(Oe,{type:"checkbox",disabled:!0,name:"contactForm",value:s,onChange:p},void 0,Ie(we,{},void 0,s,O&&Ie(Te,{},void 0,Object(G.a)("en","app.chat.contactList.invalidUser"))))),C&&y&&Ie(Ne,{},void 0,!w&&d(y.id)?Ie(he,{contact:y,context:Object(G.a)("en","app.chat.contactList.existingGroupContact")}):Ie(oe,{formName:"contactForm",contact:y,onChange:p,isChecked:l})))),Ie(me.a,{primaryButtonText:R,primaryButtonDisabled:S,secondaryButtonAction:v}))}}]),n}(E.a.Component);n.a=ke(De)},"./src/chat/components/Root/normalize.css":function(e,n){},"./src/chat/constants/channels.ts":function(e,n,t){"use strict";t.d(n,"e",function(){return o}),t.d(n,"b",function(){return a}),t.d(n,"a",function(){return r}),t.d(n,"c",function(){return i}),t.d(n,"d",function(){return s});var r,o={ALL:"ALL",JOINED:"JOINED",INVITED:"INVITED"},a={DIRECT:"direct",GROUP:"group"};!function(e){e.BLOCK="block",e.CREATE="create",e.VIEW_REQUEST="request",e.INVITE_MEMBERS="invite",e.INVITE_MEMBERS_CONFIRMATION="invite_confirmation",e.LEAVE="leave",e.VIEW_MEMBERS="members",e.VIEW_NSFW_CONFIRMATION="nsfw"}(r||(r={}));var i=30,s=100},"./src/chat/constants/container.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return o});var r={PILL:"pill",EMBED:"embed",FULL:"full",HIDDEN:"hidden"},o={pill:{width:190,height:26},embed:{width:520,height:350},full:{width:void 0,height:void 0},hidden:{height:0,width:0}}},"./src/chat/constants/keys.ts":function(e,n,t){"use strict";t.d(n,"c",function(){return r}),t.d(n,"e",function(){return o}),t.d(n,"a",function(){return a}),t.d(n,"b",function(){return i}),t.d(n,"d",function(){return s});var r="Backspace",o="Enter",a="ArrowLeft",i="ArrowRight",s="Delete"},"./src/chat/constants/messages.ts":function(e,n,t){"use strict";t.d(n,"c",function(){return r}),t.d(n,"b",function(){return o}),t.d(n,"a",function(){return a});var r;!function(e){e.ADMIN="admin",e.USER="user",e.PENDING="pending"}(r||(r={}));var o;!function(e){e.TEXT="text",e.POST="post",e.SNOOMOJI="snoomoji"}(o||(o={}));var a;!function(e){e.DELETE="delete",e.REPORT="report"}(a||(a={}))},"./src/chat/constants/promos.ts":function(e,n,t){"use strict";t.d(n,"b",function(){return o}),t.d(n,"a",function(){return r});var r,o="chat.promo";!function(e){e.NSFW_WARNING="nsfwWarning",e.WELCOME_BETA="welcomeBeta"}(r||(r={}))},"./src/chat/constants/theme.ts":function(e,n,t){"use strict";t.d(n,"b",function(){return r}),t.d(n,"a",function(){return o});var r={REDDIT:"REDDIT",NIGHT:"NIGHT"},o=r.REDDIT},"./src/chat/constants/tracking.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return r});var r={VIEW:"view",CLICK:"click",SUBMIT:"submit",HEARTBEAT:"heartbeat"}},"./src/chat/controls/Button/index.tsx":function(e,n,t){"use strict";t.d(n,"a",function(){return g}),t.d(n,"c",function(){return v}),t.d(n,"b",function(){return y}),t.d(n,"d",function(){return O});var r=t("./node_modules/react/index.js"),o=t.n(r),a=t("./bundled-modules/styled-components/styled-components.min.js"),i=t.n(a),s=t("./src/chat/icons/svgs/Flag/index.tsx"),c=t("./src/chat/icons/svgs/Trash/index.tsx"),u=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),l=Object(a.css)(["background-color: ",";border-color: ",";color: ",";svg { fill: ","};"],function(e){return e.theme.activity.button.active},function(e){return e.theme.activity.button.active},function(e){return e.theme.activity.button.text},function(e){return e.theme.activity.button.text}),d=Object(a.css)(["background-color: ",";border-color: ",";color: ",";svg { fill: ","};"],function(e){return e.theme.layout.body},function(e){return e.theme.activity.button.active},function(e){return e.theme.activity.button.active},function(e){return e.theme.activity.text.body}),f=Object(a.css)(["background: none;border: none;padding: 0;"]),h=Object(a.css)(["","color: ",";"],f,function(e){return e.theme.activity.text.active}),p=Object(a.css)(["","color: ",";"],f,function(e){return e.theme.activity.text.fade}),m=Object(a.css)(["","color: ",";"],f,function(e){return e.theme.activity.text.warning}),g=i()(function(e){return e.href?u("a",{href:e.href,target:"_blank",title:e.title,className:e.className,tabIndex:0},void 0,e.children):u("button",{type:e.type||"button",tabIndex:0,className:e.className,onClick:e.onClick,disabled:e.disabled,title:e.title},void 0,e.children)}).withConfig({componentId:"s1aqfs8o-0"})(["&[disabled] { opacity: 0.6 };display: inline-block;padding: 0.1em 0.8em;transition: background 0.2s;background: ",";height: ",";width: ",";","",";",";",";",";",";"],function(e){return e.theme.layout.body},function(e){return e.height?e.height:"auto"},function(e){return e.width?e.width:"auto"},"\n  vertical-align: middle;\n  border: 1px solid transparent;\n  box-sizing: border-box;\n  border-radius: 4px;\n  cursor: pointer;\n  outline: none;\n\n  line-height: 2em;\n  font-size: 0.8em;\n  font-weight: 500;\n  text-align: center;\n  text-transform: uppercase;\n  text-decoration: none;\n  white-space: nowrap;\n  -webkit-font-smoothing: antialiased;\n\n  &:focus {\n    outline: none;\n  }\n",function(e){return e.primary?l:""},function(e){return e.primaryNoBorder?h:""},function(e){return e.secondary?d:""},function(e){return e.secondaryNoBorder?p:""},function(e){return e.warningNoBorder?m:""}),v=i()(g).withConfig({componentId:"s1aqfs8o-1"})(["font-size: inherit;line-height: normal;padding: 0.1em 0.8em 0.2em;height: 100%;svg {height: 100%;vertical-align: middle;}&:hover svg {fill: ",";}"],function(e){return e.theme.activity.icon.hover}),b=i.a.button.withConfig({componentId:"s1aqfs8o-2"})(["background-color: ",";border: 1px solid ",";box-sizing: border-box;border-radius: 4px;cursor: pointer;height: 1.1875em;outline: none;vertical-align: middle;width: 1.875em;line-height: 0;"],function(e){return e.theme.layout.body},function(e){return e.theme.message.list.item.button}),_=i()(s.a).withConfig({componentId:"s1aqfs8o-3"})(["fill: ",";height: 65%;"],function(e){return e.theme.message.list.item.button}),E=u(_,{}),y=function(e){return o.a.createElement(b,e,E)},I=i()(c.a).withConfig({componentId:"s1aqfs8o-4"})(["fill: ",";height: 70%;"],function(e){return e.theme.message.list.item.button}),C=u(I,{}),O=function(e){return o.a.createElement(b,e,C)}},"./src/chat/controls/ChannelNameInput/index.tsx":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function a(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var i=t("./node_modules/react/index.js"),s=t.n(i),c=t("./bundled-modules/styled-components/styled-components.min.js"),u=t.n(c),l=t("./src/chat/helpers/styles/mixins/index.tsx"),d=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},f=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),h=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),p=u.a.input.withConfig({componentId:"tzrz2j-0"})(["","background: transparent;font-size: 1em;height: 2.1875em;padding-left: .78125em;outline: none;width: 100%;"],l.d),m=Object(c.css)(["background-color: ",";border: 1px solid ",";border-radius: 0.3125em;"],function(e){return e.theme.activity.input.channelRename},function(e){return e.theme.activity.input.border}),g=u()(function(e){return h("label",{className:e.className},void 0,h(p,{placeholder:e.placeholder,onChange:e.onChange,value:e.value}),e.children)}).withConfig({componentId:"tzrz2j-1"})(["display: flex;align-items: center;border-radius: 0.3125em;width: 100%;",""],function(e){return e.withBackground?m:""}),v=function(e){function n(){r(this,n);var e=o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return e.onChange=function(n){var t=n.currentTarget.value;e.props.handleChannelNameInput(t)},e}return a(n,e),f(n,[{key:"render",value:function(){return s.a.createElement(g,d({withBackground:this.props.withBackground,onChange:this.onChange},this.props),this.props.children)}}]),n}(s.a.Component);n.a=v},"./src/chat/controls/Checkbox/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),o=t.n(r),a=t("./bundled-modules/styled-components/styled-components.min.js"),i=t.n(a),s=t("./src/chat/controls/Svg/index.tsx"),c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},u=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),l=i()(function(e){return u("circle",{className:e.className,cy:"10",cx:"10",r:"10"})}).withConfig({componentId:"dt3fl8-0"})(["fill: ",";"],function(e){return e.theme.activity.checkbox.checked}),d=i()(function(e){return u("path",{className:e.className,d:"M8.9310375,15.1995 C8.70135,15.41825 8.38963125,15.541375 8.0647875,15.541375 C8.052975,15.541375 8.04181875,15.54075 8.03000625,15.54075 C7.69335,15.531375 7.37506875,15.39075 7.15063125,15.151375 L4.0879125,11.88075 C3.637725,11.400125 3.68169375,10.662625 4.18700625,10.23325 C4.6916625,9.805125 5.4660375,9.846375 5.91688125,10.327625 L8.115975,12.676375 L14.8550063,6.25825 C15.3327563,5.802625 16.1091,5.802625 16.5875063,6.25825 C17.0659125,6.71325 17.0659125,7.452625 16.5875063,7.907625 L8.9310375,15.1995 Z"})}).withConfig({componentId:"dt3fl8-1"})(["fill: ",";"],function(e){return e.theme.activity.checkbox.mark}),f=u("g",{},void 0,u(l,{}),u(d,{})),h=function(e){return o.a.createElement(s.a,c({},e,{viewBox:"0 0 20 20"}),f)},p=h,m=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},g=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),v=i()(function(e){return g("circle",{className:e.className,cy:"10",cx:"10",r:"9"})}).withConfig({componentId:"s1m6fab-0"})(["fill: ",";stroke: ",";"],function(e){return e.theme.activity.checkbox.unchecked},function(e){return e.theme.activity.checkbox.uncheckedBorder}),b=g("g",{},void 0,g(v,{})),_=function(e){return o.a.createElement(s.a,m({},e,{viewBox:"0 0 20 20"}),b)},E=_,y=t("./src/chat/helpers/styles/mixins/index.tsx"),I=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),C=i.a.input.withConfig({componentId:"s996vvi-0"})(["position: absolute;appearance: none;visibility: hidden;"]),O=i()(p).withConfig({componentId:"s996vvi-1"})(["display: none;width 1.1em; height: 1.1em;"]),A=i()(E).withConfig({componentId:"s996vvi-2"})(["display: inline-block;width 1.1em; height: 1.1em;"]),N=i.a.span.withConfig({componentId:"s996vvi-3"})(["vertical-align: middle;display: table;padding: 0 15px;"]),S=i.a.span.withConfig({componentId:"s996vvi-4"})(["","vertical-align: middle;display: table-cell;padding-right: 1em;max-width: 0;"],y.d),R=i.a.span.withConfig({componentId:"s996vvi-5"})(["vertical-align: middle;display: table-cell;width: 1%;"]),w=I(O,{}),T=I(A,{}),j=i()(function(e){return I("label",{className:e.className},void 0,I(N,{},void 0,e.children?I(S,{},void 0,e.children):null,I(R,{},void 0,I(C,{tabIndex:0,type:e.type||"checkbox",checked:e.checked,disabled:e.disabled,name:e.name,value:e.value,onChange:e.onChange,id:e.id}),w,T)))}).withConfig({componentId:"s996vvi-6"})(["height: ",";width: ",";vertical-align: middle;display: inline-block;cursor: pointer;position: relative;","{&:checked ~ {"," { display: inline-block; }"," { display: none; }}}"],function(e){return e.height?e.height:"auto"},function(e){return e.width?e.width:"auto"},C,O,A);n.a=j},"./src/chat/controls/Dropdown/index.tsx":function(e,n,t){"use strict";var r=(t("./node_modules/react/index.js"),t("./bundled-modules/styled-components/styled-components.min.js")),o=t.n(r),a=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),i=function(e){return a("div",{className:e.className,onMouseEnter:function(n){e.isFixed&&(document.body.style.overflow="hidden")},onMouseLeave:function(n){e.isFixed&&(document.body.style.overflow="auto")},style:e.style},void 0,e.children)};n.a=o()(i).withConfig({componentId:"s1fijtxd-0"})(["margin-top: 2px;border-radius: 3px;overflow: hidden;position: absolute;z-index: ",";background-color: ",";"],function(e){var n=e.isOverlay;return void 0!==n&&n?80:10},function(e){return e.theme.layout.body})},"./src/chat/controls/ModalControlBar/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),o=(t.n(r),t("./node_modules/react-redux/es/index.js")),a=t("./node_modules/react-router-redux/es/index.js"),i=t("./bundled-modules/styled-components/styled-components.min.js"),s=t.n(i),c=t("./src/chat/controls/Button/index.tsx"),u=t("./src/chat/helpers/dom.ts"),l=t("./src/chat/helpers/styles/mixins/index.tsx"),d=t("./src/chat/strings/index.ts"),f=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),h=s()(c.a).withConfig({componentId:"s8p67td-0"})(["margin: 0 4px;min-width: 6.328em;",""],l.a),p=function(e){return{onSubmit:function(){},onCancel:Object(u.b)(function(){return e(Object(a.goBack)())})}},m=Object(o.connect)(void 0,p),g=s()(m(function(e){return f("div",{className:e.className},void 0,f(h,{onClick:e.secondaryButtonAction||e.onCancel,primary:!!e.secondaryButtonOnly,secondary:!e.secondaryButtonOnly},void 0,e.secondaryButtonText),!e.secondaryButtonOnly&&f(h,{type:"submit",primary:!0,onClick:e.primaryButtonAction||e.onSubmit,disabled:e.primaryButtonDisabled},void 0,e.primaryButtonText))})).withConfig({componentId:"s8p67td-1"})(["background: ",";border-top: 1px solid ",";display: flex;flex: 0 0 auto;justify-content: flex-end;padding: 9px 12px;"],function(e){return e.theme.layout.body},function(e){return e.theme.layout.colsBorder});g.defaultProps={primaryButtonText:Object(d.a)("en","app.button.submit"),secondaryButtonText:Object(d.a)("en","app.button.cancel")},n.a=g},"./src/chat/controls/Overlay/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),o=t.n(r),a=t("./bundled-modules/styled-components/styled-components.min.js"),i=t.n(a),s=t("./src/chat/components/MessageListHeader/index.tsx"),c=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),u=function(){function e(e,n){var t=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=i.a.div.withConfig({componentId:"s2z71x1-0"})(["flex: 1 1 auto;overflow-y: auto;"]);n.a=i()(function(e){var n=e.form?"form":"div",t=o.a.Children.toArray(e.children),r=u(t,2),a=r[0],i=r[1];return c(n,{className:e.className,onSubmit:e.onSubmit},void 0,e.headerName&&c(s.a,{name:e.headerName,menu:e.headerMenu,inviterName:e.inviter&&e.inviter.name}),c(l,{},void 0,a),i)}).withConfig({componentId:"s2z71x1-1"})(["display: flex;flex-direction: column;height: 100%;width: 100%;"])},"./src/chat/controls/Svg/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),o=(t.n(r),t("./bundled-modules/styled-components/styled-components.min.js")),a=t.n(o),i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}();n.a=a()(function(e){return i("svg",{className:e.className,viewBox:e.viewBox},void 0,e.children)}).withConfig({componentId:"unllzc-0"})(["height: ",";width: ",";vertical-align: middle;transition: all 0.2s;fill: ",";",";"],function(e){return e.height?e.height:"100%"},function(e){return e.width?e.width:"100%"},function(e){return e.disable?e.theme.activity.icon.disable:e.active?e.theme.activity.icon.active:e.hover?e.theme.activity.icon.hover:e.theme.activity.icon.default},function(e){return!1!==e.hover?"&:hover {\n        fill: "+function(e){return e.disable?e.theme.activity.icon.disable:e.theme.activity.icon.hover}+";\n    };":""})},"./src/chat/endpoints/accounts/index.ts":function(e,n,t){"use strict";t.d(n,"c",function(){return s}),t.d(n,"a",function(){return c}),t.d(n,"b",function(){return u});var r=t("./src/lib/constants/index.ts"),o=t("./src/lib/makeApiRequest/index.ts"),a=this,i=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},s=function(e){return i(a,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(o.b)(e,{endpoint:e.apiUrl+"/api/v1/me",method:r.U.GET,data:{raw_json:1}}));case 1:case"end":return n.stop()}},n,this)}))},c=function(e,n){return i(a,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.b)(e,{data:{account_id:n,raw_json:1},endpoint:e.apiUrl+"/api/block_user",method:r.U.POST}));case 1:case"end":return t.stop()}},t,this)}))},u=function(e,n){return i(a,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.b)(e,{endpoint:e.apiUrl+"/user/"+n+"/about",method:r.U.GET,data:{raw_json:1}}));case 1:case"end":return t.stop()}},t,this)}))}},"./src/chat/endpoints/sendbird/index.ts":function(e,n,t){"use strict";t.d(n,"c",function(){return u}),t.d(n,"d",function(){return l}),t.d(n,"b",function(){return d}),t.d(n,"a",function(){return f}),t.d(n,"f",function(){return h}),t.d(n,"e",function(){return p});var r=t("./src/config.ts"),o=t("./src/lib/constants/index.ts"),a=t("./src/lib/makeApiRequest/index.ts"),i=this,s=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},c="api/v1/sendbird",u=function(e){return s(i,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(a.b)(e,{endpoint:r.a.sendbirdServiceUrl+"/"+c+"/config",method:o.U.GET}));case 1:case"end":return n.stop()}},n,this)}))},l=function(e,n){return s(i,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(a.b)(e,{endpoint:r.a.sendbirdServiceUrl+"/"+c+"/me",method:o.U.GET}));case 1:case"end":return n.stop()}},n,this)}))},d=function(e,n,t){return s(i,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(a.b)(e,{endpoint:r.a.sendbirdServiceUrl+"/"+c+"/contacts?limit="+t,method:o.U.GET}));case 1:case"end":return n.stop()}},n,this)}))},f=function(e,n,t,u){return s(i,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(a.b)(e,{data:{users:t,name:u},endpoint:r.a.sendbirdServiceUrl+"/"+c+"/group_channels",method:o.U.POST,headers:{Accept:"application/json","Content-Type":"application/json"}}));case 1:case"end":return n.stop()}},n,this)}))},h=function(e,n,t,u){return s(i,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(a.b)(e,{data:{users:t},endpoint:r.a.sendbirdServiceUrl+"/"+c+"/group_channels/"+u+"/invite",method:o.U.POST,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}));case 1:case"end":return n.stop()}},n,this)}))},p=function(e,n){return s(i,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(a.b)(e,{endpoint:r.a.sendbirdServiceUrl+"/"+c+"/unread_message_count",method:o.U.GET,headers:{Accept:"application/json","Content-Type":"application/json"}}));case 1:case"end":return n.stop()}},n,this)}))}},"./src/chat/endpoints/users/index.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return a}),t.d(n,"b",function(){return i});var r=t("./src/lib/constants/index.ts"),o=t("./src/lib/makeApiRequest/index.ts"),a=function(e,n){return Object(o.b)(e,{method:r.U.POST,endpoint:e.apiUrl+"/api/report_user",data:{details:JSON.stringify({sendbirdChatMessage:n}),reason:n.reason,user:n.userNickname}})},i=function(e,n){return Object(o.b)(e,{method:r.U.GET,endpoint:e.apiUrl+"/api/user_data_by_account_ids",data:{raw_json:1,ids:n.join(",")}})}},"./src/chat/helpers/dom.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return o});var r=function(e){return function(n){if(n.preventDefault(),e&&"function"==typeof e)return e(n)}},o=function(e){return function(n){if(n.preventDefault(),n.stopPropagation(),e&&"function"==typeof e)return e(n)}}},"./src/chat/helpers/styles/components/index.tsx":function(e,n,t){"use strict";t.d(n,"b",function(){return c}),t.d(n,"c",function(){return u}),t.d(n,"d",function(){return l}),t.d(n,"a",function(){return h});var r=t("./node_modules/react/index.js"),o=(t.n(r),t("./bundled-modules/styled-components/styled-components.min.js")),a=t.n(o),i=t("./src/chat/helpers/styles/mixins/index.tsx"),s=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),c=a.a.h2.withConfig({componentId:"s12zvnlt-0"})(["",";padding: 0;margin: 0;"],i.b),u=a.a.p.withConfig({componentId:"s12zvnlt-1"})(["",";padding: 0;margin: 0;"],i.d),l=a.a.sub.withConfig({componentId:"s12zvnlt-2"})(["",";"],i.e),d=a.a.div.withConfig({componentId:"s12zvnlt-3"})(["display: table;width: 100%;height: 100%;"]),f=a.a.div.withConfig({componentId:"s12zvnlt-4"})(["display: table-cell;vertical-align: middle;text-align: center;"]),h=function(e){return s(d,{className:e.className},void 0,s(f,{},void 0,e.children))}},"./src/chat/helpers/styles/functions/index.tsx":function(e,n,t){"use strict";function r(){return"transition: "+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all")+" "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0.2s")+";"}function o(e){return"\n    animation-name: "+e+";\n    animation-duration: "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:".2s")+";\n    animation-iteration-count: "+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)+";\n    animation-direction: "+(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"normal")+";\n    animation-timing-function: "+(arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ease")+";\n    animation-fill-mode: "+(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"forwards")+";\n  "}n.b=r,n.a=o},"./src/chat/helpers/styles/mixins/index.tsx":function(e,n,t){"use strict";t.d(n,"a",function(){return u}),t.d(n,"b",function(){return l}),t.d(n,"d",function(){return d}),t.d(n,"e",function(){return f}),t.d(n,"c",function(){return h}),t.d(n,"f",function(){return p}),t.d(n,"g",function(){return m});var r=t("./bundled-modules/styled-components/styled-components.min.js"),o=(t.n(r),t("./src/chat/helpers/styles/functions/index.tsx")),a=Object(r.css)(["color: ",";",";"],function(e){return e.theme.activity.text.body},Object(o.b)("color")),i=Object(r.css)(["font-family: BentonSans,sans-serif;font-size: 1em;line-height: 1.5em;"]),s=Object(r.css)(["font-family: BentonSans,sans-serif;font-size: 0.8em;line-height: 1.5em;"]),c=Object(r.css)(["font-family: BentonSans,sans-serif;font-size: 0.7em;line-height: 1.5em;"]),u=Object(r.css)(["outline: none;&:focus {box-shadow: 0 0 3px 1px ",";}"],function(e){return e.theme.activity.input.focusBg}),l=Object(r.css)(["","","-webkit-font-smoothing: antialiased;-moz-osx-font-smoothing: grayscale;"],a,i),d=Object(r.css)(["","","-webkit-font-smoothing: antialiased;-moz-osx-font-smoothing: grayscale;"],a,s),f=Object(r.css)(["","","-webkit-font-smoothing: antialiased;-moz-osx-font-smoothing: grayscale;"],a,c),h=Object(r.css)(["cursor: pointer;color: ",";border-bottom: 1px solid ",";",";&:hover{color: ",";border-bottom: 1px solid ",";}"],function(e){return e.theme.activity.link.staticText},function(e){return e.theme.activity.link.staticUnderline},Object(o.b)(),function(e){return e.theme.activity.link.hoverText},function(e){return e.theme.activity.link.hoverText}),p=Object(r.css)(["word-break: break-all;line-break: strict;overflow-wrap: break-word;word-break: break-word;word-break: break-all;word-wrap: break-word;hyphens: auto;"]),m=Object(r.css)(["display: inline-block;overflow-wrap: break-word;word-wrap: break-word;a {","}"],p)},"./src/chat/helpers/urls.ts":function(e,n,t){"use strict";t.d(n,"c",function(){return r}),t.d(n,"b",function(){return o}),t.d(n,"a",function(){return a}),t.d(n,"f",function(){return i}),t.d(n,"g",function(){return s}),t.d(n,"e",function(){return c}),t.d(n,"d",function(){return u});var r=function(e){return"/chat/user_id/"+e},o=function(e){return"/chat/channel/"+e},a=function(e,n){return"/chat/channel/"+e+"/"+n},i="/chat/minimize/",s="/chat/",c=function(e,n,t){return{pathname:"/chat/channel/"+e+"/"+n+"/"+t,state:{isOverlay:!0}}},u=function(e){return new RegExp("reddit.com").test(e)?e.replace(/^.+reddit.com(\/r\/.+?\/).*$/g,"$1"):""}},"./src/chat/icons/Loader/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),o=(t.n(r),t("./bundled-modules/styled-components/styled-components.min.js")),a=t.n(o),i=t("./src/chat/helpers/styles/functions/index.tsx"),s=t("./src/chat/helpers/styles/mixins/index.tsx"),c=t("./src/chat/icons/svgs/RedditLogo/index.tsx"),u=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),l=a.a.div.withConfig({componentId:"s1r1vd7j-0"})(['position: absolute;display: inline-block;text-align: center;width: 10%;top: 50%;left: 50%;margin-left: -5%;margin-top: -5%;:after {content: "";display: block;padding-bottom: 100%;}']),d=a.a.div.withConfig({componentId:"s1r1vd7j-1"})(["display: inline-block;text-align: center;position: absolute;font-size:0;height: 100%;width: 100%;margin-left: -50%;&:before {content: '';position: absolute;width: 100%;height: 100%;opacity: .75;border-radius: 100%;background-color: #ff4500;z-index: -1;","}@keyframes scaleout {0%   { transform: scale(1); }100% { transform: scale(1.5); opacity: 0; }}"],Object(i.a)("scaleout","1.5s","infinite","normal","ease-in-out")),f=a()(function(e){return u("div",{role:"progressbar",className:e.className},void 0,e.children)}).withConfig({componentId:"s1r1vd7j-2"})(["position: absolute;top:0; right:0; left:0; bottom:0;display: ",";z-index: ",";box-shadow: inset 0px 0px 150px 2000px ",";text-align: center;@keyframes fadeInIcon {0%   { transform: scale(0.5); opacity: 0;}100% { transform: scale(1); opacity: 1;}}@keyframes fadeOutIcon {0%   { transform: scale(1); opacity: 1;}100% { transform: scale(0.5); opacity: 0;}}@keyframes fadeOutWrap {0%    { box-shadow: inset 0px 0px 150px 2000px ","; height:100%; width:100%;}99.9% { box-shadow: inset 0px 0px 150px 0px ","; height:100%; width:100%;}100%  { box-shadow: inset 0px 0px 150px 0px ","; height:0; width:0;}}"],function(e){return e.isFadeOut?"none":"block"},function(e){return e.zIndex?e.zIndex:1},function(e){return e.theme.layout.body},function(e){return e.theme.layout.body},function(e){return e.theme.layout.body},function(e){return e.theme.layout.body}),h=a.a.div.withConfig({componentId:"s1r1vd7j-3"})(["","font-size: 12px;line-height: 1em;white-space: nowrap;position: absolute;margin-top: 30px;margin-left: -100px;width: 200px;left: 50%;top: 100%;z-index: 1;"],s.d),p=u(c.a,{});n.a=function(e){return u(f,{isFadeOut:e.isFadeOut,zIndex:e.zIndex},void 0,u(l,{},void 0,u(d,{},void 0,p,u(h,{},void 0,e.textType))))}},"./src/chat/icons/SnooMoji/index.tsx":function(e,n,t){"use strict";t.d(n,"b",function(){return u});var r=t("./src/config.ts"),o=t("./node_modules/react/index.js"),a=(t.n(o),t("./bundled-modules/styled-components/styled-components.min.js")),i=t.n(a),s=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),c=i.a.img.withConfig({componentId:"s1oatsvr-0"})(["width: 100%;height: auto;"]),u=["snoo","snoo_simple_smile","snoo_smile","snoo_joy","snoo_tongue","snoo_wink","snoo_sad","snoo_biblethump","snoo_angry","snoo_disapproval","snoo_trollface","snoo_dealwithit","snoo_facepalm","snoo_shrug","snoo_scream","snoo_thoughtful","snoo_surprised","snoo_hearteyes","snoo_tableflip","snoo_putback","snoo_hug","snoo_feelsbadman","snoo_feelsgoodman","upvote","downvote","karma","cake","redditgold","illuminati","kappa","sloth","cat_blep","pupper","partyparrot","orly","hamster","doge"];n.a={simple_smile:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_simple_smile.png"}),smile:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_smile.png"}),joy:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_joy.png"}),tongue:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_tongue.png"}),wink:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_wink.png"}),sad:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_sad.png"}),biblethump:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_cry.png"}),angry:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_angry.png"}),disapproval:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_disapproval.png"}),trollface:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_trollface.png"}),dealwithit:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_dealwithit.png"}),facepalm:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_facepalm.png"}),shrug:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_shrug.png"}),scream:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_scream.png"}),thoughtful:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_thoughtful.png"}),surprised:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_surprised.png"}),hearteyes:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_hearteyes.png"}),tableflip:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_tableflip.png"}),putback:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_putback.png"}),hug:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_hug.png"}),feelsbadman:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_feelsbadman.png"}),feelsgoodman:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_feelsgoodman.png"}),snoo:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo.png"}),snoo_simple_smile:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_simple_smile.png"}),slightly_smiling:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_simple_smile.png"}),snoo_smile:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_smile.png"}),snoo_joy:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_joy.png"}),snoo_tongue:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_tongue.png"}),stuck_out_tongue:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_tongue.png"}),snoo_wink:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_wink.png"}),snoo_sad:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_sad.png"}),snoo_biblethump:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_cry.png"}),cry:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_cry.png"}),snoo_angry:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_angry.png"}),snoo_disapproval:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_disapproval.png"}),snoo_trollface:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_trollface.png"}),snoo_dealwithit:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_dealwithit.png"}),sunglasses:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_dealwithit.png"}),snoo_facepalm:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_facepalm.png"}),snoo_shrug:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_shrug.png"}),snoo_scream:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_scream.png"}),snoo_thoughtful:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_thoughtful.png"}),snoo_surprised:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_surprised.png"}),flushed:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_surprised.png"}),snoo_hearteyes:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_hearteyes.png"}),heart_eyes:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_hearteyes.png"}),snoo_tableflip:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_tableflip.png"}),table_flip:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_tableflip.png"}),snoo_putback:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_putback.png"}),table:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_putback.png"}),snoo_hug:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_hug.png"}),snoo_feelsbadman:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_feelsbadman.png"}),feels_bad_man:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_feelsbadman.png"}),snoo_feelsgoodman:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_feelsgoodman.png"}),feels_good_man:s(c,{src:r.a.assetPath+"/img/snoomoji/snoo_feelsgoodman.png"}),upvote:s(c,{src:r.a.assetPath+"/img/snoomoji/upvote.png"}),downvote:s(c,{src:r.a.assetPath+"/img/snoomoji/downvote.png"}),karma:s(c,{src:r.a.assetPath+"/img/snoomoji/karma.png"}),cake:s(c,{src:r.a.assetPath+"/img/snoomoji/cake.png"}),redditgold:s(c,{src:r.a.assetPath+"/img/snoomoji/redditgold.png"}),gold:s(c,{src:r.a.assetPath+"/img/snoomoji/redditgold.png"}),illuminati:s(c,{src:r.a.assetPath+"/img/snoomoji/illuminati.png"}),kappa:s(c,{src:r.a.assetPath+"/img/snoomoji/kappa.png"}),sloth:s(c,{src:r.a.assetPath+"/img/snoomoji/sloth.png"}),cat_blep:s(c,{src:r.a.assetPath+"/img/snoomoji/cat_blep.png"}),pupper:s(c,{src:r.a.assetPath+"/img/snoomoji/pupper.png"}),partyparrot:s(c,{src:r.a.assetPath+"/img/snoomoji/partyparrot.gif"}),party_parrot:s(c,{src:r.a.assetPath+"/img/snoomoji/partyparrot.gif"}),orly:s(c,{src:r.a.assetPath+"/img/snoomoji/orly.png"}),o_rly_owl:s(c,{src:r.a.assetPath+"/img/snoomoji/orly.png"}),party_pigeon:s(c,{src:r.a.assetPath+"/img/snoomoji/orly.png"}),partypigeon:s(c,{src:r.a.assetPath+"/img/snoomoji/orly.png"}),hamster:s(c,{src:r.a.assetPath+"/img/snoomoji/hamster.png"}),doge:s(c,{src:r.a.assetPath+"/img/snoomoji/doge.png"})}},"./src/chat/icons/Userpic/index.tsx":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function a(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var i=t("./node_modules/react/index.js"),s=t.n(i),c=t("./node_modules/react-redux/es/index.js"),u=t("./node_modules/reselect/lib/index.js"),l=t("./bundled-modules/styled-components/styled-components.min.js"),d=t.n(l),f=t("./src/config.ts"),h=t("./src/lib/constants/index.ts"),p=["#FF4500","#0DD3BB","#24A0ED","#FFB000","#FF8717","#46D160","#25B79F","#0079D3","#4856A3","#C18D42","#A06A42","#46A508","#008985","#7193FF","#7E53C1","#FFD635","#DDBD37","#D4E815","#94E044","#FF66AC","#DB0064","#FF585B","#EA0027","#A5A4A4","#545452"],m=t("./src/chat/strings/index.ts"),g=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},v=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),b=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),_=function(e){return e.replace(h._3.ACCOUNT+"_","")},E=function(e){var n=parseInt(e,36),t=p.length;return{imageIndex:n%30+1,colorIndex:Math.floor(n/30)%t}},y=Object(l.css)(["border-radius: 3px;text-align: center;display: inline-block;vertical-align: middle;"]),I=d.a.i.withConfig({componentId:"s1nmg3w6-0"})(["","border: 1px solid ",";background: ",";"],y,function(e){return e.theme.layout.colsBorder},function(e){return e.theme.layout.body}),C=d()(function(e){return b("i",{className:e.className})}).withConfig({componentId:"s1nmg3w6-1"})(["","height: ",";width: ",';background-size: 100% 100%;background-position: center bottom;background-image: url("',"/img/userpic-icons/",'.png");background-color: ',""],y,function(e){return e.height?e.height:"25px"},function(e){return e.width?e.width:"25px"},f.a.assetPath,function(e){return e.imageIndex},function(e){return p[e.colorIndex]}),O=function(e){function n(e){r(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={profileImgFailed:!1},t.onError=t.onError.bind(t),t}return a(n,e),v(n,[{key:"onError",value:function(){this.setState({profileImgFailed:!0})}},{key:"render",value:function(){var e=this.props,n=e.className,t=e.contact,r=e.currentUser,o=e.userId,a=this.state.profileImgFailed,i="",s="";return r.id===o?(i=r.subreddit&&r.subreddit.icon_img||"",s=r.name):t&&(i=t.profileImg||"",s=t.name),a||!i?b(I,{className:n,title:s+" "+Object(m.a)("en","app.chat.user.snoovatar")}):b("img",{onError:this.onError,className:n,src:i,alt:s+" "+Object(m.a)("en","app.chat.user.snoovatar")})}}]),n}(s.a.Component),A=d()(O).withConfig({componentId:"s1nmg3w6-2"})(["","height: ",";width: ",";color: transparent;"],y,function(e){return e.height?e.height:"25px"},function(e){return e.width?e.width:"25px"}),N=Object(u.createStructuredSelector)({contact:function(e,n){return e.contacts.models[n.userId]},currentUser:function(e){return e.user.account}}),S=Object(c.connect)(N),R=function(e){var n=e.className,t=e.contact,r=e.currentUser,o=e.height,a=e.width,i=e.userId,c=_(i),u=t&&t.profileImg,l=i===r.id,d=r.subreddit&&r.subreddit.icon_img,f=E(c);return u||l&&d?b(A,{contact:t,currentUser:r,className:n,height:o,width:a,userId:i}):s.a.createElement(C,g({className:n,height:o,width:a,userId:c},f))};n.a=S(R)},"./src/chat/icons/svgs/ChatNew/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),o=t.n(r),a=t("./src/chat/controls/Svg/index.tsx"),i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c=i("path",{d:"M10.625 8.656h-1.97v1.97c0 .36-.293.655-.655.655-.362 0-.656-.293-.656-.655v-1.97h-1.97c-.36 0-.655-.293-.655-.655 0-.362.293-.656.655-.656h1.97v-1.97c0-.36.293-.655.655-.655.362 0 .656.293.656.655v1.97h1.97c.36 0 .655.293.655.655 0 .362-.293.656-.655.656M8 1C4.14 1 1 4.14 1 8c0 1.222.317 2.372.87 3.373l-.824 2.476c-.105.313-.024.66.21.894.167.167.39.256.62.256.09 0 .185-.015.275-.045l2.478-.825c1 .553 2.15.87 3.372.87 3.86 0 7-3.14 7-7s-3.14-7-7-7"});n.a=function(e){return o.a.createElement(a.a,s({},e,{viewBox:"0 0 16 16"}),c)}},"./src/chat/icons/svgs/Flag/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),o=t.n(r),a=t("./src/chat/controls/Svg/index.tsx"),i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c=i("path",{d:"M9.554 4.38l1.7-3.188c.133-.25.125-.554-.022-.8C11.086.15 10.822 0 10.538 0H.81C.363 0 0 .363 0 .81V11.19c0 .448.362.81.81.81.45 0 .81-.362.81-.81V8.757h8.918c.284 0 .548-.15.694-.394.147-.243.155-.547.02-.798L9.555 4.38z"});n.a=function(e){return o.a.createElement(a.a,s({},e,{viewBox:"0 0 12 12"}),c)}},"./src/chat/icons/svgs/MenuOverflow/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),o=t.n(r),a=t("./src/chat/controls/Svg/index.tsx"),i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c=i("g",{transform:"translate(-475.000000, -286.000000)"},void 0,i("path",{d:"M485.479375,287.804009 C485.479375,288.796214 486.265328,289.608018 487.225938,289.608018 C488.186547,289.608018 488.9725,288.796214 488.9725,287.804009 C488.9725,286.811804 488.186547,286 487.225938,286 C486.265328,286 485.479375,286.811804 485.479375,287.804009 M480.239688,287.804009 C480.239688,288.796214 481.025641,289.608018 481.98625,289.608018 C482.946859,289.608018 483.732813,288.796214 483.732813,287.804009 C483.732813,286.811804 482.946859,286 481.98625,286 C481.025641,286 480.239688,286.811804 480.239688,287.804009 M478.493125,287.804009 C478.493125,286.811804 477.707172,286 476.746563,286 C475.785953,286 475,286.811804 475,287.804009 C475,288.796214 475.785953,289.608018 476.746563,289.608018 C477.707172,289.608018 478.493125,288.796214 478.493125,287.804009"}));n.a=function(e){return o.a.createElement(a.a,s({},e,{viewBox:"0 0 14 4"}),c)}},"./src/chat/icons/svgs/NavClose/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),o=t.n(r),a=t("./src/chat/controls/Svg/index.tsx"),i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c=i("path",{d:"M9.212 8l4.537-4.537c.334-.335.334-.877 0-1.212-.336-.334-.878-.334-1.213 0L8 6.79 3.463 2.25c-.335-.334-.877-.334-1.212 0-.334.336-.334.878 0 1.213L6.79 8 2.25 12.537c-.334.335-.334.877 0 1.212.168.166.388.25.607.25.22 0 .44-.084.606-.25L8 9.21l4.537 4.537c.167.166.386.25.606.25.22 0 .44-.084.606-.25.334-.336.334-.878 0-1.213L9.21 8z"});n.a=function(e){return o.a.createElement(a.a,s({},e,{viewBox:"0 0 16 16"}),c)}},"./src/chat/icons/svgs/NavMinimize/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),o=t.n(r),a=t("./src/chat/controls/Svg/index.tsx"),i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c=i("g",{transform:"translate(-418.000000, -286.000000)"},void 0,i("rect",{height:"1",id:"minimize",width:"8",x:"418",y:"286"}));n.a=function(e){return o.a.createElement(a.a,s({},e,{viewBox:"0 0 8 1"}),c)}},"./src/chat/icons/svgs/NavPopout/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),o=t.n(r),a=t("./src/chat/controls/Svg/index.tsx"),i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c=i("path",{d:"M471.941082 10.73459716c-.115-.115-.25375-.2075-.40625-.27-.30625-.12625-.65-.12625-.95625 0-.1525.0625-.29125.155-.40625.27l-3.75 3.75000004c-.4875.4875-.4875 1.27875 0 1.7675.48875.4875 1.28.4875 1.76875 0l1.615-1.61625v8.2325c0 .69.56 1.25 1.25 1.25.69125 0 1.25-.56 1.25-1.25v-8.2325l1.61625 1.61625c.245.24375.565.36625.88375.36625.32 0 .64-.1225.885-.36625.4875-.48875.4875-1.28 0-1.7675l-3.75-3.75000004z",transform:"rotate(45 252.42066803 -549.56052525)"});n.a=function(e){return o.a.createElement(a.a,s({},e,{viewBox:"0 0 12 12"}),c)}},"./src/chat/icons/svgs/RedditLogo/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),o=t.n(r),a=t("./src/chat/controls/Svg/index.tsx"),i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c=i("g",{},void 0,i("circle",{fill:"#ff4500",cx:"10",cy:"10",r:"10"}),i("path",{fill:"#ffffff",d:"M16.67,10A1.46,1.46,0,0,0,14.2,9a7.12,7.12,0,0,0-3.85-1.23L11,4.65,13.14,5.1a1,1,0,1,0,.13-0.61L10.82,4a0.31,0.31,0,0,0-.37.24L9.71,7.71a7.14,7.14,0,0,0-3.9,1.23A1.46,1.46,0,1,0,4.2,11.33a2.87,2.87,0,0,0,0,.44c0,2.24,2.61,4.06,5.83,4.06s5.83-1.82,5.83-4.06a2.87,2.87,0,0,0,0-.44A1.46,1.46,0,0,0,16.67,10Zm-10,1a1,1,0,1,1,1,1A1,1,0,0,1,6.67,11Zm5.81,2.75a3.84,3.84,0,0,1-2.47.77,3.84,3.84,0,0,1-2.47-.77,0.27,0.27,0,0,1,.38-0.38A3.27,3.27,0,0,0,10,14a3.28,3.28,0,0,0,2.09-.61A0.27,0.27,0,1,1,12.48,13.79Zm-0.18-1.71a1,1,0,1,1,1-1A1,1,0,0,1,12.29,12.08Z"}));n.a=function(e){return o.a.createElement(a.a,s({},e,{viewBox:"0 0 20 20"}),c)}},"./src/chat/icons/svgs/Trash/index.tsx":function(e,n,t){"use strict";var r=t("./node_modules/react/index.js"),o=t.n(r),a=t("./src/chat/controls/Svg/index.tsx"),i=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c=i("path",{d:"M8.167 9.375c0 .207-.17.375-.38.375s-.382-.168-.382-.375V5.25c0-.207.17-.375.38-.375.212 0 .382.168.382.375v4.125zm-2.286 0c0 .207-.17.375-.38.375s-.38-.168-.38-.375V5.25c0-.207.17-.375.38-.375s.38.168.38.375v4.125zm-2.284 0c0 .207-.17.375-.38.375-.212 0-.382-.168-.382-.375V5.25c0-.207.17-.375.38-.375s.382.168.382.375v4.125zM9.62 3c.21 0 .38.168.38.375v7.5C10 11.495 9.49 12 8.86 12H2.143C1.513 12 1 11.495 1 10.875v-7.5C1 3.168 1.17 3 1.38 3h8.24zm0-2.25c.21 0 .38.168.38.375v.75c0 .207-.17.375-.38.375H1.38c-.21 0-.38-.168-.38-.375v-.75c0-.207.17-.375.38-.375h2.255L4.2.125C4.272.045 4.376 0 4.485 0h2.03c.11 0 .213.046.286.125l.565.625H9.62z",fillRule:"evenodd"});n.a=function(e){return o.a.createElement(a.a,s({},e,{viewBox:"0 0 12 12"}),c)}},"./src/chat/index.tsx":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function a(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function c(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function u(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function l(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function f(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function h(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function p(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function m(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function g(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function v(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function b(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _(e){var n=this;return function(t){return function(r,o,a){return Ut(n,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Oe.i)()(r,o,a);case 2:return n.next=4,e(t)(r,o,a);case 4:case"end":return n.stop()}},n,this)}))}}}function E(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function y(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function I(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function C(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function O(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function A(e,n){return Hr(Cr,{},void 0,Hr(e,{},void 0,Hr(lr.Route,{component:function(e){return P.a.createElement(Mr,e,Hr(_r,{},void 0,Hr(lr.Switch,{location:e.location},void 0,n)))}})))}Object.defineProperty(n,"__esModule",{value:!0});var N,S=t("./node_modules/history/index.js"),R=t("./node_modules/js-cookie/src/js.cookie.js"),w=t.n(R),T=t("./src/lib/constants/index.ts"),j=t("./node_modules/react/index.js"),P=t.n(j),U=t("./src/chat/components/OverlayCreateChannel/index.tsx"),x=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),L=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),k=x(U.a,{}),D=function(e){function n(){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),L(n,[{key:"render",value:function(){return k}}]),n}(P.a.Component),M=D,H=t("./src/chat/components/EmptyState/index.tsx"),G=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),F=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),B=G(H.a,{}),V=function(e){function n(){return i(this,n),s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return c(n,e),F(n,[{key:"render",value:function(){return B}}]),n}(P.a.Component),K=V,z=function(e){return function(){switch(e){case T.m.CHAT:return t.e("ChatPage").then(t.bind(null,"./src/chat/pages/Chat.tsx")).then(function(e){return e.default});case T.m.CHAT_EMPTY:return Promise.resolve(K);case T.m.CHAT_CREATE:return Promise.resolve(M);case T.m.CHAT_MINIMIZE:return t.e("Minimize").then(t.bind(null,"./src/chat/pages/Minimize.tsx")).then(function(e){return e.default});case T.m.CHAT_MEMBERS:return t.e("ChatMembers").then(t.bind(null,"./src/chat/pages/Members.tsx")).then(function(e){return e.default});case T.m.CHAT_INVITE:return t.e("ChatMembers").then(t.bind(null,"./src/chat/pages/Invite.tsx")).then(function(e){return e.default});case T.m.CHAT_TEST:return t.e("ChatTest").then(t.bind(null,"./src/chat/pages/ChatTest.tsx")).then(function(e){return e.default});default:throw new Error("Route is not defined for '"+e+"'.")}}},Y=z,q=t("./node_modules/redux/es/index.js"),W=t("./node_modules/redux-form/es/index.js"),J=t("./src/chat/actions/channel.ts"),Q=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(arguments[1].type){case J.n:return!0;default:return e}},$=Q,Z=t("./node_modules/lodash/uniq.js"),X=t.n(Z),ee={fetchingChannels:!1,hasMoreChannels:!1,sortedKeys:[]},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,n=arguments[1];switch(n.type){case J.g:return Object.assign({},e,{fetchingChannels:!0});case J.b:var t=n.payload,r=t.channels,o=t.hasMoreChannels,a=Object.keys(r);return{fetchingChannels:!1,hasMoreChannels:o&&!!a.length,sortedKeys:[].concat(u(e.sortedKeys),u(a))};case J.o:var i=n.payload.acceptedChannelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(function(e){return e!==i})});case J.d:var s=n.payload.blockedChannelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(function(e){return e!==s})});case J.i:var c=n.payload.removedChannelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(function(e){return e!==c})});case J.r:var l=n.payload.channel.channelId;return e.sortedKeys.indexOf(l)>-1?Object.assign({},e,{sortedKeys:e.sortedKeys.filter(function(e){return e!==l})}):e;case J.q:var d=n.payload.channel;return Object.assign({},e,{sortedKeys:X()([d.channelId].concat(u(e.sortedKeys)))});default:return e}},te=ne,re=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(arguments[1].type){case J.e:return!1;case J.f:return!0;default:return e}},oe=re,ae=t("./src/chat/actions/message.ts"),ie={fetchingChannels:!1,hasMoreChannels:!0,sortedKeys:[]},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,n=arguments[1];switch(n.type){case J.h:return Object.assign({},e,{fetchingChannels:!0});case J.c:var t=n.payload,r=t.channels,o=t.hasMoreChannels,a=Object.keys(r);return{fetchingChannels:!1,hasMoreChannels:o&&!!a.length,sortedKeys:[].concat(l(e.sortedKeys),l(a))};case J.i:var i=n.payload.removedChannelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(function(e){return e!==i})});case J.d:var s=n.payload.blockedChannelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(function(e){return e!==s})});case J.o:var c=n.payload.acceptedChannelId;return Object.assign({},e,{sortedKeys:[c].concat(l(e.sortedKeys))});case J.a:var u=Object.keys(n.payload);return Object.assign({},e,{sortedKeys:X()([].concat(l(u),l(e.sortedKeys)))});case J.r:var d=n.payload.channel.channelId;return Object.assign({},e,{sortedKeys:X()([d].concat(l(e.sortedKeys)))});case ae.a:var f=n.payload.channelId;return Object.assign({},e,{sortedKeys:X()([f].concat(l(e.sortedKeys)))});default:return e}},ce=se,ue=t("./node_modules/lodash/omit.js"),le=t.n(ue),de=t("./node_modules/lodash/first.js"),fe=t.n(de),he=t("./src/chat/constants/channels.ts"),pe={},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,n=arguments[1];switch(n.type){case J.a:return Object.assign({},e,n.payload);case J.c:case J.b:return Object.assign({},e,n.payload.channels);case J.k:var t=n.payload,r=e[t],o=Object.assign({},r,{unreadMessageCount:0}),a=d({},t,o);return Object.assign({},e,a);case J.o:var i=n.payload.acceptedChannelId,s=Object.assign({},e[i],{memberState:he.e.JOINED});return Object.assign({},e,d({},s.channelId,s));case J.r:var c=n.payload.channel,u=e[c.channelId],l=Object.assign({},u,le()(c,"hasMoreMessages","isMessageListLoaded")),f=d({},c.channelId,l);return Object.assign({},e,f);case J.q:var h=n.payload.channel,p=e[h.channelId],m=Object.assign({},p,h,{memberState:he.e.INVITED}),g=d({},h.channelId,m);return Object.assign({},g,e);case J.d:var v=n.payload.blockedChannelId,b=le()(e,v);return Object.assign({},b);case J.i:var _=le()(e,n.payload.removedChannelId);return Object.assign({},_);case J.p:var E=n.payload,y=E.channelId,I=E.name,C=Object.assign({},e[y],{name:I});return Object.assign({},e,d({},y,Object.assign({},C)));case ae.a:var O=n.payload.channelId,A=Number(fe()(Object.keys(n.payload.message))),N=Object.assign({},e[O],{lastMessage:n.payload.message[A]});return Object.assign({},e,d({},O,N));case ae.g:var S=n.payload;return Object.assign({},e,d({},S,Object.assign({},e[S],{fetchingMessages:!0,fetchingMessagesError:!1})));case ae.b:case ae.e:var R=n.payload,w=R.hasMore,T=R.channelId;return Object.assign({},e,d({},T,Object.assign({},e[T],{isMessageListLoaded:!0,hasMoreMessages:w,fetchingMessages:!1,fetchingMessagesError:!1})));case ae.f:var j=n.payload;return Object.assign({},e,d({},j,Object.assign({},e[j],{fetchingMessages:!1,fetchingMessagesError:!0})));default:return e}},ge=me,ve={channelId:void 0,isLoaded:!1},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,n=arguments[1];switch(n.type){case J.l:var t=Object.assign({},e,{isLoaded:!1});if(n.payload){var r=n.payload.channelId;r&&(t.channelId=r)}return t;case J.m:return Object.assign({},e,{isLoaded:!0});case J.i:return Object.assign({},e,{channelId:""});default:return e}},_e=be,Ee=Object(q.combineReducers)({firstLoaded:$,inviteListExpanded:oe,invited:te,joined:ce,models:ge,selected:_e}),ye=t("./node_modules/lodash/values.js"),Ie=t.n(ye),Ce=t("./src/chat/actions/sendbird/index.ts"),Oe=t("./src/chat/actions/user.ts"),Ae={SEARCH:"search",CONTACTS:"contacts"},Ne={},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,n=arguments[1];switch(n.type){case Ce.e:return Object.assign({},e,n.payload.reduce(function(e,n){return e[n.name.toLowerCase()]={loaded:!0,userId:n.id,valid:!0,method:Ae.CONTACTS},e},{}));case Ce.c:var t=n.payload.username;return Object.assign({},e,f({},t,{loaded:!1,userId:null,valid:!1,method:Ae.SEARCH}));case Ce.d:var r=n.payload,o=r.contact,a=r.username,i=r.valid,s=!!(i&&o&&o.id);return Object.assign({},e,f({},a.toLowerCase(),{loaded:!0,userId:o?o.id:null,valid:s,method:Ae.SEARCH}));case Oe.f:var c=n.payload;return Object.assign({},e,Ie()(c).reduce(function(e,n){return e[n.name.toLowerCase()]={loaded:!0,userId:n.id,valid:!0,method:Ae.SEARCH},e},{}));default:return e}},Re=Se,we={},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,n=arguments[1];switch(n.type){case Ce.e:return Object.assign({},e,n.payload.reduce(function(e,n){return e[n.id]=n,e},{}));case Ce.d:var t=n.payload.contact;return t?Object.assign({},e,h({},t.id,t)):e;case Oe.f:return Object.assign({},e,n.payload||{});case J.d:var r=n.payload.blockedUserId;return r?le()(e,r):e;default:return e}},je=Te,Pe=[],Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,n=arguments[1];switch(n.type){case Oe.e:return[].concat(p(e),[n.payload]);case Oe.h:return e.filter(function(e){return e!==n.payload});case Oe.g:return Pe;default:return e}},xe=Ue,Le=[],ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,n=arguments[1];switch(n.type){case Ce.e:return[].concat(m(e),m(n.payload.map(function(e){return e.id})));case J.d:return e.filter(function(e){return e!==n.payload.blockedUserId});default:return e}},De=ke,Me=Object(q.combineReducers)({knownContacts:Re,models:je,selectedUserIds:xe,suggestedKeys:De}),He=t("./src/chat/actions/container.ts"),Ge=t("./src/chat/constants/container.ts"),Fe={size:Ge.a.EMBED},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,n=arguments[1];switch(n.type){case He.a:if(Ge.b[n.payload])return Object.assign({},e,{size:n.payload});default:return e}},Ve=Be,Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(arguments[1].type){case ae.b:case ae.k:return!0;default:return e}},ze=Ke,Ye={},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,n=arguments[1];switch(n.type){case ae.b:var t=n.payload.messages;return Object.assign({},e,t);case ae.a:return Object.assign({},e,n.payload.message);case ae.h:return Object.assign({},e,n.payload);case ae.d:case ae.i:return le()(e,n.payload);case ae.e:var r=n.payload.messages;return Object.assign({},e,r);case J.j:var o=n.payload;return Object.assign({},le.a.apply(void 0,[e].concat(g(o))));default:return e}},We=qe,Je={},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,n=arguments[1];switch(n.type){case ae.c:var t=n.payload;return Object.assign({},e,v({},t.clientMessageId,t));case ae.m:var r=n.payload,o=r.clientMessageId,a=r.toggle;if(o){var i=e[o];return Object.assign({},e,v({},o,Object.assign({},i,{error:a})))}return Object.assign({},e);case ae.a:case ae.j:var s=n.payload.clientMessageId;return Object.assign({},s?le()(e,s):e);default:return e}},$e=Qe,Ze={count:0},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,n=arguments[1];switch(n.type){case ae.l:if(n.payload){var t=n.payload.count;return Object.assign({},e,{count:t})}}return e},en=Xe,nn=Object(q.combineReducers)({firstLoaded:ze,models:We,pending:$e,unread:en}),tn=t("./src/lib/makeActionCreator/index.ts"),rn=(Object(tn.a)("META__META_RECEIVED"),{country:"",domain:"",isBot:!1,method:"",protocol:"",sessionReferrerDomain:"",userAgent:""}),on=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn,n=arguments[1];switch(n.type){case"META__META_RECEIVED":return n.payload;default:return e}},an=on,sn=t("./src/config.ts"),cn=(t("./src/chat/strings/index.ts"),t("./src/lib/areUrlsEqual/index.ts")),un=t("./src/lib/logs/timing.js"),ln=this,dn=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},fn="PLATFORM__HISTORY_LOCATION_SET",hn=function(e,n,t){return function(r,o,a){return dn(ln,void 0,void 0,regeneratorRuntime.mark(function i(){var s,c,u,l,d,f,h,p;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(s=Date.now(),c=o(),u=c.platform.currentPage,t){i.next=5;break}return i.abrupt("return");case 5:if(l=t.match.params.channelId,d=c.channels.selected.channelId,r(pn({action:n,location:e,routeMatch:t})),!u||!Object(cn.a)(u.url,e)){i.next=10;break}return i.abrupt("return");case 10:if(!t){i.next=16;break}return f=t.match,i.next=14,t.route.action(f)(r,o,a);case 14:h=t.route.meta,h&&(p=Date.now()-s,Object(un.b)({duration:p,meta:h}));case 16:l&&l!==d&&r(Object(J.G)());case 17:case"end":return i.stop()}},i,this)}))}},pn=Object(tn.a)(fn),mn=(Object(tn.a)("PLATFORM__INITIAL_REFERRER_SET"),Object(tn.a)("PLATFORM__PAGE_META_SET"),Object(tn.a)("PLATFORM__REDIRECT_REQUESTED"),Object(tn.a)("PLATFORM__MODAL_TOGGLED"),{currentPage:null,referrers:{},metas:{}}),gn=function(e,n){return{key:e,locationState:{},queryParams:{},routeMatch:null,status:404,url:n,urlParams:{}}},vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn,n=arguments[1];switch(n.type){case fn:if(!n.payload)return e;var t=e.currentPage,r=n.payload,o=r.routeMatch,a=r.location,i=a.key,s=Object(S.createPath)(a),c=o?{key:i,locationState:a.state,meta:o.route.meta,queryParams:o.match.queryParams,routeMatch:le()(o,["route.action"]),status:200,url:s,urlParams:o.match.params}:gn(i,s),u=e.referrers;if("PUSH"===r.action){var l=t&&t.url||"";u=Object.assign({},u,b({},i,l))}return Object.assign({},e,{referrers:u,currentPage:c});case"PLATFORM__PAGE_META_SET":if(!n.payload)return e;var d=n.payload,f=d.key,h=d.title,p=d.description,m=d.icon,g=d.type;return Object.assign({},e,{metas:Object.assign({},e.metas,b({},f,{description:p,icon:m,title:h,type:g}))});case"PLATFORM__INITIAL_REFERRER_SET":return n.payload,e;default:return e}},bn=vn,_n=t("./src/chat/actions/promo.ts"),En={nsfwWarning:!1,welcomeBeta:!1},yn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En,n=arguments[1];switch(n.type){case _n.a:var t=n.payload;return Object.assign({},e,t);default:return e}},In=yn,Cn=(t("./src/chat/endpoints/sendbird/index.ts"),this&&this.__awaiter,Object(tn.a)("SENDBIRD__SET_SENDBIRD_PROXY_HOST"),{host:void 0}),On=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cn,n=arguments[1];switch(n.type){case"SENDBIRD__SET_SENDBIRD_PROXY_HOST":return e.host=n.payload.proxy_host,e;default:return e}},An=On,Nn=t("./src/chat/singleton/SendbirdSDK.ts"),Sn=this,Rn=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},wn=Object(tn.a)("SENDBIRD_SDK__CONNECT_SUCCESS"),Tn=Object(tn.a)("SENDBIRD_SDK__CONNECT_FAIL"),jn=function(e){return function(n,t,r){r.apiContext;return Rn(Sn,void 0,void 0,regeneratorRuntime.mark(function r(){var o,a,i,s,c,u,l,d;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:o=t(),a=o.sendbird,i=o.user,s=a.proxy,c=a.session,i.account&&s.host&&(u=i.account,l=u.id,d=u.name,Nn.a.connect(s.host,e||c.token,l,d,n).then(function(e){e.error?n(Tn(e.error)):(n(wn(e.data)),n(Object(ae.x)()),n(Object(J.z)()))}));case 3:case"end":return r.stop()}},r,this)}))}},Pn=Object(tn.a)("SENDBIRD_SDK__DISCONNECT"),Un=function(){return function(e,n,t){t.apiContext;return Rn(Sn,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:Nn.a.disconnect().then(function(n){n.error||e(Pn(n.data))});case 1:case"end":return n.stop()}},n,this)}))}},xn={active:!1,connectionStatus:"offline"},Ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn,n=arguments[1];switch(n.type){case"SENDBIRD_SDK__CONNECT_SUCCESS":return Object.assign({},e,{active:!0,connectionStatus:n.payload.connectionStatus});case"SENDBIRD_SDK__CONNECT_FAIL":var t=Object.assign({},n.payload);return Object.assign({},e,{error:t,active:!1});case"SENDBIRD_SDK__DISCONNECT":return Object.assign({},e,{active:!1});default:return e}},kn=Ln,Dn={expires:void 0,token:void 0,active:!1},Mn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn,n=arguments[1];switch(n.type){case Ce.f:return Object.assign({},e,n.payload);case Ce.a:return Object.assign({},e,{active:!0});case Ce.b:return Object.assign({},e,{active:!1});default:return e}},Hn=Mn,Gn=Object(q.combineReducers)({proxy:An,session:Hn,sdk:kn}),Fn=t("./src/chat/actions/theme.ts"),Bn=t("./src/chat/models/Theme/index.ts"),Vn={current:Bn.b,cached:{}},Kn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn,n=arguments[1];switch(n.type){case Fn.a:return e.current=Bn.c[n.payload.themeKey],Object.assign({},e);default:return e}},zn=Kn,Yn=t("./src/chat/actions/typingIndicator.ts"),qn={usernames:[]},Wn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn,n=arguments[1];switch(n.type){case Yn.a:return{usernames:n.payload.usernames};case J.l:return{usernames:[]};default:return e}},Jn=Wn,Qn=t("./src/lib/reducers/addAuthentication/index.ts"),$n=function(e,n){switch(void 0===e&&(e=null),n.type){case Oe.a:return n.payload;default:return e}},Zn=Object(Qn.a)($n,null),Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et=function(e){return Object.keys(e).reduce(function(n,t){var r=e[t];return"boolean"==typeof r&&(n[t]=r),"object"===(void 0===r?"undefined":Xn(r))&&(n[t]=nt(r)),n},{})},nt=function(e){return{experimentId:e.experiment_id,owner:e.owner,variant:e.variant}},tt={},rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,n=arguments[1];switch(n.type){case Oe.a:return et(n.payload.features);default:return e}},ot=Object(Qn.a)(rt,tt),at=T.s,it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at;return arguments[1].type,e},st=Object(Qn.a)(it,at),ct={blob:"",loid:"",loidCreated:"",version:-1},ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,n=arguments[1];switch(n.type){case Oe.b:return n.payload;default:return e}},lt=ut,dt=t("./src/chat/constants/theme.ts"),ft={globalTheme:dt.a},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,n=arguments[1];switch(n.type){case Fn.a:var t=n.payload.themeKey;return Object.assign({},e,{globalTheme:t});default:return e}},pt=ht,mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments[1];switch(n.type){case Oe.c:return n.payload;default:return e}},gt=mt,vt=t("./src/lib/makeApiRequest/index.ts"),bt=function(e,n){return Object(vt.b)(e,{data:n,endpoint:"/refreshproxy",method:T.U.POST})},_t=this,Et=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},yt="SESSION__USER_LOGGED_OUT",It=(Object(tn.a)("SESSION__USER_AUTHENTICATED"),Object(tn.a)("SESSION__USER_REAUTHENTICATED")),Ct=(Object(tn.a)(yt),function(){return function(e,n,t){var r=t.apiContext;return Et(_t,void 0,void 0,regeneratorRuntime.mark(function t(){var o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o=n().user.session)){t.next=6;break}return t.next=4,bt(r(),o);case 4:a=t.sent,a.ok&&e(It(a.body));case 6:case"end":return t.stop()}},t,this)}))}}),Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments[1];switch(n.type){case"SESSION__USER_AUTHENTICATED":case"SESSION__USER_REAUTHENTICATED":return n.payload;case yt:return null;default:return e}},At=Ot,Nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments[1];switch(n.type){case Oe.d:return n.payload;default:return e}},St=Nt,Rt=Object(q.combineReducers)({account:Zn,experiments:ot,language:st,loid:lt,prefs:pt,reddaid:gt,session:At,sessionTracker:St}),wt=t("./src/app/reducers/tooltipId/index.ts"),Tt=Object(q.combineReducers)({contacts:Me,container:Ve,form:W.reducer,meta:an,platform:bn,user:Rt,themes:zn,sendbird:Gn,tooltipId:wt.a,channels:Ee,messages:nn,promoAccepted:In,typingIndicator:Jn}),jt=t("./src/chat/actions/tracking.ts"),Pt=this,Ut=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},xt=_(function(e){return function(e,n,t){return Ut(Pt,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}))}}),Lt=_(function(e){return function(e,n,t){return Ut(Pt,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}))}}),kt=_(function(e){return function(e,n,t){return Ut(Pt,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}))}}),Dt=_(function(e){return function(e,n,t){return Ut(Pt,void 0,void 0,regeneratorRuntime.mark(function t(){var r,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),o=r.platform.currentPage,!(a=o&&o.urlParams.userIds.split(","))){t.next=7;break}return e(Object(jt.g)(a)),e(Object(J.v)(a,name)),t.abrupt("return");case 7:case"end":return t.stop()}},t,this)}))}}),Mt={action:xt,chunk:T.m.CHAT,exact:!0,meta:{name:T._13.CHAT},path:"/chat/*"},Ht=Mt,Gt={action:xt,chunk:T.m.CHAT,exact:!0,meta:{name:T._13.CHAT},path:"/chat/"},Ft={action:xt,chunk:T.m.CHAT_EMPTY,exact:!0,meta:{name:T._13.CHAT_EMPTY},path:"/chat/empty/"},Bt={action:Lt,chunk:T.m.CHAT_CREATE,exact:!0,meta:{name:T._13.CHAT_CREATE},path:"/chat/channel/:action(create)/"},Vt={action:Lt,chunk:T.m.CHAT_INVITE,exact:!0,meta:{name:T._13.CHAT_INVITE},path:"/chat/channel/:channelId/:action(invite)/"},Kt={action:Lt,chunk:T.m.CHAT_MEMBERS,exact:!0,meta:{name:T._13.CHAT_MEMBERS},path:"/chat/channel/:channelId/:action(members)/"},zt={action:kt,chunk:T.m.CHAT_MINIMIZE,exact:!0,meta:{name:T._13.CHAT_MINIMIZE},path:"/chat/minimize/"},Yt=["/chat/channel/:channelId/:action(invite_confirmation|block|invited|leave|nsfw|request)/","/chat/channel/:channelId/:messageId?/:action(delete|report)?"],qt=Yt.map(function(e){return{action:Lt,chunk:T.m.CHAT,exact:!0,meta:{name:T._13.CHAT},path:e}}),Wt=["/chat/user_id/:userIds/"],Jt=Wt.map(function(e){return{action:Dt,chunk:T.m.CHAT,exact:!0,meta:{name:T._13.CHAT},path:e}}),Qt=[Gt,Ft,zt,Vt,Bt,Kt].concat(E(qt),E(Jt)),$t=this,Zt=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},Xt=function(e){var n=this;return function(t){return function(r,o,a){return Zt(n,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e(t)(r,o,a);case 2:case"end":return n.stop()}},n,this)}))}}}(function(e){return function(e,n,t){return Zt($t,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}))}}),er=["/chat/test"],nr=er.map(function(e){return{action:Xt,chunk:T.m.CHAT_TEST,exact:!0,meta:{name:T._13.CHAT_TEST},path:e}}),tr=nr,rr=[].concat(y(Qt),y(tr),[Ht]),or=rr,ar=t("./node_modules/redux-thunk/lib/index.js"),ir=t.n(ar),sr=t("./src/lib/initializeClient/index.tsx"),cr=t("./src/lib/matchRoute/index.ts"),ur=t("./src/reduxMiddleware/apiContext.ts"),lr=t("./node_modules/react-router/es/index.js"),dr=(t("./assets/fonts/BentonSans/font.less"),t("./src/chat/components/Root/normalize.css"),t("./node_modules/react-redux/es/index.js")),fr=t("./node_modules/reselect/lib/index.js"),hr=t("./src/chat/icons/Loader/index.tsx"),pr=t("./src/chat/selectors/app.ts"),mr=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),gr=Object(fr.createStructuredSelector)({isReady:pr.c,alert:pr.a}),vr=Object(dr.connect)(gr),br=function(e){return e.isReady?e.children:mr(hr.a,{textType:e.alert||"",isFadeOut:e.isReady,zIndex:2})},_r=vr(br),Er=t("./bundled-modules/styled-components/styled-components.min.js"),yr=t.n(Er),Ir=Object(fr.createSelector)(function(e){return e.themes.current},function(e){return{theme:e}}),Cr=Object(dr.connect)(Ir)(Er.ThemeProvider),Or=t("./node_modules/react-router-redux/es/index.js"),Ar=t("./src/chat/components/FrameHeader/index.tsx"),Nr=t("./src/chat/components/FrameNav/index.tsx"),Sr=t("./src/chat/helpers/urls.ts"),Rr=t("./src/chat/selectors/platform.ts"),wr=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),Tr=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),jr=yr()(function(e){return Tr("header",{className:e.className,onClick:e.onClick},void 0,e.children)}).withConfig({componentId:"t5dg7o-0"})(["",";display: flex;height: 1.6875em;flex-direction: row-reversed;flex: 0 0;margin-top:-1px;line-height: 1.7em;justify-content: space-between;align-items: center;padding: 0 .625em;min-height: 1.6875em;"],function(e){return e.isEmbedded?"cursor: pointer":""}),Pr=yr.a.div.withConfig({componentId:"t5dg7o-1"})(["position: relative;display: flex;flex: 1 0;border-top: 1px solid ",";min-height: 10em;"],function(e){return e.theme.layout.colsBorder}),Ur=Object(fr.createStructuredSelector)({containerSize:function(e){return e.container.size},routeName:Rr.b,unreadCount:function(e){return e.messages.unread.count}}),xr=function(e,n){return{expand:function(){e(Object(He.c)(Ge.a.EMBED)),e(n.history&&n.history.length>1?Object(Or.goBack)():Object(J.H)())},minimize:function(){e(Object(He.c)(Ge.a.PILL)),e(Object(Or.push)(Sr.f))}}},Lr=Object(dr.connect)(Ur,xr),kr=function(e){function n(e){I(this,n);var t=C(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.onHeaderClickHandler=t.onHeaderClickHandler.bind(t),t}return O(n,e),wr(n,[{key:"onHeaderClickHandler",value:function(){this.isEmbedded&&(this.isMinimized?this.props.expand():this.props.minimize())}},{key:"render",value:function(){var e=this.props,n=e.children,t=e.className,r=e.containerSize,o=e.routeName,a=e.unreadCount;return Tr("main",{className:t,role:"main"},void 0,Tr(jr,{onClick:this.onHeaderClickHandler,isEmbedded:this.isEmbedded},void 0,Tr(Ar.a,{count:a,routeName:o}),Tr(Nr.a,{containerSize:r,routeName:o})),!this.isMinimized&&n&&Tr(Pr,{},void 0," ",n," "))}},{key:"isEmbedded",get:function(){return this.props.containerSize!==Ge.a.FULL}},{key:"isMinimized",get:function(){return this.props.containerSize===Ge.a.PILL||this.props.containerSize===Ge.a.HIDDEN}}]),n}(j.Component),Dr=Object(lr.withRouter)(kr),Mr=yr()(Lr(Dr)).withConfig({componentId:"t5dg7o-2"})(["background-color: ",";height: 100%;width: 100%;display: flex;flex-direction: column;overflow: hidden;"],function(e){return e.theme.layout.body}),Hr=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(n,t,r,o){var a=n&&n.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&a)for(var s in a)void 0===t[s]&&(t[s]=a[s]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:e,type:n,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}(),Gr=t("./node_modules/lodash/once.js"),Fr=t.n(Gr),Br=function(e){return function(n){return e(n)}},Vr=t("./src/lib/cache/index.ts"),Kr=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments[2];if(window.parent!==window){var r={type:t?e+"."+t:e,data:n};window.parent.postMessage(JSON.stringify(r),"*")}},zr=Ge.a.PILL,Yr=function(e){return e&&Ge.b[e]&&e!==Ge.a.FULL&&e||zr},qr=void 0,Wr=function(){try{return Yr(Object(Vr.b)(qr))}catch(e){return Ge.a.EMBED}},Jr=function(e){Object(Vr.d)(qr,e,Vr.a)},Qr=function(e){return Kr("resize.chat",Object.assign({size:e,dimensions:Ge.b[e]},Ge.b[e]))},$r=Fr()(function(e){var n=Wr();n===Ge.a.EMBED&&(n=zr),e.dispatch(Object(He.c)(n)),Qr(n)}),Zr=function(e){if("undefined"==typeof window)return Br;var n=e.getState(),t=n.user.account,r=t&&t.id||"unknown",o=Object(pr.b)();return qr=Object(Vr.c)(T.l.CHAT,"container",r),o?(Object(pr.a)(n)||$r(e),window.addEventListener("storage",function(e){switch(e.key){case qr:;}}),function(e){return function(n){var t=e(n);switch(n.type){case He.a:var r=Yr(n.payload);Jr(r),Qr(r)}return t}}):(Wr()===Ge.a.HIDDEN?Jr(Ge.a.PILL):e.dispatch(Object(He.c)(Ge.a.FULL)),Br)},Xr=Zr,eo=t("./src/chat/constants/tracking.ts"),no=t("./src/telemetry/index.ts"),to=t("./src/chat/tracking/commonFields.ts"),ro=function(e){Object(no.a)(Object.assign({noun:"timing",source:"global",action:eo.a.HEARTBEAT},Object(to.v)(e)))},oo=function(e){var n=e.getState();return ro(n),setInterval(function(){return ro(n)},30*T._18),function(t){return function(r){var o=t(r);return n=e.getState(),o}}},ao=oo,io=t("./node_modules/url/url.js"),so=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"chat",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nav",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:eo.a.CLICK;Object(no.a)(Object.assign({noun:n,source:t,action:r,chat:Object.assign({},Object(to.d)(e),Object(to.o)(e),Object(to.l)(e),Object(to.x)(e),Object(to.q)(e))},Object(to.v)(e)))};!function(e){e.Navigate="navigate.chat",e.Websocket="websocket.chat",e.Expand="expand.chat",e.UnreadCount="unreadCount.chat"}(N||(N={}));var co=function(e){try{return JSON.parse(e.data)}catch(e){return}},uo=Fr()(function(e){window.addEventListener("message",function(n){var t=co(n);if(t)switch(t.type){case N.Navigate:var r=Object(io.parse)(t.data.href).pathname||Sr.g;e.dispatch(Object(Or.push)(r)),e.dispatch(Object(He.c)(Ge.a.EMBED));break;case N.Websocket:e.dispatch(Object(ae.x)());break;case N.Expand:var o=e.getState();e.dispatch(Object(He.c)(Ge.a.EMBED));var a=o.platform.currentPage;a&&a.meta&&a.meta.name===T._13.CHAT_MINIMIZE&&e.dispatch(Object(J.H)());var i=t.data.telemetry,s=i.action,c=i.noun,u=i.source;so(o,c,u,s)}})}),lo=function(e){return"undefined"==typeof window?Br:(uo(e),function(e){return function(n){switch(n.type){case ae.l:Kr(N.UnreadCount,n.payload)}return e(n)}})},fo=lo,ho=t("./node_modules/lodash/pick.js"),po=t.n(ho),mo=new Set([Fn.a]),go=function(e){return function(n){return function(t){var r=n(t);if(mo.has(t.type)){var o=e.getState().user,a=po()(o.prefs,["layout","globalTheme"]),i=o.language,s={prefs:a,language:i};w.a.set("USER",btoa(JSON.stringify(s)),{domain:sn.a.cookieDomain})}return r}}},vo=go,bo=t("./node_modules/lodash/defer.js"),_o=t.n(bo),Eo=this,yo=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},Io=function(e,n){var t=n&&n.type===He.a?n.payload:e.container.size,r=t===Ge.a.PILL||t===Ge.a.HIDDEN,o=n&&n.type===fn?n.payload&&n.payload.routeMatch&&n.payload.routeMatch.route.meta.name===T._13.CHAT_MINIMIZE:e.platform.currentPage&&e.platform.currentPage.meta&&e.platform.currentPage.meta.name===T._13.CHAT_MINIMIZE;return!r&&o},Co=function(e){if("undefined"==typeof window)return Br;var n=void 0,t=function(t){var r=new Date,o=new Date(t.expires||0),a=Math.floor(.9*(o.getTime()-r.getTime()));n=setTimeout(function(){e.dispatch(Object(Ce.i)())},a)},r=function(){var n=e.getState().sendbird.session;n.expires&&n.active?t(n):_o()(function(){return e.dispatch(Object(Ce.i)())})};return Object(Rr.b)(e.getState())===T._13.CHAT_MINIMIZE?_o()(function(){return yo(Eo,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!Io(e.getState())){n.next=4;break}r(),n.next=9;break;case 4:return n.next=6,e.dispatch(Object(Ce.i)(!1));case 6:if(!e.getState().sendbird.session.token){n.next=9;break}return n.next=9,e.dispatch(Object(ae.x)());case 9:case"end":return n.stop()}},n,this)}))}):r(),function(o){return function(a){var i=!e.getState().sendbird.sdk.active;switch(a.type){case He.a:if(!a.payload)break;var s=a.payload!==Ge.a.PILL&&a.payload!==Ge.a.HIDDEN;i&&s&&r();break;case fn:var c=Io(e.getState(),a);i&&c?r():c&&e.dispatch(Object(J.H)());break;case Ce.f:if(!a.payload)break;if(!a.payload.active)break;t(a.payload);var u=a.payload.token;e.dispatch(jn(u));break;case yt:e.dispatch(Object(Ce.g)()),e.dispatch(Un()),clearTimeout(n),n=null}return o(a)}}},Oo=Co,Ao=function(e){var n="undefined"!=typeof window,t=n?window.document.title:"";return function(e){return function(r){switch(e(r),r.type){case ae.l:var o=r.payload.count;n&&(window.document.title=o>0?"("+o+") "+t:t)}}}},No=Ao,So=t("./node_modules/lodash/throttle.js"),Ro=t.n(So),wo=5*T.V,To=function(e){var n=Ro()(function(){e.dispatch(Ct())},wo),t=void 0,r=void 0,o=function(){var t=e.getState().user.session;if(t&&r){var o=new Date(t.expires),a=r+Math.floor(.8*(o.getTime()-r));Date.now()>a&&n&&n()}},a=function(e){r=Date.now();var o=new Date(e.expires),a=o.getTime()-r,i=.8+.1*Math.random(),s=Math.min(Math.floor(i*e.expiresIn*1e3),Math.floor(i*a));t=setTimeout(n,s)},i=e.getState();return i.user.session&&a(i.user.session),window.addEventListener("focus",o),window.addEventListener("touchend",o),document.body.addEventListener("mouseenter",o),function(e){return function(n){return"SESSION__USER_AUTHENTICATED"!==n.type&&"SESSION__USER_REAUTHENTICATED"!==n.type||a(n.payload),n.type===yt&&(clearTimeout(t),t=null),e(n)}}},jo=To,Po=t("./node_modules/lodash/get.js"),Uo=t.n(Po),xo=t("./src/chat/tracking/events/chatView.ts"),Lo=t("./src/chat/tracking/events/contactsList.ts"),ko=t("./src/chat/tracking/events/invitationInbox.ts"),Do=t("./src/chat/tracking/events/messagesInbox.ts"),Mo=Fr()(function(e){return Object(Do.b)(e)}),Ho=function(e){e.messages.firstLoaded&&e.channels.firstLoaded&&Mo(e)},Go=function(e){Object(Rr.c)()&&Object(xo.c)(e)},Fo=function(e){var n=Uo()(e,"platform.currentPage.urlParams.action");n&&"create"===n&&Object(Lo.g)(e)},Bo=function(e){var n=Uo()(e,"platform.currentPage.urlParams.action");n&&"invited"===n&&Object(ko.f)(e)},Vo=function(e){return function(n){return function(t){var r=n(t),o=e.getState();switch(t.type){case fn:Ho(o),Fo(o);break;case J.n:Fo(o);break;case J.m:Ho(o),Bo(o),Go(o);break;case ae.k:Ho(o)}return r}}},Ko=Vo,zo=void 0,Yo=void 0,qo=function(e){Object(Vr.d)(zo,e,5*T.V)},Wo=void 0,Jo=function(){Wo&&clearInterval(Wo),Wo=setInterval(function(){void 0===Object(Vr.b)(zo)&&Object(ae.x)()},5*T.V)},Qo=function(e){if("undefined"==typeof window)return Br;var n=e.getState(),t=n.user.account,r=t&&t.id||"unknown";zo=Object(Vr.c)(T.l.CHAT,"unread_message_count",r),qo(n.messages.unread.count),Jo();try{window.parent.addEventListener("focus",Jo)}catch(e){}return window.addEventListener("storage",function(n){switch(n.key){case zo:var t=Object(Vr.b)(zo)||0;Yo=t,e.dispatch(Object(ae.x)(t))}}),function(e){return function(n){var t=e(n);switch(n.type){case ae.l:var r=n.payload.count;r!==Yo&&qo(r)}return t}}},$o=Qo,Zo=Object(ur.a)({actionDispatchers:{reddaidReceived:Oe.l,loidReceived:Oe.k,sessionTrackerReceived:Oe.o},cookies:w.a,receivedActions:{loidReceived:Oe.b,reddaidReceived:Oe.c,sessionTrackerReceived:Oe.d,userAuthenticated:"SESSION__USER_AUTHENTICATED",userLoggedOut:yt,userReauthenticated:"SESSION__USER_REAUTHENTICATED"},statsAppName:T.k.Chat});Object(sr.a)({pageLoader:Y,reducers:Tt,routes:or,apiContext:Zo.apiContext,appFactory:A,appName:T.k.Chat,history:function(){return Object(pr.b)()?Object(S.createMemoryHistory)({initialEntries:[window.location.pathname],initialIndex:0}):Object(S.createBrowserHistory)()}(),adsDisabled:!0,customMiddleware:[ir.a.withExtraArgument({routes:or,apiContext:Zo.apiContext}),Zo.middleware,jo,Oo,fo,ao,vo,Ko,Xr,$o,No],staticPages:{error:function(){throw new Error("Not Implemented: Error Static Page")},loading:function(){return null}},preRender:function(e){var n=e.browserHistory,t=e.routes,r=e.store,o=function(e,n){var o=Object(cr.a)(Object(S.createPath)(e),t);r.dispatch(hn(e,n,o))};n.listen(o)},postRender:function(e){var n=e.browserHistory,t=(e.routes,e.store,function(e,n){});n.listen(t)},timingsSampleRate:1})},"./src/chat/models/Channel/index.ts":function(e,n,t){"use strict";function r(e){return{id:e.userId,name:e.nickname}}function o(e){if(e)return{id:e.user_id,name:e.nickname}}function a(e){return e.map(function(e){return{id:e.user_id||e.userId,isOnline:e.is_online||e.isOnline,lastSeenAt:e.last_seen_at||e.lastSeenAt,name:e.nickname,profileUrl:e.profile_url||e.profileUrl,state:e.state,isBlockedByMe:e.isBlockedByMe}})}function i(e,n){return{channelId:d(e.channel_url),channelSendbirdUrl:e.channel_url,memberState:n,fetchingMessages:!1,fetchingMessagesError:!1,hasMoreMessages:!1,isMessageListLoaded:!1,inviter:o(e.inviter),coverUrl:e.cover_url,createdAt:e.created_at,customType:e.custom_type,data:e.data,maxLengthMessage:-1,memberCount:e.member_count,name:e.name,type:e.is_distinct?l.Direct:l.Group,lastMessage:void 0,unreadMessageCount:e.unread_message_count,members:a(e.members)}}function s(e,n){var t=e.coverUrl,o=e.createdAt,i=e.customType,s=e.data,c=e.memberCount,f=e.name,h=e.isDistinct,p=e.lastMessage,m=e.unreadMessageCount,g=e.inviter,v=e.url,b=e.members;return{channelId:d(v),channelSendbirdUrl:v,memberState:n,coverUrl:t,createdAt:Number(o),customType:i,data:s,maxLengthMessage:-1,memberCount:c,name:f,inviter:r(g),type:h?l.Direct:l.Group,lastMessage:p?Object(u.c)(p):void 0,unreadMessageCount:m,members:a(b),fetchingMessages:!1,fetchingMessagesError:!1,hasMoreMessages:!1,isMessageListLoaded:!1}}var c=t("./src/chat/constants/channels.ts"),u=t("./src/chat/models/Message/index.ts");t.d(n,"e",function(){return d}),t.d(n,"b",function(){return f}),t.d(n,"a",function(){return l}),n.d=i,n.c=s;var l,d=function(e){return e.replace("sendbird_group_channel_","")},f=function(e){return"sendbird_group_channel_"+e};!function(e){e[e.Direct=0]="Direct",e[e.Group=1]="Group"}(l||(l={}));c.e.ALL,l.Direct},"./src/chat/models/Message/index.ts":function(e,n,t){"use strict";function r(e){var n=e.channelUrl,t=e.messageType,r=e.messageId,o=e.createdAt,a=e.updatedAt,i=e.channelType,u=e.message,l=e.data,d=e.sender,f=e.reqId,h=e.customType;return{channelId:Object(c.e)(n),channelSendbirdUrl:n,messageType:s.c[t],messageId:r,createdAt:o,updatedAt:a,channelType:i,data:l,messageData:g(u,l),sender:d,reqId:f,customType:h}}function o(e,n,t){var r=i()(),o=b.n(e);if(o)return{channelId:o.channelId,clientMessageId:r,createdAt:(new Date).getTime(),data:JSON.stringify(v(n,t,r)),messageData:d[t](n),messageType:s.c.PENDING,error:!1,sender:{nickname:_.b(e),userId:_.a(e)}}}var a=t("./node_modules/uuid/v4.js"),i=t.n(a),s=t("./src/chat/constants/messages.ts"),c=t("./src/chat/models/Channel/index.ts"),u=t("./src/chat/helpers/urls.ts"),l=t("./src/chat/icons/SnooMoji/index.tsx"),d={text:function(e){return{type:s.b.TEXT,value:e}},post:function(e){return{type:s.b.POST,value:e,subreddit:Object(u.d)(e)}},snoomoji:function(e){var n=l.a[e],t=l.a[0];return{type:s.b.SNOOMOJI,value:e,icon:n||t}}},f=s.b.TEXT,h=s.b.POST,p=s.b.SNOOMOJI,m=function(e){if(e){return JSON.parse(e).v1.clientMessageId||void 0}},g=function(e,n){if(n&&n.length){var t=JSON.parse(n),r=t.v1,o=r.snoomoji,a=r.embed_data;if(o){var i=o;return d[p](i)}if(a&&a.url)return d[h](a.url)}return d[f](e)},v=function(e,n,t){return{v1:Object.assign({clientMessageId:t},n===p?{snoomoji:e}:{},n===h?{embed_data:{url:e}}:{})}},b=t("./src/chat/selectors/channels.ts"),_=t("./src/chat/selectors/user.ts");t.d(n,"b",function(){return E}),n.c=r,n.a=o;var E=m},"./src/chat/models/Theme/index.ts":function(e,n,t){"use strict";function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,"b",function(){return s}),t.d(n,"a",function(){return c}),t.d(n,"c",function(){return u});var o,a=t("./node_modules/polished/dist/polished.es.js"),i=t("./src/chat/constants/theme.ts"),s={activity:{icon:{default:"#353535",active:"#24A0ED",disable:"#CCCCCA",hover:"#AAAAAA",nsfw:{bg:"#000",text:"#FFF"}},text:{regular:"#373C3F",active:"#24A0ED",body:"#353535",fade:"#A5A4A4",contrast:"#000",light:"#CCCCCA",warning:"#EA0027"},button:{active:"#3683D2",text:"#FFFFFF"},send:{active:"#24A0ED",disable:"#AAAAAA",hover:Object(a.a)(.08,"#24A0ED")},checkbox:{checked:"#0DD3BB",mark:"#FFF",unchecked:"#FCFCFB",uncheckedBorder:"#F1F1EF"},input:{border:"#EFEFED",focusColor:"#FFFFFF",focusBg:"#0DD3BB",ownerBg:"#EFEFED",color:"#373C3F",error:"#F00",channelRename:"#F7F7F5"},link:{staticUnderline:"rgba(34,153,255,.4)",staticText:"rgba(34,153,255,1)",hoverText:"rgba(255,69,0,1);"}},layout:{body:"#FFFFFF",bodyBorder:"rgba(0,0,0,0.2)",colsBorder:"#EFEFED",header:{counterBg:"#FF4500",counterText:"#FFF"}},chat:{list:{item:{selectedBg:"#EFEFED",hoverBg:"#F8F8F8"}}},message:{list:{item:{ownerBg:"#EFEFED",button:"#AAAAAA"},separator:{line:"#DFDEDF"}}},post:{separator:"#EFEFED"}},c={activity:{icon:{default:"#FFFFFF",active:"#24A0ED",disable:"#CCCCCA",hover:"#AAAAAA",nsfw:{bg:"#000",text:"#FFF"}},text:{regular:"#FFF",active:"#24A0ED",body:"#FFF",fade:"#A5A4A4",contrast:"#FFF",light:"#CCCCCA",warning:"#EA0027"},button:{active:"#3683D2",text:"#FFFFFF"},send:{active:"#24A0ED",disable:"#AAAAAA",hover:Object(a.a)(.08,"#24A0ED")},checkbox:{checked:"#0DD3BB",mark:"#000",unchecked:"#000",uncheckedBorder:"#2b2a2a"},input:{border:"#EFEFED",focusColor:"#FFFFFF",focusBg:"#0DD3BB",ownerBg:"#444444",color:"#FFFFFF",error:"#F00",channelRename:"#F7F7F5"},link:{staticUnderline:"rgba(34,153,255,.4)",staticText:"rgba(34,153,255,1)",hoverText:"rgba(255,69,0,1);"}},layout:{body:"#000",bodyBorder:"rgba(255,255,255,0.2)",colsBorder:"#2b2a2a",header:{counterBg:"#FF4500",counterText:"#FFF"}},chat:{list:{item:{selectedBg:"#444",hoverBg:"#383837"}}},message:{list:{item:{ownerBg:"#2b2a2a",button:"#AAAAAA"},separator:{line:"#DFDEDF"}}},post:{separator:"#EFEFED"}},u=(o={},r(o,i.b.REDDIT,s),r(o,i.b.NIGHT,c),o)},"./src/chat/selectors/app.ts":function(e,n,t){"use strict";t.d(n,"c",function(){return o}),t.d(n,"b",function(){return a}),t.d(n,"a",function(){return i});var r=t("./src/chat/strings/index.ts"),o=function(e){return!(!(e.user.account&&e.sendbird.session.active&&e.sendbird.sdk.active&&e.channels.firstLoaded)||i(e))},a=function(){return window.parent!==window},i=function(e){if(!e.user.account)return Object(r.a)("en","app.error.signIn")}},"./src/chat/selectors/channels.ts":function(e,n,t){"use strict";t.d(n,"i",function(){return a}),t.d(n,"j",function(){return i}),t.d(n,"e",function(){return s}),t.d(n,"g",function(){return c}),t.d(n,"n",function(){return u}),t.d(n,"h",function(){return l}),t.d(n,"f",function(){return d}),t.d(n,"m",function(){return f}),t.d(n,"d",function(){return h}),t.d(n,"c",function(){return p}),t.d(n,"k",function(){return m}),t.d(n,"o",function(){return g}),t.d(n,"p",function(){return v}),t.d(n,"q",function(){return b}),t.d(n,"l",function(){return _}),t.d(n,"s",function(){return E}),t.d(n,"b",function(){return y}),t.d(n,"v",function(){return I}),t.d(n,"t",function(){return C}),t.d(n,"r",function(){return O}),t.d(n,"a",function(){return A}),t.d(n,"u",function(){return N});var r=t("./node_modules/lodash/values.js"),o=t.n(r),a=(t("./src/chat/models/Channel/index.ts"),function(e){return e.channels.invited.sortedKeys.length}),i=function(e){return e.channels.joined.sortedKeys.length},s=function(e,n){if(n)return e.channels.models[n]},c=function(e){var n=e.platform.currentPage,t=n&&n.urlParams.channelId;if(t)return s(e,t)},u=function(e){var n=e.channels.selected.channelId;if(n)return s(e,n)},l=function(e){return c(e)||u(e)},d=function(e,n){return n&&n.members.map(function(e){return e.id})},f=function(e){var n=e.user,t=l(e);if(t&&t.members)return t.members.filter(function(e){return e.id!==n.account.id})},h=function(e){var n=f(e);return n&&n.filter(function(e){return e.isBlockedByMe})},p=function(e){var n=[],t=e.user.account.id;return o()(e.channels.models).forEach(function(e){var r=e.members.filter(function(e){return e.id!==t}),o=r.map(function(e){return e.id});o.length&&n.push(o)}),n.length&&n},m=function(e){var n=l(e);return n&&n.lastMessage},g=function(e){return o()(e.messages.models).filter(function(n){return n.channelId===e.channels.selected.channelId})},v=function(e){return o()(e.messages.pending).filter(function(n){return n.channelId===e.channels.selected.channelId})},b=function(e,n){var t=u(e);return t&&t[n]},_=function(e){var n=u(e);if(n&&n.lastMessage)return n.lastMessage.sender.userId},E=function(e){return e.channels.joined.hasMoreChannels},y=function(e){return e.channels.joined.fetchingChannels},I=function(e){return e.channels.joined.sortedKeys.map(function(n){return e.channels.models[n]})},C=function(e){return e.channels.inviteListExpanded},O=function(e){return e.channels.invited.hasMoreChannels},A=function(e){return e.channels.invited.fetchingChannels},N=function(e){return e.channels.invited.sortedKeys.map(function(n){return e.channels.models[n]})}},"./src/chat/selectors/contacts.ts":function(e,n,t){"use strict";t.d(n,"f",function(){return a}),t.d(n,"g",function(){return i}),t.d(n,"b",function(){return c}),t.d(n,"a",function(){return u}),t.d(n,"c",function(){return l}),t.d(n,"e",function(){return d}),t.d(n,"h",function(){return f}),t.d(n,"i",function(){return h}),t.d(n,"d",function(){return p});var r=t("./node_modules/lodash/values.js"),o=t.n(r),a=function(e){return e.contacts.suggestedKeys.map(function(n){return e.contacts.models[n]})},i=function(e){var n=e.contacts,t=n.knownContacts,r=n.models;return Object.keys(t).map(function(e){return t[e]}).filter(function(e){return e&&e.loaded&&e.valid}).map(function(e){return e.userId&&r[e.userId]}).filter(function(e){return!!e})},s=function(e,n){return o()(e.contacts.models).find(function(e){return e.id===n})},c=function(e,n){return o()(e.contacts.models).find(function(e){return e.name.toLowerCase()===n.toLowerCase()})},u=function(e,n){var t=e.contacts.knownContacts,r=t[n.toLowerCase()];return r&&r.method},l=function(e,n){if(n&&n.inviter)return e.contacts.models[n.inviter.id]},d=function(e){return e.contacts.knownContacts},f=function(e){return e.contacts.selectedUserIds},h=function(e){return f(e).length},p=function(e){var n=e.contacts.selectedUserIds;return n.length&&n.map(function(n){var t=s(e,n);return t&&t.id})}},"./src/chat/selectors/experiments.ts":function(e,n,t){"use strict";var r;!function(e){e.GroupChat="chat_group_rollout"}(r||(r={})),t.d(n,"a",function(){return o});var o=function(e){return!!e.user.experiments[r.GroupChat]}},"./src/chat/selectors/messages.ts":function(e,n,t){"use strict";t.d(n,"d",function(){return o}),t.d(n,"a",function(){return i}),t.d(n,"b",function(){return s}),t.d(n,"c",function(){return c});var r=t("./src/chat/selectors/channels.ts"),o=function(e){var n=Object(r.i)(e);return e.messages.unread.count-n||0},a=function(e,n){if(n)return e.messages.models[n]},i=function(e,n){var t=a(e,n);return t&&t.sender},s=function(e,n){var t=a(e,n);return t&&t.messageData.type},c=function(e,n){return e.messages.pending[n]}},"./src/chat/selectors/platform.ts":function(e,n,t){"use strict";t.d(n,"c",function(){return r}),t.d(n,"b",function(){return o}),t.d(n,"a",function(){return a});var r=function(e){return/chat\/channel\/(\w+)$/.test(e||window.location.pathname)},o=function(e){var n=e.platform.currentPage;if(n&&n.meta)return n.meta.name},a=function(e){var n=e.platform.currentPage;if(n&&n.urlParams)return n.urlParams.action}},"./src/chat/selectors/user.ts":function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return o});var r=function(e){return e.user.account.id},o=function(e){return e.user.account.name}},"./src/chat/singleton/SendbirdSDK.ts":function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var o,a=t("./src/config.ts"),i=t("./src/chat/actions/channel.ts"),s=t("./src/chat/actions/message.ts"),c=t("./src/chat/actions/tracking.ts"),u=t("./src/chat/actions/typingIndicator.ts");!function(e){e[e.Channels=50]="Channels",e[e.Messages=30]="Messages"}(o||(o={}));var l=t("./src/chat/constants/channels.ts"),d=t("./src/chat/constants/messages.ts"),f=t("./src/chat/models/Channel/index.ts"),h=t("./node_modules/sendbird/SendBird.min.js"),p=t.n(h),m=t("./src/chat/models/Message/index.ts"),g=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),v=a.a.sendbirdAppId,b=function(){function e(){var n=this;r(this,e),this.channels={},this.channelUniqueHandlerID=[],this.switchChannel=function(e){return n.channel=e,n.messageListQuery=n.channel.createPreviousMessageListQuery(),n.getPreviousMessages(d.c.USER)},this.self=new p.a({appId:v})}return g(e,[{key:"connect",value:function(e,n,t,r,o){var a=this;return new Promise(function(i){a.dispatch=o,a.self.connect(t,n,"https://"+e,"wss://"+e,function(e,n){a.toggleUpdateListeners(!0),a.self.updateCurrentUserInfo(r),i({data:e,error:n})})})}},{key:"isConnected",value:function(){return!!this.self.currentUser}},{key:"disconnect",value:function(){var e=this;return new Promise(function(n){e.isConnected()&&(e.toggleUpdateListeners(!1),e.self.disconnect(function(){n()}))})}},{key:"toggleUpdateListeners",value:function(e){var n=this;e?(this.onChannelChanged(),this.onReceiveInvite(),this.onReceiveMessage(),this.onDeleteMessage(),this.onUserActions(),this.onTypingStatusUpdated()):this.channelUniqueHandlerID.length&&this.channelUniqueHandlerID.forEach(function(e){n.self.removeChannelHandler(e)})}},{key:"onReceiveInvite",value:function(){var e=this,n=new this.self.ChannelHandler;n.onUserReceivedInvitation=function(n){var t=Object(f.c)(n,n.memberState);e.dispatch(Object(i.I)(t))},this.self.addChannelHandler("RECEIVE_CHANNEL_INVITE",n),this.channelUniqueHandlerID.push("RECEIVE_CHANNEL_INVITE")}},{key:"onReceiveMessage",value:function(){var e=this,n=new this.self.ChannelHandler;n.onMessageReceived=function(n,t){if(t.messageType!==d.c.ADMIN){var r=Object(f.c)(n,n.memberState),o=Object(m.c)(t);e.dispatch(Object(s.r)(o)),e.dispatch(Object(i.I)(r))}},this.self.addChannelHandler("RECEIVE_CHANNEL_MESSAGE",n),this.channelUniqueHandlerID.push("RECEIVE_CHANNEL_MESSAGE")}},{key:"onDeleteMessage",value:function(){var e=this,n=new this.self.ChannelHandler;n.onMessageDeleted=function(n,t){e.dispatch(Object(s.s)(t))},this.self.addChannelHandler("DELETE_CHANNEL_MESSAGE",n),this.channelUniqueHandlerID.push("DELETE_CHANNEL_MESSAGE")}},{key:"onTypingStatusUpdated",value:function(){var e=this,n=new this.self.ChannelHandler;n.onTypingStatusUpdated=function(n){var t=Object(f.e)(n.url),r=n.getTypingMembers().map(function(e){return e.nickname});e.dispatch(Object(u.b)({channelId:t,usernames:r}))},this.self.addChannelHandler("TYPING_STATUS_UPDATED",n),this.channelUniqueHandlerID.push("TYPING_STATUS_UPDATED")}},{key:"onUserActions",value:function(){var e=this,n=void 0;!function(e){e.onUserLeft="USER_LEFT_CHANNEL"}(n||(n={})),Object.keys(n).map(function(t){var r=new e.self.ChannelHandler,o=n[t];r[t]=function(n,t){var r=Object(f.c)(n,n.memberState);e.dispatch(Object(i.I)(r))},e.self.addChannelHandler(o,r),e.channelUniqueHandlerID.push(o)})}},{key:"onChannelChanged",value:function(){var e=this,n=new this.self.ChannelHandler;n.onChannelChanged=function(n){var t=Object(f.c)(n,n.memberState);e.dispatch(Object(i.I)(t))},this.self.addChannelHandler("ON_CHANNEL_CHANGED",n),this.channelUniqueHandlerID.push("ON_CHANNEL_CHANGED")}},{key:"enterChannel",value:function(e){var n=this;return new Promise(function(t,r){if(n.isConnected()){var o=Object(f.b)(e),a=n.channels[e];a?n.switchChannel(a).then(function(e){return t({data:e})}):n.self.GroupChannel.getChannel(o,function(o,a){a?r():(n.channels[e]=o,n.switchChannel(o).then(function(e){return t({data:e})}))})}})}},{key:"updateChannel",value:function(e){var n=this,t=e.name,r=e.coverUrl,o=e.data;return new Promise(function(e,a){n.channel?n.channel.updateChannel(t,r,o,function(n,t){return n?e():a(t)}):a("No channel selected")})}},{key:"hideChannel",value:function(){var e=this;return new Promise(function(n){if(e.channel)return e.channel.hide(),n();n()})}},{key:"leaveChannel",value:function(){var e=this;return new Promise(function(n,t){if(e.channel)return e.channel.leave(function(e,n){n&&t(n)}),n();t("No channel selected")})}},{key:"acceptChannelInvite",value:function(){var e=this;return new Promise(function(n){if(e.channel)return e.channel.acceptInvitation(),n();n()})}},{key:"declineChannelInvite",value:function(){var e=this;return new Promise(function(n){if(e.channel)return e.channel.declineInvitation(),n();n()})}},{key:"getExistingChannels",value:function(e,n){var t=this;return new Promise(function(r,a){var i=void 0;e===l.e.INVITED?t.channelListQueryInvited?i=t.channelListQueryInvited:(t.channelListQueryInvited=t.self.GroupChannel.createMyGroupChannelListQuery(),i=t.channelListQueryInvited):t.channelListQueryJoined?i=t.channelListQueryJoined:(t.channelListQueryJoined=t.self.GroupChannel.createMyGroupChannelListQuery(),i=t.channelListQueryJoined),i.includeEmpty=!0,i.limit=o.Channels,i.memberStateFilter=t.self.GroupChannel.memberState[e],i.hasNext&&i.next(function(t,o){if(o)a(o);else{var s=i.hasNext,c={};t.length&&t.forEach(function(t){var r=Object(f.c)(t,e);r.memberCount<2&&!n||(r.type!==f.a.Group||n)&&(c[r.channelId]=r)}),r({channels:c,hasMoreChannels:s})}})})}},{key:"startTypingIndicator",value:function(){this.channel&&this.channel.startTyping()}},{key:"endTypingIndicator",value:function(){this.channel&&this.channel.endTyping()}},{key:"getPreviousMessages",value:function(e){var n=this;return new Promise(function(t,r){if(n.channel){var a={};n.messageListQuery.load(o.Messages,!0,e,function(e,o){if(o)r();else{e.forEach(function(e){a[e.messageId]=Object(m.c)(e)});var i=n.messageListQuery.hasMore;t({messages:a,hasMore:i})}})}else r()})}},{key:"addMessage",value:function(e,n){var t=this;return new Promise(function(r,o){t.channel&&t.channel.sendUserMessage(e,n,function(e,n){n?(t.dispatch(Object(c.t)()),o()):r(Object(m.c)(e))})})}},{key:"deleteMessage",value:function(e){var n=this;return new Promise(function(t){n.channel&&n.channel.deleteMessage(e,function(e,n){n||t(e)})})}},{key:"getUnreadCount",value:function(){var e=this;return new Promise(function(n){e.self.GroupChannel.getTotalUnreadMessageCount(function(e){n(e)})})}},{key:"markChannelAsRead",value:function(){var e=this;return new Promise(function(n){e.channel.markAsRead(),n()})}}]),e}(),_=new b;n.a=_},"./src/chat/strings/index.ts":function(e,n,t){"use strict";function r(e,n){var t=[n,e].join(".");return a()(i,t,"")}var o=t("./node_modules/lodash/get.js"),a=t.n(o),i={app:{layout:{header:{title:{en:"Chats"},newChat:{en:"Start a new chat"},help:{en:"Help"},popout:{en:"Open chat in new window"},minimize:{en:"Minimize chat"},expand:{en:"Expand chat"},close:{en:"Close chat"}},contactList:{en:"Contact List"},currentConversation:{en:"Current Conversation"}},chat:{actions:{new:{en:"New Chat"},invited:{en:"Let's go"}},list:{new:{en:"Wants to message you"},showMore:{en:"Show more"},collapse:{en:"Collapse"},prefix:{messageOwner:{en:"You:"},sentSnooMoji:{en:"Sent a Snoomoji"},sentPostLink:{en:"Shared a post"},sentTextLink:{en:"Shared a link"}}},block:{warning:{en:"Are you sure you want to block this user?"},header:{en:"Block"},details:{en:"You will no longer see their comments, posts,\n          and messages. They will not know that you've blocked them.\n          You will no longer get notifications from this user."},apiError:"Something went wrong. Please try again later.",apiSuccess:"User has been successfully blocked."},channels:{addGroupMembers:{en:"You can add %0 more Redditors"},addToGroup:{en:"Add to group"},chats:{en:"Chats"},createGroup:{en:"Create Group"},groupName:{en:"Group name (required)"},groupMembers:{en:"group members"},maxGroupSize:{en:"Maximum group size reached"},loading:{en:"Loading channels..."},requests:{en:"Requests"},renameGroup:{en:"Rename group"}},contactList:{to:{en:"To:"},invalidUser:{en:"User doesn't exist"},potentialsHeader:{en:"Click to add"},existingGroupContact:{en:"already in group"}},delete:{warning:{en:"Are you sure you want to delete this message?"},header:{en:"Delete message"},details:{en:"You can't undo this."}},inviteConfirmation:{header:{en:"Invite users to chat"},details:{en:"Invited users will have access to the\n          chat history of this conversation."}},nsfwWarning:{header:{en:"NSFW User"},details:{en:"One or more users in this chat are marked as NSFW\n          (not safe for work), which means they tend to post explicit content\n          elsewhere on Reddit. This doesn't necessarily mean that the content\n          of this chat is explicit."}},leave:{header:{en:"Are you sure"},subHeader:{en:"Leave group chat?"},details:{en:"You will be removed from the group and no longer receive new messages.\n          You will not be able to join this group again unless you receive another invite."}},message:{placeholder:{en:"Enter text here…"},failedToSend:{en:"Failed to send"},dropdown:{options:{addToGroup:{en:"Add to group"},profile:{en:"View Profile"},mute:{en:"Mute"},block:{en:"Block"},members:{en:"View members"},leave:{en:"Leave group"},renameGroup:{en:"Rename group"}}},pickers:{snoomoji:{en:"Choose Snoomoji"}},timeStamp:{now:{en:"Now"},today:{en:"Today"},yesterday:{en:"Yesterday"}}},messageList:{loading:{en:"Loading history..."},loadingError:{en:"Something went wrong. Please try again."}},request:{karma:{en:"karma"},header:{en:"Chat Request"},groupHeader:{en:"Group invite"},redditor:{en:"redditor for"},details:{en:"Accept their request if you'd like to continue the\n          conversation. We won't notify them if you decline."},blocked:{warning:{en:"Heads up: you previously blocked\n            at least one person in this group."},details:{en:"If you join, you'll be able to see any\n            messages they send. They'll remain blocked\n            on the rest of Reddit."},label:{en:"Blocked"}},nsfw:{en:"NSFW"},preview:{en:"Preview of this chat"},defaultTitle:{en:"group"}},emptyState:{title:{en:"Your chats will show up here."},main:{en:"Get started by clicking the new chat button here or on someone's profile."}},beta:{title:{en:"You're invited. Try out Reddit Chat."},main:{en:"Start a real-time chat with another redditor.\n          We're beta testing this feature, so please share your feedback by chatting u/reddit_chat_feedback."}},typingIndicator:{oneUser:{en:"<%= user %> is typing..."},twoUsers:{en:"<%= firstUser %> and <%= secondUser %> are typing..."},severalUsers:{en:"Several people are typing..."}},report:{header:{en:"Reason for report"},reasons:{threats:{en:"Threatens, harrasses, or bullies"},violence:{en:"Encourages or incites violence"},personal:{en:"Reveals personal information"},impersonation:{en:"Impersonation"},illegal:{en:"Illegal content"},spam:{en:"Spam"}}},intro:{en:"This is the start of a beautiful thing. Say something nice, or share a cat fact."},user:{snoovatar:{en:"Snoovatar"}}},button:{accept:{en:"Accept"},addToGroup:{en:"Add to group"},block:{en:"Block"},cancel:{en:"Cancel"},decline:{en:"Decline"},delete:{en:"Delete"},init:{en:"Start Chat"},leave:{en:"Leave"},submit:{en:"Submit"},done:{en:"Done"},resend:{en:"Resend"},save:{en:"Save"}},error:{genericPage:{en:"Sorry, something went wrong."},signIn:{en:"Sign in, please."}}}};n.a=r},"./src/chat/tracking/commonFields.ts":function(e,n,t){"use strict";var r=t("./node_modules/lodash/first.js"),o=t.n(r),a=t("./node_modules/lodash/difference.js"),i=t.n(a),s=t("./node_modules/lodash/isEmpty.js"),c=t.n(s),u=t("./src/chat/selectors/channels.ts"),l=t("./src/chat/selectors/contacts.ts"),d=t("./src/chat/selectors/messages.ts"),f=t("./node_modules/js-cookie/src/js.cookie.js"),h=t.n(f),p=t("./node_modules/url/url.js"),m=t.n(p),g=function(e){return{pageType:"chat"}},v=function(e){var n=h.a.get("session_tracker");return{id:n?n.split(".")[0]:""}},b=function(e){return{id:e.user.account?e.user.account.id:"accessed_chat_without_login",isLoggedIn:!!e.user.account}},_=function(e){var n=e.platform.currentPage?e.platform.referrers[e.platform.currentPage.key]:void 0;if(n){return{domain:m.a.parse(n).hostname,url:n}}},E=function(e){return{}},y=t("./src/chat/constants/channels.ts"),I=t("./src/chat/models/Channel/index.ts");t.d(n,"v",function(){return C}),t.d(n,"d",function(){return O}),t.d(n,"q",function(){return A}),t.d(n,"u",function(){return N}),t.d(n,"s",function(){return S}),t.d(n,"A",function(){return R}),t.d(n,"z",function(){return w}),t.d(n,"l",function(){return T}),t.d(n,"j",function(){return j}),t.d(n,"p",function(){return P}),t.d(n,"w",function(){return U}),t.d(n,"a",function(){return x}),t.d(n,"y",function(){return L}),t.d(n,"x",function(){return k}),t.d(n,"n",function(){return D}),t.d(n,"k",function(){return M}),t.d(n,"m",function(){return H}),t.d(n,"i",function(){return G}),t.d(n,"r",function(){return F}),t.d(n,"c",function(){return B}),t.d(n,"e",function(){return V}),t.d(n,"f",function(){return K}),t.d(n,"h",function(){return z}),t.d(n,"g",function(){return Y}),t.d(n,"b",function(){return q}),t.d(n,"o",function(){return W}),t.d(n,"t",function(){return J}),t.d(n,"B",function(){return Q});var C=function(e){return{app:{name:"web2x"},user:b(e),screen:E(),session:v(),referrer:_(e),actionInfo:g()}},O=function(e,n){var t=n?Object(u.e)(e,n):Object(u.g)(e);return{id:t?t.channelSendbirdUrl:null}},A=function(e,n){var t=n?Object(u.e)(e,n):Object(u.h)(e);return{type:t?t.type===I.a.Group?y.b.GROUP:y.b.DIRECT:null}},N=function(e){return{type:Object(l.i)(e)>1?y.b.GROUP:y.b.DIRECT}},S=function(e){var n=Object(l.i)(e),t=n+1;return{number_members:n?t:0}},R=function(e,n){return{type:(n&&n.length)>2?y.b.GROUP:y.b.DIRECT}},w=function(e,n){return{number_members:L(e,n).members.length}},T=function(e){var n=Object(u.h)(e);return{number_members:n&&n.memberCount}},j=function(e){var n=Object(u.d)(e);return{number_blocked_users:n&&n.length}},P=function(e,n){var t=Object(d.a)(e,n);return{sender_user_id:t&&t.userId||e.user.account.id}},U=function(e){var n=Object(u.g)(e);return{sender_user_id:n&&n.inviter&&n.inviter.id}},x=function(e){var n=Object(u.d)(e);return{blocked_members:n&&n.map(function(e){return e.id})}},L=function(e,n){return n.push(e.user.account.id),{members:n}},k=function(e){return{number_unreads:Object(d.d)(e)}},D=function(e,n){var t=Object(u.h)(e),r=t&&t.unreadMessageCount;return{number_unreads:"number"==typeof n?n:r||0}},M=function(e){return{number_channels:Object(u.j)(e)}},H=function(e){return{number_pending_invites:Object(u.i)(e)}},G=function(e,n){return{message_type:Object(d.b)(e,n)||"text"}},F=function(e,n,t){var r=Object(l.a)(e,n);return{user_added_method:t||(r||null)}},B=function(e){var n=!1,t=Object(l.d)(e),r=Object(u.c)(e);return t&&t.length&&r&&r.length&&(n=!!r.find(function(e){return c()(i()(t.sort(),e.sort()))})),{existing_channel:n}},V=function(e){var n=Object(u.h)(e);return{invitation_id:n?n.channelSendbirdUrl:null}},K=function(e,n){return{invitation_preview_type:Object(d.b)(e,n)||"text"}},z=function(e){var n=Object(u.h)(e);return{invitation_type:n?n.type===I.a.Group?y.b.GROUP:y.b.DIRECT:null}},Y=function(e){var n=Object(u.h)(e);return{invitation_timestamp:n?n.createdAt:null}},q=function(e){return{blocked_user_id:e||null}},W=function(e){var n=Object(u.h)(e),t=!(!n||n.type!==I.a.Direct),r=Object(u.m)(e),a=r&&r.length&&o()(r).id;return{recipient_user_id:t?a:null}},J=function(e){var n=null,t=Object(l.h)(e);if(1===t.length){var r=o()(t),a=Object(l.b)(e,r);n=a?a.id:null}return{recipient_user_id:n}},Q=function(e){return{id:e.user.account.id}}},"./src/chat/tracking/eventUtils.ts":function(e,n,t){"use strict";function r(e,n,t){var r=Object(i.d)(e);if(r&&r.length>0){var o=a()(),s=r.map(function(e){return e.id});return t&&s.push(t),s.forEach(function(e){return n(e,o)})}return n(t)}n.a=r;var o=t("./node_modules/uuid/v4.js"),a=t.n(o),i=t("./src/chat/selectors/channels.ts")},"./src/chat/tracking/events/chatView.ts":function(e,n,t){"use strict";t.d(n,"c",function(){return c}),t.d(n,"a",function(){return u}),t.d(n,"d",function(){return l}),t.d(n,"b",function(){return d});var r=t("./src/telemetry/index.ts"),o=t("./src/chat/constants/tracking.ts"),a=t("./src/chat/tracking/eventUtils.ts"),i=t("./src/chat/tracking/commonFields.ts"),s="chat_view",c=function(e){return Object(a.a)(e,function(n,t){Object(r.a)(Object.assign({noun:"chat",source:s,action:o.a.VIEW,correlationId:t,chat:Object.assign({},Object(i.q)(e),Object(i.l)(e),Object(i.o)(e),Object(i.d)(e),Object(i.n)(e),Object(i.j)(e),Object(i.b)(n))},Object(i.v)(e)))})},u=function(e,n){Object(r.a)(Object.assign({noun:"chat_message",source:s,action:o.a.SUBMIT,chat:Object.assign({},Object(i.q)(e),Object(i.l)(e),Object(i.o)(e),Object(i.i)(e,n),Object(i.d)(e),Object(i.p)(e,n),Object(i.n)(e,0),Object(i.j)(e),Object(i.a)(e))},Object(i.v)(e)))},l=function(e){Object(r.a)(Object.assign({noun:"chat_message_failed",source:s,action:o.a.VIEW,chat:Object.assign({},Object(i.q)(e),Object(i.l)(e),Object(i.o)(e),Object(i.i)(e),Object(i.d)(e),Object(i.p)(e),Object(i.n)(e,0),Object(i.j)(e),Object(i.a)(e))},Object(i.v)(e)))},d=function(e,n){Object(r.a)(Object.assign({noun:"report_message",source:s,action:o.a.SUBMIT,chat:Object.assign({},Object(i.q)(e),Object(i.l)(e),Object(i.o)(e),Object(i.i)(e,n),Object(i.d)(e),Object(i.p)(e,n),Object(i.n)(e,0),Object(i.j)(e),Object(i.a)(e))},Object(i.v)(e)))}},"./src/chat/tracking/events/contactsList.ts":function(e,n,t){"use strict";t.d(n,"g",function(){return s}),t.d(n,"c",function(){return c}),t.d(n,"f",function(){return u}),t.d(n,"e",function(){return l}),t.d(n,"d",function(){return d}),t.d(n,"b",function(){return f}),t.d(n,"a",function(){return h});var r=t("./src/chat/constants/tracking.ts"),o=t("./src/telemetry/index.ts"),a=t("./src/chat/tracking/commonFields.ts"),i="contacts_list",s=function(e){Object(o.a)(Object.assign({noun:"contacts",source:i,action:r.a.VIEW,chat:Object.assign({},Object(a.t)(e),Object(a.s)(e))},Object(a.v)(e)))},c=function(e,n){Object(o.a)(Object.assign({noun:"contact_add",source:i,action:r.a.CLICK,chat:Object.assign({},Object(a.u)(e),Object(a.s)(e),Object(a.t)(e),Object(a.d)(e),Object(a.c)(e),Object(a.r)(e,n))},Object(a.v)(e)))},u=function(e,n){Object(o.a)(Object.assign({noun:"alert_invalid_user",source:i,action:r.a.VIEW,chat:Object.assign({},Object(a.q)(e),Object(a.s)(e),Object(a.t)(e),Object(a.d)(e),Object(a.r)(e,"search"),Object(a.c)(e))},Object(a.v)(e)))},l=function(e,n,t){Object(o.a)(Object.assign({noun:"alert_invalid_channel",source:i,action:r.a.VIEW,chat:Object.assign({},Object(a.q)(e),Object(a.s)(e),Object(a.t)(e),Object(a.d)(e),Object(a.r)(e,t),Object(a.c)(e))},Object(a.v)(e)))},d=function(e,n,t){Object(o.a)(Object.assign({noun:"create_chat",source:i,action:r.a.CLICK,chat:Object.assign({},Object(a.q)(e,t),Object(a.s)(e),Object(a.t)(e),Object(a.d)(e,t),Object(a.c)(e))},Object(a.v)(e)))},f=function(e,n){Object(o.a)(Object.assign({noun:"close_contacts",source:i,action:r.a.CLICK,chat:Object.assign({},Object(a.u)(e),Object(a.s)(e),Object(a.t)(e),Object(a.d)(e),Object(a.c)(e))},Object(a.v)(e)))},h=function(e){Object(o.a)(Object.assign({noun:"add_to_chat",source:i,action:r.a.CLICK,chat:Object.assign({},Object(a.q)(e),Object(a.l)(e),Object(a.o)(e),Object(a.d)(e),Object(a.c)(e))},Object(a.v)(e)))}},"./src/chat/tracking/events/invitationInbox.ts":function(e,n,t){"use strict";t.d(n,"f",function(){return l}),t.d(n,"c",function(){return d}),t.d(n,"d",function(){return f}),t.d(n,"e",function(){return h}),t.d(n,"b",function(){return p}),t.d(n,"a",function(){return m});var r=t("./src/chat/constants/tracking.ts"),o=t("./src/telemetry/index.ts"),a=t("./src/chat/selectors/channels.ts"),i=t("./src/chat/tracking/eventUtils.ts"),s=t("./src/chat/tracking/commonFields.ts"),c="invitation_inbox",u=function(e,n){var t=Object(a.k)(e),r=t?t.messageId:void 0;return Object.assign({},Object(s.w)(e),Object(s.e)(e),Object(s.f)(e,r),Object(s.h)(e),Object(s.g)(e),Object(s.b)(n))},l=function(e){return Object(i.a)(e,function(n,t){Object(o.a)(Object.assign({noun:"invitation",source:c,action:r.a.VIEW,correlationId:t,chat:Object.assign({},u(e,n))},Object(s.v)(e)))})},d=function(e){return Object(i.a)(e,function(n,t){Object(o.a)(Object.assign({noun:"invitation_accept",source:c,action:r.a.CLICK,correlationId:t,chat:Object.assign({},u(e,n))},Object(s.v)(e)))})},f=function(e){return Object(i.a)(e,function(n,t){Object(o.a)(Object.assign({noun:"invitation_decline",source:c,action:r.a.CLICK,correlationId:t,chat:Object.assign({},u(e,n))},Object(s.v)(e)))})},h=function(e){return Object(i.a)(e,function(n,t){Object(o.a)(Object.assign({noun:"invitation_view_member",source:c,action:r.a.CLICK,correlationId:t,chat:Object.assign({},u(e,n))},Object(s.v)(e)))})},p=function(e){Object(o.a)(Object.assign({noun:"expand",source:c,action:r.a.CLICK},Object(s.v)(e)))},m=function(e){Object(o.a)(Object.assign({noun:"collapse",source:c,action:r.a.CLICK},Object(s.v)(e)))}},"./src/chat/tracking/events/messagesInbox.ts":function(e,n,t){"use strict";t.d(n,"b",function(){return i}),t.d(n,"a",function(){return s});var r=t("./src/chat/constants/tracking.ts"),o=t("./src/telemetry/index.ts"),a=t("./src/chat/tracking/commonFields.ts"),i=function(e){Object(o.a)(Object.assign({noun:"inbox",source:"messages_inbox",action:r.a.VIEW,chat:Object.assign({},Object(a.k)(e),Object(a.x)(e),Object(a.m)(e))},Object(a.v)(e)))},s=function(e){Object(o.a)(Object.assign({noun:"create_chat",source:"messages_inbox",action:r.a.CLICK,chat:Object.assign({},Object(a.k)(e),Object(a.x)(e),Object(a.m)(e))},Object(a.v)(e)))}},"./src/lib/cache/index.ts":function(e,n,t){"use strict";function r(e){try{return JSON.parse(e)}catch(e){}}var o=t("./src/lib/constants/index.ts"),a=t("./src/lib/redditId/index.ts"),i=function(e){var n=void 0;try{if(!(n=localStorage.getItem(e)))return}catch(n){return void console.error('localStorage cache get("'+e+'") error getting: '+n)}var t=r(n);if(!t)return void console.error('localStorage cache get("'+e+'") error parsing: '+t);if(!(t.expires<Date.now()))return t.value},s=function(e,n,t){var r="number"==typeof t?Date.now()+1e3*t:t.getTime(),o={expires:r,value:n};try{return localStorage.setItem(e,JSON.stringify(o)),!0}catch(n){console.error('localStorage cache set("'+e+'") error setting: '+n)}return!1},c=i,u=s;t.d(n,"a",function(){return l}),t.d(n,"c",function(){return d}),t.d(n,"b",function(){return f}),t.d(n,"d",function(){return h});var l=(o.B,o._45),d=function(e,n,t){return e+"."+n+(t?"{"+Object(a.b)(t,o._3.ACCOUNT)+"}":"")},f=c,h=u}},["./src/chat/index.tsx"]);
//# sourceMappingURL=Chat.109a543c2b2ae305e9db.js.map